import{c as le}from"./chunk-3L2GGMHH.js";import{a as ae}from"./chunk-LWJJPALU.js";import{a as ne,b as oe}from"./chunk-JZTCV5A7.js";import{a as re}from"./chunk-SDITOA2G.js";import"./chunk-SB6QUOBG.js";import{a as B,b as v,c as P,d as U,h as R,i as J,k as K,n as Q,o as W,p as X,q as Y,r as Z,s as ee,w as te,y as ie}from"./chunk-LKZ4XIWW.js";import{d as H,f as L,g as O,j as q,l as $}from"./chunk-U6NWDCIK.js";import{q as G}from"./chunk-KK7RVAAD.js";import{$ as b,Ab as j,Hb as N,Ia as c,S as y,Sa as I,Wb as A,Xa as S,Y as g,Z as f,_ as C,cb as E,hb as h,ib as D,kb as F,la as _,lb as V,mb as t,nb as i,ob as m,pb as k,sb as x,tb as u,yb as o,zb as w}from"./chunk-D2JNWC2G.js";import"./chunk-X5YLR3NI.js";import{i as z}from"./chunk-ODN5LVDJ.js";var de=()=>["/internal/cotizaciones"],M=(a,n)=>n.id;function me(a,n){a&1&&(t(0,"div",17)(1,"div",19)(2,"div",20)(3,"div",21),m(4,"div",22)(5,"div",23),i(),t(6,"p",24),o(7,"Cargando cotizaci\xF3n..."),i()()()())}function ue(a,n){if(a&1&&(t(0,"div",25)(1,"div",8),C(),t(2,"svg",82),m(3,"path",83),i(),b(),t(4,"p",84),o(5),i()()()),a&2){let e=u(2);c(5),w(e.error())}}function pe(a,n){a&1&&(t(0,"div",35)(1,"div",85),C(),t(2,"svg",86),m(3,"path",87),i(),b(),t(4,"span",88),o(5,"Cliente encontrado en el sistema"),i()()())}function ge(a,n){a&1&&(t(0,"span",37),o(1,"\u{1F50D} Buscando..."),i())}function fe(a,n){a&1&&(t(0,"p",39),o(1,"Documento es requerido"),i())}function _e(a,n){a&1&&(t(0,"p",39),o(1,"Nombre es requerido"),i())}function he(a,n){a&1&&(t(0,"p",39),o(1,"Apellido es requerido"),i())}function xe(a,n){if(a&1&&(t(0,"option",68),o(1),i()),a&2){let e=n.$implicit;E("value",e.id),c(),w(e.nombre)}}function ve(a,n){if(a&1){let e=k();t(0,"div",47)(1,"div",89)(2,"div",90)(3,"label",91),o(4,"Producto *"),i(),t(5,"select",92),x("change",function(l){let d=g(e).$index,p=u(2);return f(p.onProductoChange(l,d))}),t(6,"option",67),o(7,"Selecciona..."),i(),F(8,xe,2,2,"option",68,M),i()(),t(10,"div",93)(11,"label",91),o(12,"Descripci\xF3n *"),i(),m(13,"input",94),i(),t(14,"div",95)(15,"label",91),o(16,"Cantidad *"),i(),t(17,"input",96),x("input",function(){let l=g(e).$index,d=u(2);return f(d.calcularTotalItem(l))}),i()(),t(18,"div",95)(19,"label",91),o(20,"Precio Unit. *"),i(),t(21,"input",97),x("input",function(){let l=g(e).$index,d=u(2);return f(d.calcularTotalItem(l))}),i()(),t(22,"div",98)(23,"button",99),x("click",function(){let l=g(e).$index,d=u(2);return f(d.eliminarItem(l))}),C(),t(24,"svg",100),m(25,"path",101),i()()(),b(),t(26,"div",102)(27,"span",103),o(28),i()()()()}if(a&2){let e,r=n.$index,l=u(2);c(),E("formGroup",l.getItemGroup(r)),c(7),V(l.productos()),c(20),j(" Total: ",l.formatMoneda(((e=l.getItemGroup(r).get("precio_total"))==null?null:e.value)||0)," ")}}function Ce(a,n){a&1&&(t(0,"div",48)(1,"p",84),o(2,"No hay items. Agrega al menos uno."),i()())}function be(a,n){if(a&1){let e=k();t(0,"input",104),x("input",function(){g(e);let l=u(2);return f(l.calcularTotales())}),i()}}function Se(a,n){if(a&1){let e=k();t(0,"input",105),x("input",function(){g(e);let l=u(2);return f(l.calcularTotales())}),i()}}function Ee(a,n){if(a&1&&(t(0,"div",60)(1,"span"),o(2,"Descuento:"),i(),t(3,"span",106),o(4),i()()),a&2){let e=u(2);c(4),j("-",e.formatMoneda(e.descuentoCalculado()),"")}}function ye(a,n){if(a&1&&(t(0,"option",68),o(1),i()),a&2){let e=n.$implicit;E("value",e.id),c(),w(e.nombre)}}function we(a,n){if(a&1&&(t(0,"option",68),o(1),i()),a&2){let e=n.$implicit;E("value",e.id),c(),w(e.nombre)}}function Te(a,n){a&1&&(t(0,"p",39),o(1,"Fecha de vencimiento es requerida"),i())}function ze(a,n){a&1&&o(0," Enviando... ")}function Fe(a,n){a&1&&o(0," Enviar al Cliente ")}function Ve(a,n){if(a&1){let e=k();t(0,"div",18),S(1,ue,6,1,"div",25),t(2,"form",26),x("ngSubmit",function(){g(e);let l=u();return f(l.onSubmit())}),t(3,"div",27)(4,"div",28)(5,"div",29)(6,"div",30),C(),t(7,"svg",31),m(8,"path",32),i()(),b(),t(9,"h2",33),o(10,"Informaci\xF3n del Cliente"),i()()(),t(11,"div",34),S(12,pe,6,0,"div",35),t(13,"div")(14,"label",36),o(15," C\xE9dula / Documento * "),S(16,ge,2,0,"span",37),i(),t(17,"input",38),x("input",function(){g(e);let l=u();return f(l.onDocumentoChange())}),i(),S(18,fe,2,0,"p",39),i(),t(19,"div",40)(20,"div")(21,"label",36),o(22,"Nombres *"),i(),m(23,"input",41),S(24,_e,2,0,"p",39),i(),t(25,"div")(26,"label",36),o(27,"Apellidos *"),i(),m(28,"input",42),S(29,he,2,0,"p",39),i()(),m(30,"input",43),i()(),t(31,"div",27)(32,"div",28)(33,"div",44)(34,"div",29)(35,"div",30),C(),t(36,"svg",31),m(37,"path",45),i()(),b(),t(38,"h2",33),o(39,"Productos/Servicios"),i()(),t(40,"button",46),x("click",function(){g(e);let l=u();return f(l.agregarItem())}),o(41," + Agregar "),i()()(),t(42,"div",34),F(43,ve,29,2,"div",47,D,!1,Ce,3,0,"div",48),i()(),t(46,"div",27)(47,"div",28)(48,"div",29)(49,"div",30),C(),t(50,"svg",31),m(51,"path",49),i()(),b(),t(52,"h2",33),o(53,"Costos y Descuentos"),i()()(),t(54,"div",50)(55,"div")(56,"label",36),o(57,"Costo de Transporte"),i(),t(58,"input",51),x("input",function(){g(e);let l=u();return f(l.calcularTotales())}),i()(),t(59,"div")(60,"label",36),o(61,"Descuento"),i(),t(62,"div",40)(63,"div")(64,"select",52),x("change",function(){g(e);let l=u();return f(l.onTipoDescuentoChange())}),t(65,"option",53),o(66,"Sin descuento"),i(),t(67,"option",54),o(68,"Porcentaje (%)"),i(),t(69,"option",55),o(70,"Monto fijo ($)"),i()()(),t(71,"div"),S(72,be,1,0,"input",56)(73,Se,1,0,"input",57),i()()(),t(74,"div",58)(75,"div",59)(76,"div",60)(77,"span"),o(78,"Subtotal:"),i(),t(79,"span",61),o(80),i()(),t(81,"div",60)(82,"span"),o(83,"Transporte:"),i(),t(84,"span"),o(85),i()(),S(86,Ee,5,1,"div",60),t(87,"div",62)(88,"span"),o(89,"TOTAL:"),i(),t(90,"span",63),o(91),i()()()()()(),t(92,"div",27)(93,"div",28)(94,"div",29)(95,"div",30),C(),t(96,"svg",31),m(97,"path",64),i()(),b(),t(98,"div")(99,"h2",33),o(100,"Informaci\xF3n de Cirug\xEDa"),i(),t(101,"p",65),o(102,"Opcional - Se usar\xE1 cuando se apruebe la cotizaci\xF3n"),i()()()(),t(103,"div",34)(104,"div")(105,"label",36),o(106,"Hospital / Cl\xEDnica"),i(),t(107,"select",66)(108,"option",67),o(109,"Selecciona un hospital..."),i(),F(110,ye,2,2,"option",68,M),i()(),t(112,"div")(113,"label",36),o(114,"Tipo de Cirug\xEDa"),i(),t(115,"select",69)(116,"option",67),o(117,"Selecciona un tipo..."),i(),F(118,we,2,2,"option",68,M),i()(),t(120,"div")(121,"label",36),o(122,"M\xE9dico Cirujano"),i(),m(123,"input",70),i(),t(124,"div")(125,"label",36),o(126,"Fecha Programada"),i(),m(127,"input",71),i()()(),t(128,"div",27)(129,"div",28)(130,"div",29)(131,"div",30),C(),t(132,"svg",31),m(133,"path",72),i()(),b(),t(134,"h2",33),o(135,"Validez"),i()()(),t(136,"div",73)(137,"label",36),o(138,"Fecha de Vencimiento *"),i(),m(139,"input",74),S(140,Te,2,0,"p",39),i()(),t(141,"div",27)(142,"div",28)(143,"div",29)(144,"div",30),C(),t(145,"svg",31),m(146,"path",75),i()(),b(),t(147,"h2",33),o(148,"T\xE9rminos y Condiciones"),i()()(),t(149,"div",73),m(150,"textarea",76),i()(),t(151,"div",27)(152,"div",28)(153,"div",29)(154,"div",30),C(),t(155,"svg",31),m(156,"path",77),i()(),b(),t(157,"h2",33),o(158,"Notas Internas"),i()()(),t(159,"div",73),m(160,"textarea",78),i()(),t(161,"div",79)(162,"button",80),x("click",function(){g(e);let l=u();return f(l.guardarBorrador())}),o(163," Guardar Borrador "),i(),t(164,"button",81),S(165,ze,1,0)(166,Fe,1,0),i()()()()}if(a&2){let e,r,l,d,p,T,s=u();c(),h(s.error()?1:-1),c(),E("formGroup",s.form),c(10),h(s.clienteEncontrado()?12:-1),c(4),h(s.buscandoCliente()?16:-1),c(2),h((e=s.form.get("documento_numero"))!=null&&e.invalid&&((e=s.form.get("documento_numero"))!=null&&e.touched)?18:-1),c(5),E("readonly",s.clienteEncontrado()),c(),h((r=s.form.get("nombre"))!=null&&r.invalid&&((r=s.form.get("nombre"))!=null&&r.touched)?24:-1),c(4),E("readonly",s.clienteEncontrado()),c(),h((l=s.form.get("apellido"))!=null&&l.invalid&&((l=s.form.get("apellido"))!=null&&l.touched)?29:-1),c(14),V(s.items.controls),c(29),h(((d=s.form.get("tipo_descuento"))==null?null:d.value)==="porcentaje"?72:((d=s.form.get("tipo_descuento"))==null?null:d.value)==="fijo"?73:-1),c(8),w(s.formatMoneda(s.subtotal())),c(5),w(s.formatMoneda(((p=s.form.get("costo_transporte"))==null?null:p.value)||0)),c(),h(s.descuentoCalculado()>0?86:-1),c(5),w(s.formatMoneda(s.totalCalculado())),c(19),V(s.hospitales()),c(8),V(s.tiposCirugia()),c(21),E("min",s.minFechaVencimiento()),c(),h((T=s.form.get("fecha_vencimiento"))!=null&&T.invalid&&((T=s.form.get("fecha_vencimiento"))!=null&&T.touched)?140:-1),c(22),E("disabled",s.submitting()),c(2),E("disabled",s.form.invalid||s.submitting()),c(),h(s.submitting()?165:166)}}var ce=class a{fb=y(te);router=y(L);route=y(H);cotizacionService=y(ae);supabase=y($);clientesService=y(re);hospitalesService=y(ne);tiposCirugiaService=y(oe);loading=_(!1);submitting=_(!1);error=_(null);cotizacionId=_(null);isEditing=A(()=>!!this.cotizacionId());clienteEncontrado=_(null);buscandoCliente=_(!1);productos=_([]);hospitales=_([]);tiposCirugia=_([]);subtotalSignal=_(0);descuentoSignal=_(0);totalSignal=_(0);form;constructor(){this.form=this.fb.group({documento_numero:["",v.required],nombre:["",v.required],apellido:["",v.required],cliente_id:["",v.required],hospital_id:[""],tipo_cirugia_id:[""],medico_cirujano:[""],fecha_programada:[""],items:this.fb.array([],v.minLength(1)),costo_transporte:[0],tipo_descuento:["ninguno"],descuento:[0],porcentaje_descuento:[0],fecha_vencimiento:["",v.required],terminos_condiciones:[le],notas:[""]}),this.items.valueChanges.subscribe(()=>{this.calcularTotales()}),this.form.get("costo_transporte")?.valueChanges.subscribe(()=>this.calcularTotales()),this.form.get("descuento")?.valueChanges.subscribe(()=>this.calcularTotales()),this.form.get("porcentaje_descuento")?.valueChanges.subscribe(()=>this.calcularTotales()),this.form.get("tipo_descuento")?.valueChanges.subscribe(()=>this.calcularTotales())}ngOnInit(){this.cargarDatos();let n=this.route.snapshot.paramMap.get("id");if(n)this.cotizacionId.set(n),this.cargarCotizacion(n);else{let e=new Date;e.setDate(e.getDate()+15),this.form.patchValue({fecha_vencimiento:e.toISOString().split("T")[0]})}}cargarDatos(){return z(this,null,function*(){try{let{data:n,error:e}=yield this.supabase.client.from("productos").select("id, nombre, precio").eq("es_activo",!0).order("nombre");if(e)throw e;this.productos.set(n||[]),this.hospitalesService.getHospitales().subscribe({next:r=>{this.hospitales.set(r)},error:r=>console.error("Error cargando hospitales:",r)}),this.tiposCirugiaService.getTiposCirugia().subscribe({next:r=>{this.tiposCirugia.set(r)},error:r=>console.error("Error cargando tipos cirug\xEDa:",r)})}catch(n){console.error("Error cargando datos:",n),this.error.set("Error cargando datos: "+n.message)}})}onDocumentoChange(){let n=this.form.get("documento_numero")?.value;n&&n.length>=6?this.buscarClientePorDocumento(n):(this.clienteEncontrado.set(null),this.limpiarCamposCliente())}buscarClientePorDocumento(n){this.buscandoCliente.set(!0),this.clientesService.buscarPorDocumento(n).subscribe({next:e=>{e?(console.log("\u2705 Cliente encontrado:",e),this.clienteEncontrado.set(e),this.llenarCamposCliente(e)):(console.log("\u2139\uFE0F Cliente no encontrado"),this.clienteEncontrado.set(null)),this.buscandoCliente.set(!1)},error:e=>{console.error("\u274C Error buscando cliente:",e),this.clienteEncontrado.set(null),this.buscandoCliente.set(!1)}})}llenarCamposCliente(n){this.form.patchValue({cliente_id:n.id,nombre:n.nombre,apellido:n.apellido})}limpiarCamposCliente(){this.form.patchValue({cliente_id:"",nombre:"",apellido:""})}cargarDocumentoCliente(n){return z(this,null,function*(){try{let{data:e,error:r}=yield this.supabase.client.from("clientes").select("documento_numero").eq("id",n).single();!r&&e&&this.form.patchValue({documento_numero:e.documento_numero})}catch(e){console.error("Error cargando documento cliente:",e)}})}cargarCotizacion(n){return z(this,null,function*(){this.loading.set(!0),this.cotizacionService.getCotizacionById(n).subscribe({next:e=>{if(!e){this.error.set("Cotizaci\xF3n no encontrada"),this.loading.set(!1);return}if(e.estado!=="borrador"){this.error.set("Solo se pueden editar cotizaciones en borrador"),this.loading.set(!1);return}this.form.patchValue({nombre:e.cliente?.nombre||"",apellido:e.cliente?.apellido||"",cliente_id:e.cliente_id,costo_transporte:e.costo_transporte,descuento:e.descuento,porcentaje_descuento:e.porcentaje_descuento,fecha_vencimiento:e.fecha_vencimiento,terminos_condiciones:e.terminos_condiciones,notas:e.notas_internas}),e.cliente_id&&this.cargarDocumentoCliente(e.cliente_id),e.cliente&&this.clienteEncontrado.set(e.cliente),e.porcentaje_descuento>0?this.form.patchValue({tipo_descuento:"porcentaje"}):e.descuento>0&&this.form.patchValue({tipo_descuento:"fijo"}),e.items&&e.items.forEach(r=>{this.agregarItem(r)}),this.loading.set(!1)},error:e=>{console.error("Error cargando cotizaci\xF3n:",e),this.error.set("Error cargando cotizaci\xF3n"),this.loading.set(!1)}})})}get items(){return this.form.get("items")}getItemGroup(n){return this.items.at(n)}agregarItem(n){let e=this.fb.group({producto_id:[n?.producto_id||"",v.required],descripcion:[n?.descripcion||"",v.required],cantidad:[n?.cantidad||1,[v.required,v.min(1)]],precio_unitario:[n?.precio_unitario||0,[v.required,v.min(0)]],precio_total:[n?.precio_total||0]});this.items.push(e),n&&this.calcularTotalItem(this.items.length-1)}eliminarItem(n){this.items.removeAt(n),this.calcularTotales()}onProductoChange(n,e){let r=n.target.value,l=this.productos().find(d=>d.id===r);l&&(this.getItemGroup(e).patchValue({descripcion:l.nombre,precio_unitario:l.precio}),this.calcularTotalItem(e))}calcularTotalItem(n){let e=this.getItemGroup(n),r=e.get("cantidad")?.value||0,l=e.get("precio_unitario")?.value||0,d=r*l;e.patchValue({precio_total:d},{emitEvent:!1}),this.calcularTotales()}calcularTotales(){let n=0;for(let p=0;p<this.items.length;p++){let T=this.getItemGroup(p),s=T.get("cantidad")?.value||0,se=T.get("precio_unitario")?.value||0;n+=s*se}this.subtotalSignal.set(n);let e=this.form.get("tipo_descuento")?.value,r=0;if(e==="porcentaje"){let p=this.form.get("porcentaje_descuento")?.value||0;r=n*(p/100)}else e==="fijo"&&(r=this.form.get("descuento")?.value||0);this.descuentoSignal.set(r);let l=this.form.get("costo_transporte")?.value||0,d=n+l-r;this.totalSignal.set(d)}subtotal(){return this.subtotalSignal()}descuentoCalculado(){return this.descuentoSignal()}totalCalculado(){return this.totalSignal()}onTipoDescuentoChange(){let n=this.form.get("tipo_descuento")?.value;n==="ninguno"?this.form.patchValue({descuento:0,porcentaje_descuento:0},{emitEvent:!1}):n==="porcentaje"?this.form.patchValue({descuento:0},{emitEvent:!1}):n==="fijo"&&this.form.patchValue({porcentaje_descuento:0},{emitEvent:!1}),this.calcularTotales()}minFechaVencimiento(){return new Date().toISOString().split("T")[0]}formatMoneda(n){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(n)}guardarBorrador(){return z(this,null,function*(){if(this.items.length===0){alert("Debes agregar al menos un item");return}if(!this.form.get("cliente_id")?.value){alert("Debes seleccionar un cliente");return}yield this.guardar("borrador")})}onSubmit(){return z(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched(),alert("Por favor completa todos los campos requeridos");return}if(this.items.length===0){alert("Debes agregar al menos un item");return}yield this.guardar("enviada")})}guardar(n){return z(this,null,function*(){this.submitting.set(!0),this.error.set(null);try{let e=this.form.value,r=e.tipo_descuento,l={cliente_id:e.cliente_id,hospital_id:e.hospital_id||null,tipo_cirugia_id:e.tipo_cirugia_id||null,medico_cirujano:e.medico_cirujano||null,fecha_programada:e.fecha_programada||null,items:e.items.map(p=>({producto_id:p.producto_id||null,descripcion:p.descripcion,cantidad:p.cantidad,precio_unitario:p.precio_unitario})),costo_transporte:e.costo_transporte||0,descuento:r==="fijo"?e.descuento:0,porcentaje_descuento:r==="porcentaje"?e.porcentaje_descuento:0,fecha_vencimiento:e.fecha_vencimiento,terminos_condiciones:e.terminos_condiciones,notas_internas:e.notas},d;this.isEditing()?(d=yield this.cotizacionService.updateCotizacion(this.cotizacionId(),l),n==="enviada"&&(yield this.cotizacionService.cambiarEstado(this.cotizacionId(),{estado:"enviada",comentario:"Cotizaci\xF3n enviada al cliente"}))):(d=yield this.cotizacionService.createCotizacion(l),n==="enviada"&&d.cotizacion&&(yield this.cotizacionService.cambiarEstado(d.cotizacion.id,{estado:"enviada",comentario:"Cotizaci\xF3n enviada al cliente"}))),d.exito?(alert(n==="borrador"?"Cotizaci\xF3n guardada como borrador":"Cotizaci\xF3n enviada al cliente"),this.router.navigate(["/internal/cotizaciones"])):this.error.set(d.mensaje||"Error al guardar")}catch(e){console.error("Error guardando cotizaci\xF3n:",e),this.error.set("Error al guardar la cotizaci\xF3n")}finally{this.submitting.set(!1)}})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=I({type:a,selectors:[["app-cotizacion-form"]],decls:22,vars:6,consts:[[1,"min-h-screen","bg-white","relative"],[1,"fixed","inset-0","z-0"],["src","02.jpg","alt","Background",1,"absolute","inset-0","w-full","h-full","object-cover"],[1,"absolute","inset-0","bg-white/90"],[1,"relative","z-10"],[1,"bg-white","shadow-md"],[1,"max-w-4xl","mx-auto","px-4","py-4"],[1,"flex","justify-between","items-center"],[1,"flex","items-center","space-x-3"],[1,"bg-white","rounded-lg","px-3","py-2"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-6"],[1,"w-10","h-10","bg-[#10284C]","rounded-lg","flex","items-center","justify-center","active:scale-95","transition-transform",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],[1,"max-w-4xl","mx-auto","px-4","py-6","text-center"],[1,"text-2xl","sm:text-3xl","font-bold","text-[#10284C]","mb-2"],[1,"text-[#10284C]/70","text-sm"],[1,"px-4","py-6"],[1,"max-w-4xl","mx-auto","px-4","pb-8"],[1,"max-w-4xl","mx-auto"],[1,"bg-white","rounded-xl","shadow-md","p-6","text-center"],[1,"animate-pulse","space-y-4"],[1,"h-4","bg-gray-200","rounded","w-3/4","mx-auto"],[1,"h-4","bg-gray-200","rounded","w-1/2","mx-auto"],[1,"text-sm","text-gray-500","mt-4"],[1,"mb-4","bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-xl","shadow-md"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"bg-white/50","rounded-2xl","border-2","border-[#0098A8]","overflow-hidden","shadow-sm"],[1,"bg-white/50","px-4","py-3","border-b-2","border-[#0098A8]"],[1,"flex","items-center","space-x-2"],[1,"w-8","h-8","bg-[#C8D900]","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-[#10284C]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-lg","font-bold","text-[#10284C]"],[1,"p-4","space-y-3"],[1,"p-2.5","bg-green-100","border","border-green-200","rounded-lg"],[1,"block","text-sm","font-medium","text-[#10284C]","mb-1"],[1,"text-blue-600","text-xs","ml-1"],["type","text","formControlName","documento_numero","placeholder","Ingresa el n\xFAmero de c\xE9dula",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"input"],[1,"text-red-500","text-xs","mt-1"],[1,"grid","grid-cols-2","gap-3"],["type","text","formControlName","nombre","placeholder","Nombres",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"readonly"],["type","text","formControlName","apellido","placeholder","Apellidos",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"readonly"],["type","hidden","formControlName","cliente_id"],[1,"flex","items-center","justify-between"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],["type","button",1,"bg-[#C8D900]","hover:bg-[#B8C900]","text-[#10284C]","px-4","py-2","rounded-lg","text-sm","font-semibold","transition-colors",3,"click"],[1,"bg-gray-50","rounded-lg","p-3","border","border-gray-200"],[1,"text-center","py-6","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"p-4","space-y-4"],["type","number","formControlName","costo_transporte","min","0","step","0.01",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"input"],["formControlName","tipo_descuento",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"change"],["value","ninguno"],["value","porcentaje"],["value","fijo"],["type","number","formControlName","porcentaje_descuento","min","0","max","100","step","0.01","placeholder","0.00 %",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],["type","number","formControlName","descuento","min","0","step","0.01","placeholder","$0.00",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],[1,"bg-[#10284C]","rounded-lg","p-4","text-white"],[1,"space-y-2"],[1,"flex","justify-between","text-sm"],[1,"font-semibold"],[1,"flex","justify-between","text-xl","font-bold","border-t","border-white/30","pt-3","mt-3"],[1,"text-[#C8D900]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-.121 9.879l-4.5 4.5m0-4.5l4.5 4.5M12 16h.01"],[1,"text-xs","text-[#10284C]/70"],["formControlName","hospital_id",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],["value",""],[3,"value"],["formControlName","tipo_cirugia_id",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],["type","text","formControlName","medico_cirujano","placeholder","Nombre del m\xE9dico",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],["type","date","formControlName","fecha_programada",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"p-4"],["type","date","formControlName","fecha_vencimiento",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"min"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["formControlName","terminos_condiciones","rows","10","placeholder","T\xE9rminos y condiciones...",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]","text-sm","font-mono"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["formControlName","notas","rows","4","placeholder","Notas internas (no visibles para el cliente)...",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],[1,"flex","gap-3","sticky","bottom-4"],["type","button",1,"flex-1","bg-gray-600","hover:bg-gray-700","text-white","font-semibold","py-4","px-6","rounded-xl","shadow-lg","transition-colors","disabled:opacity-50",3,"click","disabled"],["type","submit",1,"flex-1","bg-[#C8D900]","hover:bg-[#B8C900]","text-[#10284C]","font-bold","py-4","px-6","rounded-xl","shadow-lg","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm"],[1,"flex","items-center","text-green-800"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-sm","font-medium"],[1,"grid","grid-cols-1","md:grid-cols-12","gap-3",3,"formGroup"],[1,"md:col-span-4"],[1,"block","text-xs","font-medium","text-[#10284C]","mb-1"],["formControlName","producto_id",1,"w-full","px-3","py-2","text-sm","bg-white","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"change"],[1,"md:col-span-3"],["type","text","formControlName","descripcion",1,"w-full","px-3","py-2","text-sm","bg-white","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],[1,"md:col-span-2"],["type","number","formControlName","cantidad","min","1",1,"w-full","px-3","py-2","text-sm","bg-white","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"input"],["type","number","formControlName","precio_unitario","min","0","step","0.01",1,"w-full","px-3","py-2","text-sm","bg-white","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"input"],[1,"md:col-span-1","flex","items-end"],["type","button",1,"w-full","bg-red-500","hover:bg-red-600","text-white","px-2","py-2","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mx-auto"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"md:col-span-12","text-right"],[1,"text-sm","text-[#10284C]","font-semibold"],["type","number","formControlName","porcentaje_descuento","min","0","max","100","step","0.01","placeholder","0.00 %",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"input"],["type","number","formControlName","descuento","min","0","step","0.01","placeholder","$0.00",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"input"],[1,"text-red-400"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1),m(2,"img",2)(3,"div",3),i(),t(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),m(10,"img",10),i()(),t(11,"div")(12,"button",11),C(),t(13,"svg",12),m(14,"path",13),i()()()()()(),b(),t(15,"div",14)(16,"h1",15),o(17),i(),t(18,"p",16),o(19),i()(),S(20,me,8,0,"div",17)(21,Ve,167,20,"div",18),i()()),e&2&&(c(12),E("routerLink",N(5,de)),c(5),j(" ",r.isEditing()?"Editar Cotizaci\xF3n":"Nueva Cotizaci\xF3n"," "),c(2),j(" ",r.isEditing()?"Actualiza los datos de la cotizaci\xF3n":"Completa la informaci\xF3n para generar la cotizaci\xF3n"," "),c(),h(r.loading()&&r.isEditing()?20:-1),c(),h(!r.loading()||!r.isEditing()?21:-1))},dependencies:[G,ie,R,X,Y,B,J,W,P,U,ee,Z,K,Q,q,O],encapsulation:2})};export{ce as CotizacionFormComponent};
