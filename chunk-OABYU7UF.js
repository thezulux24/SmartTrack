import{a as H}from"./chunk-XSDINV7M.js";import{c as T,g as V,j,p as I}from"./chunk-3OSVPALZ.js";import{$ as p,Ab as v,Bb as u,Ia as r,Na as w,Nb as y,Pb as k,Sa as E,Xa as g,Y as _,Z as b,_ as m,cb as L,ib as x,la as C,lb as M,mb as D,nb as e,ob as t,pb as l,qb as K,tb as f,ub as c,zb as a}from"./chunk-MBDN4FSM.js";import"./chunk-X5YLR3NI.js";import{i as S}from"./chunk-ODN5LVDJ.js";var N=(o,i)=>i.id;function z(o,i){o&1&&(e(0,"div",25),l(1,"div",27),t())}function G(o,i){o&1&&(e(0,"div",28),m(),e(1,"svg",30),l(2,"path",31),t(),p(),e(3,"h3",32),a(4,"No hay kits listos para envio"),t(),e(5,"p",33),a(6,"Todos los kits estan siendo preparados o ya fueron enviados"),t()())}function R(o,i){if(o&1&&(e(0,"div",47),m(),e(1,"svg",54),l(2,"path",31),t(),a(3),y(4,"date"),t()),o&2){let n=c().$implicit;r(3),u(" Preparado el ",k(4,1,n.fecha_preparado,"dd/MM/yyyy HH:mm")," ")}}function F(o,i){if(o&1&&(e(0,"div",48),m(),e(1,"svg",54),l(2,"path",55),t(),a(3),t()),o&2){let n=c().$implicit;r(3),u(" QR: ",n.qr_code," ")}}function B(o,i){if(o&1){let n=K();e(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37)(4,"div")(5,"h3",38),a(6),t(),e(7,"p",39),a(8),t()(),e(9,"span",40),m(),e(10,"svg",41),l(11,"path",42),t(),a(12," Listo para Envio "),t()(),p(),e(13,"div",43)(14,"div")(15,"p",44),a(16,"Paciente"),t(),e(17,"p",45),a(18),t()(),e(19,"div")(20,"p",44),a(21,"Hospital"),t(),e(22,"p",45),a(23),t()(),e(24,"div")(25,"p",44),a(26,"Fecha Programada"),t(),e(27,"p",45),a(28),y(29,"date"),t()(),e(30,"div")(31,"p",44),a(32,"Dias Restantes"),t(),e(33,"p",46),a(34),t()()(),g(35,R,5,4,"div",47)(36,F,4,1,"div",48),t(),e(37,"div",49)(38,"button",50),f("click",function(){let d=_(n).$implicit,h=c(3);return b(h.asignarMensajero(d.id))}),m(),e(39,"svg",19),l(40,"path",51),t(),a(41," Asignar Mensajero "),t(),p(),e(42,"button",52),f("click",function(){let d=_(n).$implicit,h=c(3);return b(h.verDetalle(d.id))}),m(),e(43,"svg",19),l(44,"path",53),t(),a(45," Ver Detalles "),t()()()()}if(o&2){let n=i.$implicit,s=c(3);r(6),u("Kit #",n.numero_kit,""),r(2),u("Cirugia: ",n.cirugia==null?null:n.cirugia.numero_cirugia,""),r(10),v(s.obtenerNombreCliente(n)),r(5),v(s.obtenerNombreHospital(n)),r(5),v(k(29,9,n.cirugia==null?null:n.cirugia.fecha_programada,"dd/MM/yyyy")),r(5),L("ngClass",s.obtenerColorUrgencia(s.calcularDiasRestantes((n.cirugia==null?null:n.cirugia.fecha_programada)||""))),r(),u(" ",s.calcularDiasRestantes((n.cirugia==null?null:n.cirugia.fecha_programada)||"")," dias "),r(),x(n.fecha_preparado?35:-1),r(),x(n.qr_code?36:-1)}}function P(o,i){if(o&1&&(e(0,"div",29),M(1,B,46,12,"div",34,N),t()),o&2){let n=c(2);r(),D(n.kitsListos())}}function $(o,i){if(o&1&&g(0,G,7,0,"div",28)(1,P,3,0,"div",29),o&2){let n=c();x(n.kitsListos().length===0?0:1)}}var A=class o{constructor(i,n){this.kitService=i;this.router=n}kitsListos=C([]);loading=C(!0);ngOnInit(){this.cargarKits()}cargarKits(){return S(this,null,function*(){this.loading.set(!0);try{this.kitService.getKitsPorEstado("listo_envio").subscribe({next:i=>{this.kitsListos.set(i||[]),this.loading.set(!1)},error:i=>{console.error("Error al cargar kits listos:",i),this.loading.set(!1)}})}catch(i){console.error("Error al cargar kits listos:",i),this.loading.set(!1)}})}verDetalle(i){this.router.navigate(["/internal/logistica/kit-preparacion",i],{queryParams:{modo:"ver"}})}asignarMensajero(i){this.router.navigate(["/internal/logistica/asignar-mensajero",i])}volver(){this.router.navigate(["/internal/logistica"])}obtenerNombreCliente(i){return i.cirugia?.cliente?.nombre||"N/A"}obtenerNombreHospital(i){return i.cirugia?.hospital?.nombre||"N/A"}calcularDiasRestantes(i){if(!i)return 0;let n=new Date,d=new Date(i).getTime()-n.getTime();return Math.ceil(d/(1e3*60*60*24))}obtenerColorUrgencia(i){return i<=1?"text-red-400":i<=3?"text-orange-400":"text-white"}static \u0275fac=function(n){return new(n||o)(w(H),w(I))};static \u0275cmp=E({type:o,selectors:[["app-kits-listos-list"]],decls:31,vars:2,consts:[[1,"min-h-screen","relative","overflow-hidden"],[1,"absolute","inset-0","z-0"],[1,"absolute","inset-0","bg-[#10284C]"],["xmlns","http://www.w3.org/2000/svg",1,"absolute","w-full","h-full"],["cx","10%","cy","15%","r","120","fill","#0098A8","opacity","0.1"],["cx","85%","cy","25%","r","180","fill","#C8D900","opacity","0.08"],["cx","50%","cy","80%","r","150","fill","#0098A8","opacity","0.12"],["x","60%","y","5%","width","200","height","200","fill","#0098A8","opacity","0.06","transform","rotate(45 70 15)"],["x","15%","y","65%","width","160","height","160","fill","#C8D900","opacity","0.08","transform","rotate(30 20 70)"],["x1","0%","y1","30%","x2","100%","y2","35%","stroke","#0098A8","stroke-width","2","opacity","0.1"],["x1","0%","y1","60%","x2","100%","y2","55%","stroke","#C8D900","stroke-width","2","opacity","0.08"],["points","90,10 95,25 85,25","fill","#0098A8","opacity","0.1","transform","scale(8)"],["points","5,85 12,95 2,98","fill","#C8D900","opacity","0.09","transform","scale(10)"],[1,"absolute","inset-0","bg-gradient-to-b","from-[#10284C]/50","via-[#10284C]/80","to-[#10284C]/95"],[1,"relative","z-10","px-4","py-6"],[1,"max-w-6xl","mx-auto","space-y-6"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","gap-4"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-10","w-auto","brightness-0","invert"],[1,"px-4","py-2","bg-[#C8D900]","text-[#10284C]","rounded-lg","hover:bg-[#d4e820]","transition-colors","font-medium","flex","items-center","gap-2","active:scale-95",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"hidden","sm:inline"],[1,"text-center"],[1,"text-3xl","sm:text-4xl","font-bold","text-[#C8D900]","mb-2"],[1,"text-white/80","text-sm"],[1,"flex","justify-center","items-center","py-20"],[1,"h-6"],[1,"w-16","h-16","border-4","border-[#C8D900]","border-t-transparent","rounded-full","animate-spin"],[1,"bg-[#0098A8]/20","backdrop-blur-md","rounded-2xl","border","border-white/20","p-12","shadow-xl","text-center"],[1,"space-y-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-24","h-24","mx-auto","text-white/30","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-xl","font-bold","text-white","mb-2"],[1,"text-white/60"],[1,"bg-[#0098A8]/20","backdrop-blur-md","rounded-2xl","border","border-white/20","p-6","shadow-xl","hover:bg-[#0098A8]/30","transition-all"],[1,"flex","flex-col","lg:flex-row","lg:items-center","lg:justify-between","gap-4"],[1,"flex-1","space-y-3"],[1,"flex","items-start","justify-between"],[1,"text-xl","font-bold","text-[#C8D900]","mb-1"],[1,"text-white/60","text-sm"],[1,"px-3","py-1","bg-green-500/20","text-green-300","rounded-full","text-xs","font-semibold","flex","items-center","gap-1"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3","h-3"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3"],[1,"text-white/50","text-xs","mb-1"],[1,"text-white","font-medium"],[1,"font-bold","text-lg",3,"ngClass"],[1,"flex","items-center","gap-2","text-green-400","text-sm"],[1,"flex","items-center","gap-2","text-[#C8D900]","text-sm","font-mono"],[1,"lg:w-48","flex","flex-col","gap-2"],[1,"w-full","px-6","py-3","bg-gradient-to-r","from-[#C8D900]","to-[#a8b500]","text-[#10284C]","rounded-xl","hover:from-[#d4e820]","hover:to-[#b8c600]","transition-all","shadow-lg","font-bold","flex","items-center","justify-center","gap-2","active:scale-95",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"],[1,"w-full","px-6","py-2","bg-white/10","text-white","border","border-white/20","rounded-xl","hover:bg-white/20","transition-all","font-semibold","flex","items-center","justify-center","gap-2","active:scale-95",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"]],template:function(n,s){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2),m(),e(3,"svg",3),l(4,"circle",4)(5,"circle",5)(6,"circle",6)(7,"rect",7)(8,"rect",8)(9,"line",9)(10,"line",10)(11,"polygon",11)(12,"polygon",12),t()(),p(),l(13,"div",13),t(),e(14,"main",14)(15,"div",15)(16,"div",16),l(17,"img",17),e(18,"button",18),f("click",function(){return s.volver()}),m(),e(19,"svg",19),l(20,"path",20),t(),p(),e(21,"span",21),a(22,"Volver"),t()()(),e(23,"div",22)(24,"h1",23),a(25,"Kits Listos para Envio"),t(),e(26,"p",24),a(27,"Kits completamente preparados y listos para despacho"),t()(),g(28,z,2,0,"div",25)(29,$,2,1),l(30,"div",26),t()()()),n&2&&(r(28),x(s.loading()?28:-1),r(),x(s.loading()?-1:29))},dependencies:[j,T,V],encapsulation:2})};export{A as KitsListosListComponent};
