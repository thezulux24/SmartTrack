import{a as T}from"./chunk-IUIUXTL6.js";import"./chunk-KXFMV5OZ.js";import{$ as o,E as h,Fa as _,G as m,J as k,Ja as M,Ma as L,N as f,U as w,X as S,Y as y,Z as e,_ as t,ba as g,ca as E,ea as i,fa as c,i as b,u as x,y as s,z as l}from"./chunk-6SF67QVY.js";import"./chunk-LJ5XHLMQ.js";import"./chunk-FK42CRUA.js";var j=(d,n)=>n.id;function D(d,n){if(d&1&&(e(0,"div",43),s(),e(1,"svg",44),o(2,"path",45),t(),l(),e(3,"div",46)(4,"p",47),i(5),t(),e(6,"p",48),i(7),t()()()),d&2){let r=n.$implicit;m(5),c(r.mensaje),m(2),c(r.detalles)}}function V(d,n){if(d&1&&(e(0,"div",41)(1,"h2",31),i(2,"Alertas y Notificaciones"),t(),e(3,"div",42),S(4,D,8,2,"div",43,j),t()()),d&2){let r=E();m(4),y(r.alertas())}}var C=class d{router=x(M);kitService=x(T);stats=h({pendientes:0,preparando:0,listos:0,enTransito:0});alertas=h([]);loading=h(!0);ngOnInit(){this.cargarEstadisticas()}cargarEstadisticas(){this.loading.set(!0),b({pendientes:this.kitService.getKitsPorEstado("solicitado"),preparando:this.kitService.getKitsPorEstado("preparando"),listos:this.kitService.getKitsPorEstado("listo_envio"),enTransito:this.kitService.getKitsPorEstado("en_transito")}).subscribe({next:n=>{this.stats.set({pendientes:n.pendientes.length,preparando:n.preparando.length,listos:n.listos.length,enTransito:n.enTransito.length});let r=new Date,a=[];n.pendientes.forEach(p=>{if(p.cirugia?.fecha_programada){let u=new Date(p.cirugia.fecha_programada),v=(u.getTime()-r.getTime())/(1e3*60*60);v<=24&&v>0&&a.push({id:p.id,mensaje:`Kit ${p.numero_kit} requiere aprobaci\xF3n urgente`,detalles:`Cirug\xEDa programada para ${u.toLocaleDateString()} a las ${u.toLocaleTimeString()}`})}}),this.alertas.set(a),this.loading.set(!1)},error:n=>{console.error("Error cargando estad\xEDsticas:",n),this.loading.set(!1)}})}navegarA(n){this.router.navigate([n])}static \u0275fac=function(r){return new(r||d)};static \u0275cmp=k({type:d,selectors:[["app-logistica-dashboard"]],decls:80,vars:5,consts:[[1,"bg-gray-50","dark:bg-gray-900","min-h-screen"],[1,"bg-gradient-to-r","from-green-600","to-emerald-700","text-white","shadow-lg"],[1,"px-4","py-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"flex","items-center","space-x-3"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-8","brightness-0","invert"],[1,"text-lg","font-semibold"],[1,"bg-white/20","hover:bg-white/30","text-white","px-3","py-2","rounded-lg","text-sm","font-medium","transition","duration-200","shadow-md","backdrop-blur-sm",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-center"],[1,"text-2xl","font-bold","mb-1"],[1,"text-green-100","text-sm"],[1,"px-4","py-6"],[1,"max-w-7xl","mx-auto"],[1,"grid","grid-cols-2","md:grid-cols-2","lg:grid-cols-4","gap-3","md:gap-6","mb-6"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","dark:border","dark:border-gray-700","p-4","cursor-pointer","hover:shadow-lg","transition-all","duration-200",3,"click"],[1,"w-10","h-10","bg-gradient-to-br","from-yellow-400","to-orange-500","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"min-w-0"],[1,"text-xl","font-bold","text-gray-900","dark:text-white"],[1,"text-xs","text-gray-600","dark:text-gray-300"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","dark:border","dark:border-gray-700","p-4"],[1,"w-10","h-10","bg-gradient-to-br","from-blue-400","to-blue-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"w-10","h-10","bg-gradient-to-br","from-green-400","to-green-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-10","h-10","bg-gradient-to-br","from-purple-400","to-purple-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","dark:border","dark:border-gray-700","p-4","md:p-6","mb-6"],[1,"text-lg","md:text-xl","font-bold","text-gray-900","dark:text-white","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-3","md:gap-4"],[1,"flex","items-center","justify-center","gap-2","md:gap-3","px-4","md:px-6","py-3","md:py-4","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-colors","shadow-md",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","md:w-5","md:h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"],[1,"text-sm","md:text-base","font-semibold"],[1,"flex","items-center","justify-center","gap-2","md:gap-3","px-4","md:px-6","py-3","md:py-4","bg-emerald-600","text-white","rounded-lg","hover:bg-emerald-700","transition-colors","shadow-md",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"flex","items-center","justify-center","gap-2","md:gap-3","px-4","md:px-6","py-3","md:py-4","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","shadow-md"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","dark:border","dark:border-gray-700","p-4","md:p-6"],[1,"space-y-3"],[1,"flex","items-start","gap-3","p-3","md:p-4","bg-yellow-50","dark:bg-yellow-900/20","border-l-4","border-yellow-400","rounded-lg"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-yellow-600","mt-0.5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"flex-1","min-w-0"],[1,"text-sm","md:text-base","font-medium","text-gray-900","dark:text-white"],[1,"text-xs","md:text-sm","text-gray-600","dark:text-gray-400","mt-1"]],template:function(r,a){r&1&&(e(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4),o(5,"img",5),e(6,"span",6),i(7,"Log\xEDstica"),t()(),e(8,"button",7),g("click",function(){return a.navegarA("/internal")}),s(),e(9,"svg",8),o(10,"path",9),t(),i(11," Volver "),t()(),l(),e(12,"div",10)(13,"h1",11),i(14,"Dashboard Log\xEDstica"),t(),e(15,"p",12),i(16,"Gesti\xF3n de kits quir\xFArgicos e inventario"),t()()()(),e(17,"main",13)(18,"div",14)(19,"div",15)(20,"div",16),g("click",function(){return a.navegarA("/internal/logistica/kits-pendientes")}),e(21,"div",4)(22,"div",17),s(),e(23,"svg",18),o(24,"path",19),t()(),l(),e(25,"div",20)(26,"p",21),i(27),t(),e(28,"p",22),i(29,"Kits Pendientes"),t()()()(),e(30,"div",23)(31,"div",4)(32,"div",24),s(),e(33,"svg",18),o(34,"path",25),t()(),l(),e(35,"div",20)(36,"p",21),i(37),t(),e(38,"p",22),i(39,"En Preparaci\xF3n"),t()()()(),e(40,"div",23)(41,"div",4)(42,"div",26),s(),e(43,"svg",18),o(44,"path",27),t()(),l(),e(45,"div",20)(46,"p",21),i(47),t(),e(48,"p",22),i(49,"Listos Env\xEDo"),t()()()(),e(50,"div",23)(51,"div",4)(52,"div",28),s(),e(53,"svg",18),o(54,"path",29),t()(),l(),e(55,"div",20)(56,"p",21),i(57),t(),e(58,"p",22),i(59,"En Tr\xE1nsito"),t()()()()(),e(60,"div",30)(61,"h2",31),i(62,"Acciones R\xE1pidas"),t(),e(63,"div",32)(64,"button",33),g("click",function(){return a.navegarA("/internal/logistica/kits-pendientes")}),s(),e(65,"svg",34),o(66,"path",35),t(),l(),e(67,"span",36),i(68,"Aprobar Kits"),t()(),e(69,"button",37),g("click",function(){return a.navegarA("/internal/inventario")}),s(),e(70,"svg",34),o(71,"path",38),t(),l(),e(72,"span",36),i(73,"Ver Inventario"),t()(),e(74,"button",39),s(),e(75,"svg",34),o(76,"path",40),t(),l(),e(77,"span",36),i(78,"Reportes"),t()()()(),f(79,V,6,0,"div",41),t()()()),r&2&&(m(27),c(a.stats().pendientes),m(10),c(a.stats().preparando),m(10),c(a.stats().listos),m(10),c(a.stats().enTransito),m(22),w(a.alertas().length>0?79:-1))},dependencies:[_,L],encapsulation:2})};export{C as LogisticaDashboardComponent};
