import{a as D}from"./chunk-U6RTHMWP.js";import{l as O,m as $,r as j}from"./chunk-M77MO4EH.js";import"./chunk-FT475XF5.js";import{$ as L,A as p,Aa as V,B as o,Ca as N,E as k,I as x,L as d,N as S,R as t,S as i,T as g,U as y,V as b,W as s,Y as r,Z as m,_ as w,ea as C,fa as I,r as E,ra as T,sa as F,t as v,u as f,v as h,va as M,w as _}from"./chunk-MUJJ6JXK.js";import"./chunk-LJ5XHLMQ.js";import"./chunk-FK42CRUA.js";var G=()=>["/internal"],H=()=>["/internal/clientes/nuevo"],q=a=>["/internal/clientes/editar",a];function A(a,n){a&1&&(t(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18),g(4,"div",19)(5,"div",20)(6,"div",21),i(),t(7,"p",22),r(8,"Cargando clientes..."),i()()()())}function R(a,n){if(a&1){let e=y();t(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",23),h(),t(4,"svg",24),g(5,"path",25),i(),_(),t(6,"p",26),r(7),i()(),t(8,"button",27),b("click",function(){v(e);let c=s();return f(c.loadClientes())}),r(9," Reintentar "),i()()()()}if(a&2){let e=s();o(7),m(e.error())}}function P(a,n){if(a&1&&(t(0,"div")(1,"p",65),r(2,"Email"),i(),t(3,"p",66),r(4),i()()),a&2){let e=s().$implicit;o(4),m(e.email)}}function z(a,n){if(a&1&&(t(0,"div")(1,"p",65),r(2,"Tel\xE9fono"),i(),t(3,"p",66),r(4),i()()),a&2){let e=s().$implicit;o(4),m(e.telefono)}}function J(a,n){if(a&1&&(t(0,"div")(1,"p",65),r(2,"Ciudad"),i(),t(3,"p",66),r(4),i()()),a&2){let e=s().$implicit;o(4),m(e.ciudad)}}function K(a,n){if(a&1&&(t(0,"div")(1,"p",65),r(2,"Fecha de Nacimiento"),i(),t(3,"p",66),r(4),i()()),a&2){let e=s().$implicit,l=s(2);o(4),m(l.formatFecha(e.fecha_nacimiento))}}function Q(a,n){if(a&1&&(t(0,"div",67)(1,"p",65),r(2,"Observaciones"),i(),t(3,"p",68),r(4),i()()),a&2){let e=s().$implicit;o(4),m(e.observaciones)}}function U(a,n){if(a&1){let e=y();t(0,"div",47)(1,"div",48)(2,"div",49)(3,"div",50)(4,"div",51)(5,"h3",52),r(6),i(),t(7,"span",53),r(8),i()(),t(9,"p",54),r(10),i()(),t(11,"div",55)(12,"p",56),r(13),i()()()(),t(14,"div",57)(15,"div",58),x(16,P,5,1,"div",59)(17,z,5,1,"div",59)(18,J,5,1,"div",59)(19,K,5,1,"div",59),i(),x(20,Q,5,1,"div",60),t(21,"div",61)(22,"div",62)(23,"button",63),r(24," Editar "),i(),t(25,"button",64),b("click",function(){let c=v(e).$implicit,u=s(2);return f(u.deleteCliente(c))}),r(26," Eliminar "),i()()()()()}if(a&2){let e=n.$implicit,l=s(2);o(6),L(" ",e.nombre," ",e.apellido," "),o(),S(l.getEstadoBadgeClass(e.estado)),o(),w(" ",l.getEstadoLabel(e.estado)," "),o(2),m(e.documento_numero),o(3),w(" ",l.formatFecha(e.created_at)," "),o(3),d("ngIf",e.email),o(),d("ngIf",e.telefono),o(),d("ngIf",e.ciudad),o(),d("ngIf",e.fecha_nacimiento),o(),d("ngIf",e.observaciones),o(3),d("routerLink",I(13,q,e.id))}}function W(a,n){a&1&&(t(0,"div",16)(1,"div",69)(2,"div",70)(3,"div",71),r(4,"\u{1F465}"),i(),t(5,"h3",72),r(6,"No se encontraron clientes"),i(),t(7,"p",73),r(8,"Intenta ajustar los filtros de b\xFAsqueda"),i(),t(9,"button",74),r(10," Crear Primer Cliente "),i()()()()),a&2&&(o(9),d("routerLink",C(1,H)))}function X(a,n){if(a&1){let e=y();t(0,"main",15)(1,"div",28)(2,"button",29),h(),t(3,"svg",30),g(4,"path",31),i(),_(),t(5,"span",32),r(6,"Nuevo Cliente"),i()()(),t(7,"div",28)(8,"div",33)(9,"h3",34),r(10,"Filtros"),i(),t(11,"div",35)(12,"div")(13,"label",36),r(14,"Buscar"),i(),t(15,"input",37),b("input",function(c){v(e);let u=s();return f(u.onSearchChange(c))}),i()(),t(16,"div")(17,"label",36),r(18,"Estado"),i(),t(19,"select",38),b("change",function(c){v(e);let u=s();return f(u.onEstadoChange(c))}),t(20,"option",39),r(21,"Todos los estados"),i(),t(22,"option",40),r(23,"Activo"),i(),t(24,"option",41),r(25,"Inactivo"),i(),t(26,"option",42),r(27,"Suspendido"),i()()()()()(),t(28,"div",43),x(29,U,27,15,"div",44),i(),x(30,W,11,2,"div",45),g(31,"div",46),i()}if(a&2){let e=s();o(2),d("routerLink",C(5,H)),o(13),d("value",e.searchTerm()),o(4),d("value",e.selectedEstado()),o(10),d("ngForOf",e.filteredClientes()),o(),d("ngIf",e.filteredClientes().length===0)}}var B=class a{clientesService=E(D);clientes=p([]);filteredClientes=p([]);loading=p(!1);error=p(null);searchTerm=p("");selectedEstado=p("");ngOnInit(){this.loadClientes()}loadClientes(){this.loading.set(!0),this.error.set(null),this.clientesService.getClientes().subscribe({next:n=>{this.clientes.set(n),this.applyFilters(),this.loading.set(!1)},error:n=>{this.error.set("Error al cargar los clientes"),this.loading.set(!1),console.error("Error:",n)}})}onSearchChange(n){let e=n.target;this.searchTerm.set(e.value),this.applyFilters()}onEstadoChange(n){let e=n.target;this.selectedEstado.set(e.value),this.applyFilters()}applyFilters(){let n=this.clientes();if(this.searchTerm()){let e=this.searchTerm().toLowerCase();n=n.filter(l=>l.nombre.toLowerCase().includes(e)||l.apellido.toLowerCase().includes(e)||l.documento_numero.toLowerCase().includes(e)||l.email&&l.email.toLowerCase().includes(e))}this.selectedEstado()&&(n=n.filter(e=>e.estado===this.selectedEstado())),this.filteredClientes.set(n)}deleteCliente(n){n.id&&confirm(`\xBFEst\xE1s seguro de eliminar al cliente ${n.nombre} ${n.apellido}?`)&&this.clientesService.deleteCliente(n.id).subscribe({next:()=>{this.loadClientes()},error:e=>{this.error.set("Error al eliminar el cliente"),console.error("Error:",e)}})}getEstadoBadgeClass(n){switch(n){case"activo":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"inactivo":return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300";case"suspendido":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}}getEstadoLabel(n){switch(n){case"activo":return"Activo";case"inactivo":return"Inactivo";case"suspendido":return"Suspendido";default:return n}}formatFecha(n){return n?new Date(n).toLocaleDateString("es-EC"):"-"}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=k({type:a,selectors:[["app-clientes-list"]],decls:21,vars:5,consts:[[1,"bg-gray-50","dark:bg-gray-900","min-h-screen"],[1,"bg-gradient-to-r","from-green-600","to-emerald-700","text-white","shadow-lg"],[1,"px-4","py-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"flex","items-center","space-x-3"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-8","brightness-0","invert"],[1,"text-lg","font-semibold"],[1,"flex","items-center","space-x-2"],[1,"bg-white/20","hover:bg-white/30","text-white","px-3","py-2","rounded-lg","text-sm","font-medium","transition","duration-200","shadow-md","backdrop-blur-sm",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-center"],[1,"text-2xl","font-bold","mb-1"],[1,"text-green-100","text-sm"],["class","px-4 py-6",4,"ngIf"],[1,"px-4","py-6"],[1,"max-w-lg","mx-auto"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","p-6","text-center"],[1,"animate-pulse","space-y-4"],[1,"h-4","bg-gray-200","rounded","w-3/4","mx-auto"],[1,"h-4","bg-gray-200","rounded","w-1/2","mx-auto"],[1,"h-4","bg-gray-200","rounded","w-2/3","mx-auto"],[1,"text-sm","text-gray-500","mt-4"],[1,"text-red-600","dark:text-red-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm"],["type","button",1,"mt-4","w-full","text-white","bg-red-600","hover:bg-red-700","focus:ring-4","focus:outline-none","focus:ring-red-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center",3,"click"],[1,"max-w-lg","mx-auto","mb-6"],[1,"w-full","bg-gradient-to-r","from-lime-400","to-green-500","hover:from-lime-500","hover:to-green-600","text-white","px-6","py-4","rounded-xl","font-medium","shadow-lg","transition-all","duration-200","flex","items-center","justify-center","space-x-3",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"text-lg"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","p-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","text","placeholder","Nombre, documento, email...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white",3,"input","value"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white",3,"change","value"],["value",""],["value","activo"],["value","inactivo"],["value","suspendido"],[1,"max-w-lg","mx-auto","space-y-4"],["class",`bg-white rounded-xl shadow-md dark:bg-gray-800 dark:border dark:border-gray-700 
                  hover:shadow-lg transition-all duration-200 border border-gray-100`,4,"ngFor","ngForOf"],["class","max-w-lg mx-auto",4,"ngIf"],[1,"h-6"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","dark:border","dark:border-gray-700","hover:shadow-lg","transition-all","duration-200","border","border-gray-100"],[1,"p-4","border-b","border-gray-200","dark:border-gray-700"],[1,"flex","justify-between","items-start","gap-3"],[1,"flex-1"],[1,"flex","items-center","space-x-2","mb-2"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"px-2","py-1","rounded-full","text-xs","font-medium"],[1,"text-gray-600","dark:text-gray-300","font-medium"],[1,"text-right"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"p-4","space-y-3"],[1,"space-y-2"],[4,"ngIf"],["class","border-t border-gray-200 dark:border-gray-700 pt-3",4,"ngIf"],[1,"space-y-2","pt-2","border-t","border-gray-200","dark:border-gray-700"],[1,"grid","grid-cols-2","gap-2"],[1,"bg-yellow-600","hover:bg-yellow-700","text-white","px-4","py-2","rounded-lg","text-sm","font-medium","transition","duration-200",3,"routerLink"],[1,"bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded-lg","text-sm","font-medium","transition","duration-200",3,"click"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"text-gray-900","dark:text-white","font-medium","text-sm"],[1,"border-t","border-gray-200","dark:border-gray-700","pt-3"],[1,"text-gray-700","dark:text-gray-300","text-sm"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","p-8","text-center"],[1,"text-gray-400","dark:text-gray-500"],[1,"text-4xl","mb-4"],[1,"text-lg","font-medium","text-gray-900","dark:text-white","mb-2"],[1,"text-gray-500","dark:text-gray-400","mb-4"],[1,"bg-gradient-to-r","from-lime-400","to-green-500","hover:from-lime-500","hover:to-green-600","text-white","px-6","py-2.5","rounded-lg","font-medium","shadow-lg","transition-all","duration-200",3,"routerLink"]],template:function(e,l){e&1&&(t(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4),g(5,"img",5),t(6,"span",6),r(7,"Gesti\xF3n de Clientes"),i()(),t(8,"div",7)(9,"button",8),h(),t(10,"svg",9),g(11,"path",10),i(),r(12," Volver "),i()()(),_(),t(13,"div",11)(14,"h1",12),r(15,"Clientes"),i(),t(16,"p",13),r(17,"Gestiona la informaci\xF3n de tus clientes"),i()()()(),x(18,A,9,0,"div",14)(19,R,10,1,"div",14)(20,X,32,6,"main",14),i()),e&2&&(o(9),d("routerLink",C(4,G)),o(9),d("ngIf",l.loading()),o(),d("ngIf",!l.loading()&&l.error()),o(),d("ngIf",!l.loading()&&!l.error()))},dependencies:[M,T,F,N,V,j,O,$],encapsulation:2})};export{B as ClientesListComponent};
