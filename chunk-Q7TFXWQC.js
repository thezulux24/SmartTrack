import{a as M}from"./chunk-XSDINV7M.js";import{j as C,p as L,t as T}from"./chunk-3OSVPALZ.js";import{$ as d,Ab as g,Ia as c,S as v,Sa as f,Xa as k,_ as s,ib as S,la as u,lb as _,mb as w,nb as e,ob as t,pb as r,t as x,tb as p,ub as E,zb as i}from"./chunk-MBDN4FSM.js";import"./chunk-X5YLR3NI.js";import"./chunk-ODN5LVDJ.js";var D=(m,n)=>n.id;function j(m,n){if(m&1&&(e(0,"div",41)(1,"div",42),s(),e(2,"svg",43),r(3,"path",44),t(),d(),e(4,"div",45)(5,"p",46),i(6),t(),e(7,"p",22),i(8),t()()()()),m&2){let l=n.$implicit;c(6),g(l.mensaje),c(2),g(l.detalles)}}function A(m,n){if(m&1&&(e(0,"div",30)(1,"h2",31),i(2,"Alertas y Notificaciones"),t(),e(3,"div",40),_(4,j,9,2,"div",41,D),t()()),m&2){let l=E();c(4),w(l.alertas())}}var y=class m{router=v(L);kitService=v(M);stats=u({pendientes:0,preparando:0,listos:0,enTransito:0});alertas=u([]);loading=u(!0);ngOnInit(){this.cargarEstadisticas()}cargarEstadisticas(){this.loading.set(!0),x({pendientes:this.kitService.getKitsPorEstado("solicitado"),preparando:this.kitService.getKitsPorEstado("preparando"),listos:this.kitService.getKitsPorEstado("listo_envio"),enTransito:this.kitService.getKitsPorEstado("en_transito")}).subscribe({next:n=>{this.stats.set({pendientes:n.pendientes.length,preparando:n.preparando.length,listos:n.listos.length,enTransito:n.enTransito.length});let l=new Date,a=[];n.pendientes.forEach(o=>{if(o.cirugia?.fecha_programada){let h=new Date(o.cirugia.fecha_programada),b=(h.getTime()-l.getTime())/(1e3*60*60);b<=24&&b>0&&a.push({id:o.id,mensaje:`Kit ${o.numero_kit} requiere aprobaci\xF3n urgente`,detalles:`Cirug\xEDa programada para ${h.toLocaleDateString()} a las ${h.toLocaleTimeString()}`})}}),this.alertas.set(a),this.loading.set(!1)},error:n=>{console.error("Error cargando estad\xEDsticas:",n),this.loading.set(!1)}})}navegarA(n){this.router.navigate([n])}static \u0275fac=function(l){return new(l||m)};static \u0275cmp=f({type:m,selectors:[["app-logistica-dashboard"]],decls:80,vars:5,consts:[[1,"min-h-screen","relative","overflow-hidden"],[1,"absolute","inset-0","z-0"],["src","03.jpg","alt","Background",1,"absolute","inset-0","w-full","h-full","object-cover"],[1,"absolute","inset-0","bg-[#10284C]/80"],[1,"relative","z-10","px-4","py-6"],[1,"max-w-7xl","mx-auto","space-y-6"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","gap-4"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-10","w-auto","brightness-0","invert"],[1,"px-4","py-2","bg-[#C8D900]","text-[#10284C]","rounded-lg","hover:bg-[#d4e820]","transition-colors","font-medium","flex","items-center","gap-2","active:scale-95",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"hidden","sm:inline"],[1,"text-center"],[1,"text-3xl","sm:text-4xl","font-bold","text-[#C8D900]","mb-2"],[1,"text-white/80","text-sm"],[1,"grid","grid-cols-2","lg:grid-cols-4","gap-3","md:gap-4"],[1,"bg-[#0098A8]/20","backdrop-blur-md","rounded-2xl","border","border-white/20","p-4","shadow-xl","hover:bg-[#0098A8]/30","transition-all","active:scale-95",3,"click"],[1,"flex","flex-col","items-center","space-y-3"],[1,"w-12","h-12","bg-gradient-to-br","from-yellow-400","to-orange-500","rounded-xl","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-2xl","font-bold","text-white"],[1,"text-xs","text-white/70","mt-1"],[1,"bg-[#0098A8]/20","backdrop-blur-md","rounded-2xl","border","border-white/20","p-4","shadow-xl","hover:bg-[#0098A8]/30","transition-all","cursor-pointer","active:scale-95",3,"click"],[1,"w-12","h-12","bg-gradient-to-br","from-blue-400","to-blue-600","rounded-xl","flex","items-center","justify-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"w-12","h-12","bg-gradient-to-br","from-green-400","to-green-600","rounded-xl","flex","items-center","justify-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"w-12","h-12","bg-gradient-to-br","from-purple-400","to-purple-600","rounded-xl","flex","items-center","justify-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"],[1,"bg-[#0098A8]/20","backdrop-blur-md","rounded-2xl","border","border-white/20","p-6","shadow-xl"],[1,"text-xl","font-bold","text-white","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"flex","items-center","justify-center","gap-3","px-6","py-4","bg-[#C8D900]","text-[#10284C]","rounded-xl","hover:bg-[#d4e820]","transition-all","shadow-lg","font-semibold","active:scale-95",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"],[1,"flex","items-center","justify-center","gap-3","px-6","py-4","bg-[#0098A8]","text-white","rounded-xl","hover:bg-[#0098A8]/80","transition-all","shadow-lg","font-semibold","active:scale-95",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"flex","items-center","justify-center","gap-3","px-6","py-4","bg-[#6EE7B7]","text-[#064E3B]","rounded-xl","hover:bg-[#55d19a]","transition-all","shadow-lg","font-semibold","active:scale-95",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 10h4l3 8 4-16 3 8h4"],[1,"h-6"],[1,"space-y-3"],[1,"bg-yellow-500/20","border-l-4","border-yellow-400","rounded-xl","p-4","backdrop-blur-sm"],[1,"flex","items-start","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-yellow-300","mt-0.5","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","text-white"]],template:function(l,a){l&1&&(e(0,"div",0)(1,"div",1),r(2,"img",2)(3,"div",3),t(),e(4,"main",4)(5,"div",5)(6,"div",6),r(7,"img",7),e(8,"button",8),p("click",function(){return a.navegarA("/internal")}),s(),e(9,"svg",9),r(10,"path",10),t(),d(),e(11,"span",11),i(12,"Volver"),t()()(),e(13,"div",12)(14,"h1",13),i(15,"Dashboard Log\xEDstica"),t(),e(16,"p",14),i(17,"Gesti\xF3n de kits quir\xFArgicos e inventario"),t()(),e(18,"div",15)(19,"button",16),p("click",function(){return a.navegarA("/internal/logistica/kits-pendientes")}),e(20,"div",17)(21,"div",18),s(),e(22,"svg",19),r(23,"path",20),t()(),d(),e(24,"div",12)(25,"p",21),i(26),t(),e(27,"p",22),i(28,"Kits Pendientes"),t()()()(),e(29,"button",23),p("click",function(){return a.navegarA("/internal/logistica/kits-preparacion")}),e(30,"div",17)(31,"div",24),s(),e(32,"svg",19),r(33,"path",25),t()(),d(),e(34,"div",12)(35,"p",21),i(36),t(),e(37,"p",22),i(38,"En Preparaci\xF3n"),t()()()(),e(39,"button",23),p("click",function(){return a.navegarA("/internal/logistica/kits-listos")}),e(40,"div",17)(41,"div",26),s(),e(42,"svg",19),r(43,"path",27),t()(),d(),e(44,"div",12)(45,"p",21),i(46),t(),e(47,"p",22),i(48,"Listos Env\xEDo"),t()()()(),e(49,"button",23),p("click",function(){return a.navegarA("/internal/logistica/envios-transito")}),e(50,"div",17)(51,"div",28),s(),e(52,"svg",19),r(53,"path",29),t()(),d(),e(54,"div",12)(55,"p",21),i(56),t(),e(57,"p",22),i(58,"En Tr\xE1nsito"),t()()()()(),e(59,"div",30)(60,"h2",31),i(61,"Acciones R\xE1pidas"),t(),e(62,"div",32)(63,"button",33),p("click",function(){return a.navegarA("/internal/logistica/kits-pendientes")}),s(),e(64,"svg",9),r(65,"path",34),t(),d(),e(66,"span"),i(67,"Aprobar Kits"),t()(),e(68,"button",35),p("click",function(){return a.navegarA("/internal/inventario")}),s(),e(69,"svg",9),r(70,"path",36),t(),d(),e(71,"span"),i(72,"Ver Inventario"),t()(),e(73,"button",37),p("click",function(){return a.navegarA("/internal/logistica/recepcion-limpieza")}),s(),e(74,"svg",9),r(75,"path",38),t(),d(),e(76,"span"),i(77,"Recepci\xF3n Limpieza"),t()()()(),k(78,A,6,0,"div",30),r(79,"div",39),t()()()),l&2&&(c(26),g(a.stats().pendientes),c(10),g(a.stats().preparando),c(10),g(a.stats().listos),c(10),g(a.stats().enTransito),c(22),S(a.alertas().length>0?78:-1))},dependencies:[C,T],encapsulation:2})};export{y as LogisticaDashboardComponent};
