import{a as U}from"./chunk-QKPBOYQJ.js";import{a as Q}from"./chunk-MYVIK3N6.js";import{a as O,b as d,c as G,d as j,h as B,k as H,n as q,o as R,p as P,q as $,w as J,y as K}from"./chunk-V2VKRV3B.js";import{j as N,n as D,p as L,q as V,t as z}from"./chunk-3OSVPALZ.js";import{$ as x,Ab as m,Bb as F,Ia as r,Ib as k,S as b,Sa as A,Xa as p,Y as I,Z as T,_ as v,cb as g,fb as C,ib as c,la as u,lb as y,mb as S,nb as i,ob as t,pb as l,qb as M,tb as w,ub as f,zb as a}from"./chunk-MBDN4FSM.js";import"./chunk-X5YLR3NI.js";import{a as _,b as E}from"./chunk-ODN5LVDJ.js";var Y=()=>["/internal/clientes"],W=(n,o)=>o.value;function Z(n,o){n&1&&(i(0,"div",17)(1,"div",20)(2,"div",21)(3,"div",22),l(4,"div",23)(5,"div",24),t(),i(6,"p",25),a(7,"Cargando datos del cliente..."),t()()()())}function ee(n,o){if(n&1&&(i(0,"div",26)(1,"div",8),v(),i(2,"svg",60),l(3,"path",61),t(),x(),i(4,"p",62),a(5),t()()()),n&2){let e=f(2);r(5),m(e.error())}}function te(n,o){if(n&1&&(i(0,"p",39),a(1),t()),n&2){let e=f(2);r(),m(e.getFieldError("nombre"))}}function ie(n,o){if(n&1&&(i(0,"p",39),a(1),t()),n&2){let e=f(2);r(),m(e.getFieldError("apellido"))}}function ne(n,o){if(n&1&&(i(0,"option",43),a(1),t()),n&2){let e=o.$implicit;g("value",e.value),r(),m(e.label)}}function oe(n,o){if(n&1&&(i(0,"p",39),a(1),t()),n&2){let e=f(2);r(),m(e.getFieldError("documento_numero"))}}function re(n,o){if(n&1&&(i(0,"p",39),a(1),t()),n&2){let e=f(2);r(),m(e.getFieldError("email"))}}function ae(n,o){if(n&1&&(i(0,"option",43),a(1),t()),n&2){let e=o.$implicit;g("value",e.value),r(),m(e.label)}}function le(n,o){n&1&&(v(),i(0,"svg",58),l(1,"circle",63)(2,"path",64),t())}function de(n,o){if(n&1){let e=M();i(0,"div",18),p(1,ee,6,1,"div",26),i(2,"form",27),w("ngSubmit",function(){I(e);let h=f();return T(h.onSubmit())}),i(3,"div",28)(4,"div",29)(5,"div",30)(6,"div",31),v(),i(7,"svg",32),l(8,"path",33),t()(),x(),i(9,"h2",34),a(10,"Informaci\xF3n B\xE1sica"),t()()(),i(11,"div",35)(12,"div",36)(13,"div")(14,"label",37),a(15," Nombre * "),t(),l(16,"input",38),p(17,te,2,1,"p",39),t(),i(18,"div")(19,"label",37),a(20," Apellido * "),t(),l(21,"input",40),p(22,ie,2,1,"p",39),t()(),i(23,"div",41)(24,"div")(25,"label",37),a(26," Tipo Doc * "),t(),i(27,"select",42),y(28,ne,2,2,"option",43,W),t()(),i(30,"div",44)(31,"label",37),a(32," N\xFAmero de Documento * "),t(),l(33,"input",45),p(34,oe,2,1,"p",39),t()(),i(35,"div")(36,"label",37),a(37," Fecha de Nacimiento "),t(),l(38,"input",46),t()()(),i(39,"div",28)(40,"div",29)(41,"div",30)(42,"div",31),v(),i(43,"svg",32),l(44,"path",47),t()(),x(),i(45,"h2",34),a(46,"Informaci\xF3n de Contacto"),t()()(),i(47,"div",35)(48,"div")(49,"label",37),a(50," Email "),t(),l(51,"input",48),p(52,re,2,1,"p",39),t(),i(53,"div")(54,"label",37),a(55," Tel\xE9fono "),t(),l(56,"input",49),t(),i(57,"div")(58,"label",37),a(59," Direcci\xF3n "),t(),i(60,"textarea",50),a(61,"                "),t()(),i(62,"div",36)(63,"div")(64,"label",37),a(65," Ciudad "),t(),l(66,"input",51),t(),i(67,"div")(68,"label",37),a(69," Pa\xEDs "),t(),l(70,"input",52),t()()()(),i(71,"div",28)(72,"div",29)(73,"div",30)(74,"div",31),v(),i(75,"svg",32),l(76,"path",53),t()(),x(),i(77,"h2",34),a(78,"Informaci\xF3n Adicional"),t()()(),i(79,"div",35)(80,"div")(81,"label",37),a(82," Estado * "),t(),i(83,"select",54),y(84,ae,2,2,"option",43,W),t()(),i(86,"div")(87,"label",37),a(88," Observaciones "),t(),i(89,"textarea",55),a(90,"                "),t()()()(),i(91,"div",56)(92,"button",57),p(93,le,3,0,":svg:svg",58),i(94,"span"),a(95),t()(),i(96,"button",59),a(97," Cancelar "),t()()()()}if(n&2){let e=f();r(),c(e.error()?1:-1),r(),g("formGroup",e.form),r(14),C("w-full px-3 py-2 bg-gray-100 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0098A8] focus:border-transparent "+(e.isFieldInvalid("nombre")?"border-red-300":"border-gray-300")),r(),c(e.isFieldInvalid("nombre")?17:-1),r(4),C("w-full px-3 py-2 bg-gray-100 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0098A8] focus:border-transparent "+(e.isFieldInvalid("apellido")?"border-red-300":"border-gray-300")),r(),c(e.isFieldInvalid("apellido")?22:-1),r(6),S(e.documentoTipos),r(5),C("w-full px-3 py-2 bg-gray-100 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0098A8] focus:border-transparent "+(e.isFieldInvalid("documento_numero")?"border-red-300":"border-gray-300")),r(),c(e.isFieldInvalid("documento_numero")?34:-1),r(17),C("w-full px-3 py-2 bg-gray-100 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0098A8] focus:border-transparent "+(e.isFieldInvalid("email")?"border-red-300":"border-gray-300")),r(),c(e.isFieldInvalid("email")?52:-1),r(32),S(e.estados),r(8),g("disabled",e.loading()),r(),c(e.loading()?93:-1),r(2),m(e.isEditing()?"Actualizar Cliente":"Crear Cliente"),r(),g("routerLink",k(18,Y))}}var X=class n{fb=b(J);router=b(L);route=b(D);clientesService=b(Q);form;isEditing=u(!1);clienteId=u(null);loading=u(!1);error=u(null);showSuccessDialog=u(!1);successDialogTitle=u("");isCreateAction=u(!1);documentoTipos=[{value:"cedula",label:"C\xE9dula"},{value:"pasaporte",label:"Pasaporte"}];estados=[{value:"activo",label:"Activo"},{value:"inactivo",label:"Inactivo"},{value:"suspendido",label:"Suspendido"}];ngOnInit(){this.initForm(),this.checkEditMode()}initForm(){this.form=this.fb.group({nombre:["",[d.required,d.maxLength(100)]],apellido:["",[d.required,d.maxLength(100)]],documento_tipo:["cedula",d.required],documento_numero:["",[d.required,d.maxLength(50)]],fecha_nacimiento:[""],telefono:["",d.maxLength(20)],email:["",[d.email,d.maxLength(255)]],direccion:[""],ciudad:["",d.maxLength(100)],pais:["Colombia",d.maxLength(100)],observaciones:[""],estado:["activo",d.required]})}checkEditMode(){let o=this.route.snapshot.paramMap.get("id");o&&(this.isEditing.set(!0),this.clienteId.set(o),this.loadCliente(o))}loadCliente(o){this.loading.set(!0),this.clientesService.getClienteById(o).subscribe({next:e=>{this.form.patchValue(E(_({},e),{fecha_nacimiento:e.fecha_nacimiento||""})),this.loading.set(!1)},error:e=>{this.error.set("Error al cargar el cliente"),this.loading.set(!1),console.error("Error:",e)}})}onSubmit(){if(this.form.invalid){this.markFormGroupTouched();return}this.loading.set(!0),this.error.set(null);let o=this.form.value,e=E(_({},o),{fecha_nacimiento:o.fecha_nacimiento||null});(this.isEditing()&&this.clienteId()?this.clientesService.updateCliente(this.clienteId(),e):this.clientesService.createCliente(e)).subscribe({next:()=>{this.loading.set(!1),this.isEditing()?(this.successDialogTitle.set(`Los datos del cliente se
actualizaron exitosamente`),this.isCreateAction.set(!1)):(this.successDialogTitle.set(`Nuevo cliente creado
exitosamente`),this.isCreateAction.set(!0)),this.showSuccessDialog.set(!0)},error:h=>{this.error.set(this.isEditing()?"Error al actualizar el cliente":"Error al crear el cliente"),this.loading.set(!1),console.error("Error:",h)}})}onSuccessDialogClose(){this.showSuccessDialog.set(!1),this.router.navigate(["/internal/clientes"])}onCrearOtroCliente(){this.showSuccessDialog.set(!1),this.form.reset({documento_tipo:"cedula",pais:"Colombia",estado:"activo"}),this.error.set(null)}markFormGroupTouched(){Object.keys(this.form.controls).forEach(o=>{this.form.get(o)?.markAsTouched()})}isFieldInvalid(o){let e=this.form.get(o);return!!(e&&e.invalid&&e.touched)}getFieldError(o){let e=this.form.get(o);if(e&&e.errors&&e.touched){if(e.errors.required)return"Este campo es requerido";if(e.errors.email)return"Email inv\xE1lido";if(e.errors.maxlength)return`M\xE1ximo ${e.errors.maxlength.requiredLength} caracteres`}return""}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["app-cliente-form"]],decls:23,vars:9,consts:[[1,"min-h-screen","bg-white","relative"],[1,"fixed","inset-0","z-0"],["src","02.jpg","alt","Background",1,"absolute","inset-0","w-full","h-full","object-cover"],[1,"absolute","inset-0","bg-white/90"],[1,"relative","z-10"],[1,"bg-white","shadow-md"],[1,"max-w-lg","mx-auto","px-4","py-4"],[1,"flex","justify-between","items-center"],[1,"flex","items-center","space-x-3"],[1,"bg-white","rounded-lg","px-3","py-2"],["src","/logo.webp","alt","Implameq",1,"h-6"],[1,"w-10","h-10","bg-[#10284C]","rounded-lg","flex","items-center","justify-center","active:scale-95","transition-transform",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],[1,"max-w-lg","mx-auto","px-4","py-6","text-center"],[1,"text-2xl","sm:text-3xl","font-bold","text-[#10284C]","mb-2"],[1,"text-[#10284C]/70","text-sm"],[1,"px-4","py-6"],[1,"max-w-lg","mx-auto","px-4","pb-8"],[3,"close","crearOtro","isOpen","title","showCrearOtroButton"],[1,"max-w-lg","mx-auto"],[1,"bg-white","rounded-xl","shadow-md","p-6","text-center"],[1,"animate-pulse","space-y-4"],[1,"h-4","bg-gray-200","rounded","w-3/4","mx-auto"],[1,"h-4","bg-gray-200","rounded","w-1/2","mx-auto"],[1,"text-sm","text-gray-500","mt-4"],[1,"mb-4","bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-xl","shadow-md"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"bg-white/50","rounded-2xl","border-2","border-[#0098A8]","overflow-hidden","shadow-sm"],[1,"bg-white/50","px-4","py-3","border-b-2","border-[#0098A8]"],[1,"flex","items-center","space-x-2"],[1,"w-8","h-8","bg-[#C8D900]","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-[#10284C]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-lg","font-bold","text-[#10284C]"],[1,"p-4","space-y-3"],[1,"grid","grid-cols-2","gap-3"],[1,"block","text-sm","font-medium","text-[#10284C]","mb-1"],["type","text","formControlName","nombre","placeholder","Juan Carlos"],[1,"mt-1","text-xs","text-red-600"],["type","text","formControlName","apellido","placeholder","P\xE9rez Garc\xEDa"],[1,"grid","grid-cols-3","gap-3"],["formControlName","documento_tipo",1,"w-full","px-3","py-2","bg-gray-100","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]","focus:border-transparent"],[3,"value"],[1,"col-span-2"],["type","text","formControlName","documento_numero","placeholder","12345678"],["type","date","formControlName","fecha_nacimiento",1,"w-full","px-3","py-2","bg-gray-100","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]","focus:border-transparent"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["type","email","formControlName","email","placeholder","correo@ejemplo.com"],["type","tel","formControlName","telefono","placeholder","3001234567",1,"w-full","px-3","py-2","bg-gray-100","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]","focus:border-transparent"],["formControlName","direccion","rows","2","placeholder","Calle, n\xFAmero, apartamento...",1,"w-full","px-3","py-2","bg-gray-100","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]","focus:border-transparent","resize-none"],["type","text","formControlName","ciudad","placeholder","Bogot\xE1",1,"w-full","px-3","py-2","bg-gray-100","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]","focus:border-transparent"],["type","text","formControlName","pais","placeholder","Colombia",1,"w-full","px-3","py-2","bg-gray-100","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]","focus:border-transparent"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["formControlName","estado",1,"w-full","px-3","py-2","bg-gray-100","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]","focus:border-transparent"],["formControlName","observaciones","rows","3","placeholder","Notas adicionales sobre el cliente...",1,"w-full","px-3","py-2","bg-gray-100","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]","focus:border-transparent","resize-none"],[1,"space-y-3","pt-2"],["type","submit",1,"w-full","bg-[#C8D900]","hover:bg-[#B8C900]","disabled:bg-gray-400","text-[#10284C]","font-bold","py-3","rounded-2xl","shadow-lg","transition-colors","flex","items-center","justify-center","space-x-2",3,"disabled"],["fill","none","viewBox","0 0 24 24",1,"w-5","h-5","animate-spin"],["type","button",1,"w-full","bg-[#10284C]","hover:bg-[#10284C]/90","text-white","font-medium","py-3","rounded-2xl","transition-colors",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"div",1),l(2,"img",2)(3,"div",3),t(),i(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),l(10,"img",10),t()(),i(11,"div")(12,"button",11),v(),i(13,"svg",12),l(14,"path",13),t()()()()()(),x(),i(15,"div",14)(16,"h1",15),a(17),t(),i(18,"p",16),a(19),t()(),p(20,Z,8,0,"div",17)(21,de,98,19,"div",18),t()(),i(22,"app-cliente-success-dialog",19),w("close",function(){return s.onSuccessDialogClose()})("crearOtro",function(){return s.onCrearOtroCliente()}),t()),e&2&&(r(12),g("routerLink",k(8,Y)),r(5),F(" ",s.isEditing()?"Editar Cliente":"Nuevo Cliente"," "),r(2),F(" ",s.isEditing()?"Actualiza la informaci\xF3n del cliente":"Completa los datos del nuevo cliente"," "),r(),c(s.loading()&&s.isEditing()?20:-1),r(),c(!s.loading()||!s.isEditing()?21:-1),r(),g("isOpen",s.showSuccessDialog())("title",s.successDialogTitle())("showCrearOtroButton",s.isCreateAction()))},dependencies:[N,z,V,K,B,P,$,O,R,G,j,H,q,U],encapsulation:2})};export{X as ClienteFormComponent};
