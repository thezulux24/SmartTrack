import{c as ce}from"./chunk-MSYAIIH4.js";import{a as le}from"./chunk-HEZGMVBA.js";import{a as oe,b as re}from"./chunk-57PIIFT5.js";import{a as ae}from"./chunk-MYVIK3N6.js";import"./chunk-C4VFUW4K.js";import{a as B,b as g,c as U,d as R,h as J,i as K,k as Q,n as W,o as X,p as Y,q as Z,r as ee,s as te,w as ie,y as ne}from"./chunk-V2VKRV3B.js";import{j as H,n as L,p as O,q,t as $,v as P}from"./chunk-3OSVPALZ.js";import{$ as S,Ab as w,Bb as M,Ia as c,Ib as N,S as y,Sa as D,Xa as h,Y as C,Yb as G,Z as v,_ as b,cb as x,ib as f,jb as A,la as _,lb as V,mb as k,nb as t,ob as i,pb as m,qb as j,tb as E,ub as p,zb as o}from"./chunk-MBDN4FSM.js";import"./chunk-X5YLR3NI.js";import{i as T}from"./chunk-ODN5LVDJ.js";var de=()=>["/internal/cotizaciones"],I=(r,n)=>n.id;function me(r,n){r&1&&(t(0,"div",17)(1,"div",19)(2,"div",20)(3,"div",21),m(4,"div",22)(5,"div",23),i(),t(6,"p",24),o(7,"Cargando cotizaci\xF3n..."),i()()()())}function ue(r,n){if(r&1&&(t(0,"div",25)(1,"div",8),b(),t(2,"svg",85),m(3,"path",86),i(),S(),t(4,"p",87),o(5),i()()()),r&2){let e=p(2);c(5),w(e.error())}}function pe(r,n){r&1&&(t(0,"div",35)(1,"div",88),b(),t(2,"svg",89),m(3,"path",90),i(),S(),t(4,"span",91),o(5,"Cliente encontrado en el sistema"),i()()())}function fe(r,n){r&1&&(t(0,"span",37),o(1,"\u{1F50D} Buscando..."),i())}function ge(r,n){r&1&&(t(0,"p",39),o(1,"Documento es requerido"),i())}function _e(r,n){r&1&&(t(0,"p",39),o(1,"Nombre es requerido"),i())}function he(r,n){r&1&&(t(0,"p",39),o(1,"Apellido es requerido"),i())}function xe(r,n){r&1&&(t(0,"p",39),o(1,"Email inv\xE1lido"),i())}function Ce(r,n){if(r&1&&(t(0,"option",71),o(1),i()),r&2){let e=n.$implicit;x("value",e.id),c(),w(e.nombre)}}function ve(r,n){if(r&1){let e=j();t(0,"div",50)(1,"div",92)(2,"div",93)(3,"label",94),o(4,"Producto *"),i(),t(5,"select",95),E("change",function(l){let d=C(e).$index,u=p(2);return v(u.onProductoChange(l,d))}),t(6,"option",70),o(7,"Selecciona..."),i(),V(8,Ce,2,2,"option",71,I),i()(),t(10,"div",96)(11,"label",94),o(12,"Descripci\xF3n *"),i(),m(13,"input",97),i(),t(14,"div",98)(15,"label",94),o(16,"Cantidad *"),i(),t(17,"input",99),E("input",function(){let l=C(e).$index,d=p(2);return v(d.calcularTotalItem(l))}),i()(),t(18,"div",98)(19,"label",94),o(20,"Precio Unit. *"),i(),t(21,"input",100),E("input",function(){let l=C(e).$index,d=p(2);return v(d.calcularTotalItem(l))}),i()(),t(22,"div",101)(23,"button",102),E("click",function(){let l=C(e).$index,d=p(2);return v(d.eliminarItem(l))}),b(),t(24,"svg",103),m(25,"path",104),i()()(),S(),t(26,"div",105)(27,"span",106),o(28),i()()()()}if(r&2){let e,a=n.$index,l=p(2);c(),x("formGroup",l.getItemGroup(a)),c(7),k(l.productos()),c(20),M(" Total: ",l.formatMoneda(((e=l.getItemGroup(a).get("precio_total"))==null?null:e.value)||0)," ")}}function be(r,n){r&1&&(t(0,"div",51)(1,"p",87),o(2,"No hay items. Agrega al menos uno."),i()())}function Se(r,n){if(r&1){let e=j();t(0,"input",107),E("input",function(){C(e);let l=p(2);return v(l.calcularTotales())}),i()}}function Ee(r,n){if(r&1){let e=j();t(0,"input",108),E("input",function(){C(e);let l=p(2);return v(l.calcularTotales())}),i()}}function ye(r,n){if(r&1&&(t(0,"div",63)(1,"span"),o(2,"Descuento:"),i(),t(3,"span",109),o(4),i()()),r&2){let e=p(2);c(4),M("-",e.formatMoneda(e.descuentoCalculado()),"")}}function we(r,n){if(r&1&&(t(0,"option",71),o(1),i()),r&2){let e=n.$implicit;x("value",e.id),c(),w(e.nombre)}}function Te(r,n){if(r&1&&(t(0,"option",71),o(1),i()),r&2){let e=n.$implicit;x("value",e.id),c(),w(e.nombre)}}function ze(r,n){r&1&&(t(0,"p",39),o(1,"Fecha de vencimiento es requerida"),i())}function Fe(r,n){r&1&&o(0," Guardando... ")}function Ve(r,n){r&1&&o(0," Actualizar Borrador ")}function ke(r,n){r&1&&o(0," Crear Cotizaci\xF3n ")}function je(r,n){if(r&1){let e=j();t(0,"div",18),h(1,ue,6,1,"div",25),t(2,"form",26),E("ngSubmit",function(){C(e);let l=p();return v(l.onSubmit())}),t(3,"div",27)(4,"div",28)(5,"div",29)(6,"div",30),b(),t(7,"svg",31),m(8,"path",32),i()(),S(),t(9,"h2",33),o(10,"Informaci\xF3n del Cliente"),i()()(),t(11,"div",34),h(12,pe,6,0,"div",35),t(13,"div")(14,"label",36),o(15," C\xE9dula / Documento * "),h(16,fe,2,0,"span",37),i(),t(17,"input",38),E("input",function(){C(e);let l=p();return v(l.onDocumentoChange())}),i(),h(18,ge,2,0,"p",39),i(),t(19,"div",40)(20,"div")(21,"label",36),o(22,"Nombres *"),i(),m(23,"input",41),h(24,_e,2,0,"p",39),i(),t(25,"div")(26,"label",36),o(27,"Apellidos *"),i(),m(28,"input",42),h(29,he,2,0,"p",39),i()(),t(30,"div",40)(31,"div")(32,"label",36),o(33," Email "),t(34,"span",43),o(35,"(para enviar cotizaci\xF3n)"),i()(),m(36,"input",44),h(37,xe,2,0,"p",39),i(),t(38,"div")(39,"label",36),o(40," Tel\xE9fono "),t(41,"span",43),o(42,"(opcional)"),i()(),m(43,"input",45),i()(),m(44,"input",46),i()(),t(45,"div",27)(46,"div",28)(47,"div",47)(48,"div",29)(49,"div",30),b(),t(50,"svg",31),m(51,"path",48),i()(),S(),t(52,"h2",33),o(53,"Productos/Servicios"),i()(),t(54,"button",49),E("click",function(){C(e);let l=p();return v(l.agregarItem())}),o(55," + Agregar "),i()()(),t(56,"div",34),V(57,ve,29,2,"div",50,A,!1,be,3,0,"div",51),i()(),t(60,"div",27)(61,"div",28)(62,"div",29)(63,"div",30),b(),t(64,"svg",31),m(65,"path",52),i()(),S(),t(66,"h2",33),o(67,"Costos y Descuentos"),i()()(),t(68,"div",53)(69,"div")(70,"label",36),o(71,"Costo de Transporte"),i(),t(72,"input",54),E("input",function(){C(e);let l=p();return v(l.calcularTotales())}),i()(),t(73,"div")(74,"label",36),o(75,"Descuento"),i(),t(76,"div",40)(77,"div")(78,"select",55),E("change",function(){C(e);let l=p();return v(l.onTipoDescuentoChange())}),t(79,"option",56),o(80,"Sin descuento"),i(),t(81,"option",57),o(82,"Porcentaje (%)"),i(),t(83,"option",58),o(84,"Monto fijo ($)"),i()()(),t(85,"div"),h(86,Se,1,0,"input",59)(87,Ee,1,0,"input",60),i()()(),t(88,"div",61)(89,"div",62)(90,"div",63)(91,"span"),o(92,"Subtotal:"),i(),t(93,"span",64),o(94),i()(),t(95,"div",63)(96,"span"),o(97,"Transporte:"),i(),t(98,"span"),o(99),i()(),h(100,ye,5,1,"div",63),t(101,"div",65)(102,"span"),o(103,"TOTAL:"),i(),t(104,"span",66),o(105),i()()()()()(),t(106,"div",27)(107,"div",28)(108,"div",29)(109,"div",30),b(),t(110,"svg",31),m(111,"path",67),i()(),S(),t(112,"div")(113,"h2",33),o(114,"Informaci\xF3n de Cirug\xEDa"),i(),t(115,"p",68),o(116,"Opcional - Se usar\xE1 cuando se apruebe la cotizaci\xF3n"),i()()()(),t(117,"div",34)(118,"div")(119,"label",36),o(120,"Hospital / Cl\xEDnica"),i(),t(121,"select",69)(122,"option",70),o(123,"Selecciona un hospital..."),i(),V(124,we,2,2,"option",71,I),i()(),t(126,"div")(127,"label",36),o(128,"Tipo de Cirug\xEDa"),i(),t(129,"select",72)(130,"option",70),o(131,"Selecciona un tipo..."),i(),V(132,Te,2,2,"option",71,I),i()(),t(134,"div")(135,"label",36),o(136,"M\xE9dico Cirujano"),i(),m(137,"input",73),i(),t(138,"div")(139,"label",36),o(140,"Fecha Programada"),i(),m(141,"input",74),i()()(),t(142,"div",27)(143,"div",28)(144,"div",29)(145,"div",30),b(),t(146,"svg",31),m(147,"path",75),i()(),S(),t(148,"h2",33),o(149,"Validez"),i()()(),t(150,"div",76)(151,"label",36),o(152,"Fecha de Vencimiento *"),i(),m(153,"input",77),h(154,ze,2,0,"p",39),i()(),t(155,"div",27)(156,"div",28)(157,"div",29)(158,"div",30),b(),t(159,"svg",31),m(160,"path",78),i()(),S(),t(161,"h2",33),o(162,"T\xE9rminos y Condiciones"),i()()(),t(163,"div",76),m(164,"textarea",79),i()(),t(165,"div",27)(166,"div",28)(167,"div",29)(168,"div",30),b(),t(169,"svg",31),m(170,"path",80),i()(),S(),t(171,"h2",33),o(172,"Notas Internas"),i()()(),t(173,"div",76),m(174,"textarea",81),i()(),t(175,"div",82)(176,"button",83),o(177," Cancelar "),i(),t(178,"button",84),h(179,Fe,1,0)(180,Ve,1,0)(181,ke,1,0),i()()()()}if(r&2){let e,a,l,d,u,F,z,s=p();c(),f(s.error()?1:-1),c(),x("formGroup",s.form),c(10),f(s.clienteEncontrado()?12:-1),c(4),f(s.buscandoCliente()?16:-1),c(2),f((e=s.form.get("documento_numero"))!=null&&e.invalid&&((e=s.form.get("documento_numero"))!=null&&e.touched)?18:-1),c(5),x("readonly",s.clienteEncontrado()),c(),f((a=s.form.get("nombre"))!=null&&a.invalid&&((a=s.form.get("nombre"))!=null&&a.touched)?24:-1),c(4),x("readonly",s.clienteEncontrado()),c(),f((l=s.form.get("apellido"))!=null&&l.invalid&&((l=s.form.get("apellido"))!=null&&l.touched)?29:-1),c(7),x("readonly",s.clienteEncontrado()),c(),f((d=s.form.get("email"))!=null&&d.invalid&&((d=s.form.get("email"))!=null&&d.touched)?37:-1),c(6),x("readonly",s.clienteEncontrado()),c(14),k(s.items.controls),c(29),f(((u=s.form.get("tipo_descuento"))==null?null:u.value)==="porcentaje"?86:((u=s.form.get("tipo_descuento"))==null?null:u.value)==="fijo"?87:-1),c(8),w(s.formatMoneda(s.subtotal())),c(5),w(s.formatMoneda(((F=s.form.get("costo_transporte"))==null?null:F.value)||0)),c(),f(s.descuentoCalculado()>0?100:-1),c(5),w(s.formatMoneda(s.totalCalculado())),c(19),k(s.hospitales()),c(8),k(s.tiposCirugia()),c(21),x("min",s.minFechaVencimiento()),c(),f((z=s.form.get("fecha_vencimiento"))!=null&&z.invalid&&((z=s.form.get("fecha_vencimiento"))!=null&&z.touched)?154:-1),c(24),x("disabled",s.form.invalid||s.submitting()),c(),f(s.submitting()?179:s.isEditing()?180:181)}}var se=class r{fb=y(ie);router=y(O);route=y(L);cotizacionService=y(le);supabase=y(P);clientesService=y(ae);hospitalesService=y(oe);tiposCirugiaService=y(re);loading=_(!1);submitting=_(!1);error=_(null);cotizacionId=_(null);isEditing=G(()=>!!this.cotizacionId());clienteEncontrado=_(null);buscandoCliente=_(!1);productos=_([]);hospitales=_([]);tiposCirugia=_([]);subtotalSignal=_(0);descuentoSignal=_(0);totalSignal=_(0);form;constructor(){this.form=this.fb.group({documento_numero:["",g.required],nombre:["",g.required],apellido:["",g.required],cliente_id:["",g.required],email:["",[g.email]],telefono:[""],hospital_id:[""],tipo_cirugia_id:[""],medico_cirujano:[""],fecha_programada:[""],items:this.fb.array([],g.minLength(1)),costo_transporte:[0],tipo_descuento:["ninguno"],descuento:[0],porcentaje_descuento:[0],fecha_vencimiento:["",g.required],terminos_condiciones:[ce],notas:[""]}),this.items.valueChanges.subscribe(()=>{this.calcularTotales()}),this.form.get("costo_transporte")?.valueChanges.subscribe(()=>this.calcularTotales()),this.form.get("descuento")?.valueChanges.subscribe(()=>this.calcularTotales()),this.form.get("porcentaje_descuento")?.valueChanges.subscribe(()=>this.calcularTotales()),this.form.get("tipo_descuento")?.valueChanges.subscribe(()=>this.calcularTotales())}ngOnInit(){this.cargarDatos();let n=this.route.snapshot.paramMap.get("id");if(n)this.cotizacionId.set(n),this.cargarCotizacion(n);else{let e=new Date;e.setDate(e.getDate()+15),this.form.patchValue({fecha_vencimiento:e.toISOString().split("T")[0]})}}cargarDatos(){return T(this,null,function*(){try{let{data:n,error:e}=yield this.supabase.client.from("productos").select("id, nombre, precio").eq("es_activo",!0).order("nombre");if(e)throw e;this.productos.set(n||[]),this.hospitalesService.getHospitales().subscribe({next:a=>{this.hospitales.set(a)},error:a=>console.error("Error cargando hospitales:",a)}),this.tiposCirugiaService.getTiposCirugia().subscribe({next:a=>{this.tiposCirugia.set(a)},error:a=>console.error("Error cargando tipos cirug\xEDa:",a)})}catch(n){console.error("Error cargando datos:",n),this.error.set("Error cargando datos: "+n.message)}})}onDocumentoChange(){let n=this.form.get("documento_numero")?.value;n&&n.length>=6?this.buscarClientePorDocumento(n):(this.clienteEncontrado.set(null),this.limpiarCamposCliente())}buscarClientePorDocumento(n){this.buscandoCliente.set(!0),this.clientesService.buscarPorDocumento(n).subscribe({next:e=>{e?(console.log("\u2705 Cliente encontrado:",e),this.clienteEncontrado.set(e),this.llenarCamposCliente(e)):(console.log("\u2139\uFE0F Cliente no encontrado"),this.clienteEncontrado.set(null)),this.buscandoCliente.set(!1)},error:e=>{console.error("\u274C Error buscando cliente:",e),this.clienteEncontrado.set(null),this.buscandoCliente.set(!1)}})}llenarCamposCliente(n){this.form.patchValue({cliente_id:n.id,nombre:n.nombre,apellido:n.apellido,email:n.email||"",telefono:n.telefono||""})}limpiarCamposCliente(){this.form.patchValue({cliente_id:"",nombre:"",apellido:"",email:"",telefono:""})}cargarDocumentoCliente(n){return T(this,null,function*(){try{let{data:e,error:a}=yield this.supabase.client.from("clientes").select("documento_numero").eq("id",n).single();!a&&e&&this.form.patchValue({documento_numero:e.documento_numero})}catch(e){console.error("Error cargando documento cliente:",e)}})}cargarCotizacion(n){return T(this,null,function*(){this.loading.set(!0),this.cotizacionService.getCotizacionById(n).subscribe({next:e=>{if(!e){this.error.set("Cotizaci\xF3n no encontrada"),this.loading.set(!1);return}if(e.estado!=="borrador"){this.error.set("Solo se pueden editar cotizaciones en borrador"),this.loading.set(!1);return}this.form.patchValue({nombre:e.cliente?.nombre||"",apellido:e.cliente?.apellido||"",cliente_id:e.cliente_id,costo_transporte:e.costo_transporte,descuento:e.descuento,porcentaje_descuento:e.porcentaje_descuento,fecha_vencimiento:e.fecha_vencimiento,terminos_condiciones:e.terminos_condiciones,notas:e.notas_internas}),e.cliente_id&&this.cargarDocumentoCliente(e.cliente_id),e.cliente&&this.clienteEncontrado.set(e.cliente),e.porcentaje_descuento>0?this.form.patchValue({tipo_descuento:"porcentaje"}):e.descuento>0&&this.form.patchValue({tipo_descuento:"fijo"}),e.items&&e.items.forEach(a=>{this.agregarItem(a)}),this.loading.set(!1)},error:e=>{console.error("Error cargando cotizaci\xF3n:",e),this.error.set("Error cargando cotizaci\xF3n"),this.loading.set(!1)}})})}get items(){return this.form.get("items")}getItemGroup(n){return this.items.at(n)}agregarItem(n){let e=this.fb.group({producto_id:[n?.producto_id||"",g.required],descripcion:[n?.descripcion||"",g.required],cantidad:[n?.cantidad||1,[g.required,g.min(1)]],precio_unitario:[n?.precio_unitario||0,[g.required,g.min(0)]],precio_total:[n?.precio_total||0]});this.items.push(e),n&&this.calcularTotalItem(this.items.length-1)}eliminarItem(n){this.items.removeAt(n),this.calcularTotales()}onProductoChange(n,e){let a=n.target.value,l=this.productos().find(d=>d.id===a);l&&(this.getItemGroup(e).patchValue({descripcion:l.nombre,precio_unitario:l.precio}),this.calcularTotalItem(e))}calcularTotalItem(n){let e=this.getItemGroup(n),a=e.get("cantidad")?.value||0,l=e.get("precio_unitario")?.value||0,d=a*l;e.patchValue({precio_total:d},{emitEvent:!1}),this.calcularTotales()}calcularTotales(){let n=0;for(let u=0;u<this.items.length;u++){let F=this.getItemGroup(u),z=F.get("cantidad")?.value||0,s=F.get("precio_unitario")?.value||0;n+=z*s}this.subtotalSignal.set(n);let e=this.form.get("tipo_descuento")?.value,a=0;if(e==="porcentaje"){let u=this.form.get("porcentaje_descuento")?.value||0;a=n*(u/100)}else e==="fijo"&&(a=this.form.get("descuento")?.value||0);this.descuentoSignal.set(a);let l=this.form.get("costo_transporte")?.value||0,d=n+l-a;this.totalSignal.set(d)}subtotal(){return this.subtotalSignal()}descuentoCalculado(){return this.descuentoSignal()}totalCalculado(){return this.totalSignal()}onTipoDescuentoChange(){let n=this.form.get("tipo_descuento")?.value;n==="ninguno"?this.form.patchValue({descuento:0,porcentaje_descuento:0},{emitEvent:!1}):n==="porcentaje"?this.form.patchValue({descuento:0},{emitEvent:!1}):n==="fijo"&&this.form.patchValue({porcentaje_descuento:0},{emitEvent:!1}),this.calcularTotales()}minFechaVencimiento(){return new Date().toISOString().split("T")[0]}formatMoneda(n){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(n)}guardarBorrador(){return T(this,null,function*(){if(this.items.length===0){alert("Debes agregar al menos un item");return}if(!this.form.get("cliente_id")?.value){alert("Debes seleccionar un cliente");return}yield this.guardar("borrador")})}onSubmit(){return T(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched(),alert("Por favor completa todos los campos requeridos");return}if(this.items.length===0){alert("Debes agregar al menos un item");return}yield this.guardar("borrador")})}guardar(n){return T(this,null,function*(){this.submitting.set(!0),this.error.set(null);try{let e=this.form.value,a=e.tipo_descuento,l={cliente_id:e.cliente_id,hospital_id:e.hospital_id||null,tipo_cirugia_id:e.tipo_cirugia_id||null,medico_cirujano:e.medico_cirujano||null,fecha_programada:e.fecha_programada||null,items:e.items.map(u=>({producto_id:u.producto_id||null,descripcion:u.descripcion,cantidad:u.cantidad,precio_unitario:u.precio_unitario})),costo_transporte:e.costo_transporte||0,descuento:a==="fijo"?e.descuento:0,porcentaje_descuento:a==="porcentaje"?e.porcentaje_descuento:0,fecha_vencimiento:e.fecha_vencimiento,terminos_condiciones:e.terminos_condiciones,notas_internas:e.notas},d;this.isEditing()?(d=yield this.cotizacionService.updateCotizacion(this.cotizacionId(),l),n==="enviada"&&(yield this.cotizacionService.cambiarEstado(this.cotizacionId(),{estado:"enviada",comentario:"Cotizaci\xF3n enviada al cliente"}))):(d=yield this.cotizacionService.createCotizacion(l),n==="enviada"&&d.cotizacion&&(yield this.cotizacionService.cambiarEstado(d.cotizacion.id,{estado:"enviada",comentario:"Cotizaci\xF3n enviada al cliente"}))),d.exito?(alert(n==="borrador"?"Cotizaci\xF3n guardada como borrador":"Cotizaci\xF3n enviada al cliente"),this.router.navigate(["/internal/cotizaciones"])):this.error.set(d.mensaje||"Error al guardar")}catch(e){console.error("Error guardando cotizaci\xF3n:",e),this.error.set("Error al guardar la cotizaci\xF3n")}finally{this.submitting.set(!1)}})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["app-cotizacion-form"]],decls:22,vars:6,consts:[[1,"min-h-screen","bg-white","relative"],[1,"fixed","inset-0","z-0"],["src","02.jpg","alt","Background",1,"absolute","inset-0","w-full","h-full","object-cover"],[1,"absolute","inset-0","bg-white/90"],[1,"relative","z-10"],[1,"bg-white","shadow-md"],[1,"max-w-4xl","mx-auto","px-4","py-4"],[1,"flex","justify-between","items-center"],[1,"flex","items-center","space-x-3"],[1,"bg-white","rounded-lg","px-3","py-2"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-6"],[1,"w-10","h-10","bg-[#10284C]","rounded-lg","flex","items-center","justify-center","active:scale-95","transition-transform",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],[1,"max-w-4xl","mx-auto","px-4","py-6","text-center"],[1,"text-2xl","sm:text-3xl","font-bold","text-[#10284C]","mb-2"],[1,"text-[#10284C]/70","text-sm"],[1,"px-4","py-6"],[1,"max-w-4xl","mx-auto","px-4","pb-8"],[1,"max-w-4xl","mx-auto"],[1,"bg-white","rounded-xl","shadow-md","p-6","text-center"],[1,"animate-pulse","space-y-4"],[1,"h-4","bg-gray-200","rounded","w-3/4","mx-auto"],[1,"h-4","bg-gray-200","rounded","w-1/2","mx-auto"],[1,"text-sm","text-gray-500","mt-4"],[1,"mb-4","bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-xl","shadow-md"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"bg-white/50","rounded-2xl","border-2","border-[#0098A8]","overflow-hidden","shadow-sm"],[1,"bg-white/50","px-4","py-3","border-b-2","border-[#0098A8]"],[1,"flex","items-center","space-x-2"],[1,"w-8","h-8","bg-[#C8D900]","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-[#10284C]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-lg","font-bold","text-[#10284C]"],[1,"p-4","space-y-3"],[1,"p-2.5","bg-green-100","border","border-green-200","rounded-lg"],[1,"block","text-sm","font-medium","text-[#10284C]","mb-1"],[1,"text-blue-600","text-xs","ml-1"],["type","text","formControlName","documento_numero","placeholder","Ingresa el n\xFAmero de c\xE9dula",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"input"],[1,"text-red-500","text-xs","mt-1"],[1,"grid","grid-cols-2","gap-3"],["type","text","formControlName","nombre","placeholder","Nombres",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"readonly"],["type","text","formControlName","apellido","placeholder","Apellidos",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"readonly"],[1,"text-xs","text-gray-500"],["type","email","formControlName","email","placeholder","correo@ejemplo.com",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"readonly"],["type","tel","formControlName","telefono","placeholder","0999999999",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"readonly"],["type","hidden","formControlName","cliente_id"],[1,"flex","items-center","justify-between"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],["type","button",1,"bg-[#C8D900]","hover:bg-[#B8C900]","text-[#10284C]","px-4","py-2","rounded-lg","text-sm","font-semibold","transition-colors",3,"click"],[1,"bg-gray-50","rounded-lg","p-3","border","border-gray-200"],[1,"text-center","py-6","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"p-4","space-y-4"],["type","number","formControlName","costo_transporte","min","0","step","0.01",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"input"],["formControlName","tipo_descuento",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"change"],["value","ninguno"],["value","porcentaje"],["value","fijo"],["type","number","formControlName","porcentaje_descuento","min","0","max","100","step","0.01","placeholder","0.00 %",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],["type","number","formControlName","descuento","min","0","step","0.01","placeholder","$0.00",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],[1,"bg-[#10284C]","rounded-lg","p-4","text-white"],[1,"space-y-2"],[1,"flex","justify-between","text-sm"],[1,"font-semibold"],[1,"flex","justify-between","text-xl","font-bold","border-t","border-white/30","pt-3","mt-3"],[1,"text-[#C8D900]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-.121 9.879l-4.5 4.5m0-4.5l4.5 4.5M12 16h.01"],[1,"text-xs","text-[#10284C]/70"],["formControlName","hospital_id",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],["value",""],[3,"value"],["formControlName","tipo_cirugia_id",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],["type","text","formControlName","medico_cirujano","placeholder","Nombre del m\xE9dico",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],["type","date","formControlName","fecha_programada",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"p-4"],["type","date","formControlName","fecha_vencimiento",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"min"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["formControlName","terminos_condiciones","rows","10","placeholder","T\xE9rminos y condiciones...",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]","text-sm","font-mono"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["formControlName","notas","rows","4","placeholder","Notas internas (no visibles para el cliente)...",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],[1,"flex","gap-3","sticky","bottom-4"],["type","button","routerLink","/internal/cotizaciones",1,"flex-1","bg-gray-400","hover:bg-gray-500","text-white","font-semibold","py-4","px-6","rounded-xl","shadow-lg","transition-colors"],["type","submit",1,"flex-1","bg-[#C8D900]","hover:bg-[#B8C900]","text-[#10284C]","font-bold","py-4","px-6","rounded-xl","shadow-lg","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-500","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm"],[1,"flex","items-center","text-green-800"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-sm","font-medium"],[1,"grid","grid-cols-1","md:grid-cols-12","gap-3",3,"formGroup"],[1,"md:col-span-4"],[1,"block","text-xs","font-medium","text-[#10284C]","mb-1"],["formControlName","producto_id",1,"w-full","px-3","py-2","text-sm","bg-white","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"change"],[1,"md:col-span-3"],["type","text","formControlName","descripcion",1,"w-full","px-3","py-2","text-sm","bg-white","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]"],[1,"md:col-span-2"],["type","number","formControlName","cantidad","min","1",1,"w-full","px-3","py-2","text-sm","bg-white","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"input"],["type","number","formControlName","precio_unitario","min","0","step","0.01",1,"w-full","px-3","py-2","text-sm","bg-white","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"input"],[1,"md:col-span-1","flex","items-end"],["type","button",1,"w-full","bg-red-500","hover:bg-red-600","text-white","px-2","py-2","rounded-lg","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mx-auto"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"md:col-span-12","text-right"],[1,"text-sm","text-[#10284C]","font-semibold"],["type","number","formControlName","porcentaje_descuento","min","0","max","100","step","0.01","placeholder","0.00 %",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"input"],["type","number","formControlName","descuento","min","0","step","0.01","placeholder","$0.00",1,"w-full","px-3","py-2","bg-gray-100","border","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#0098A8]",3,"input"],[1,"text-red-400"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"div",1),m(2,"img",2)(3,"div",3),i(),t(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),m(10,"img",10),i()(),t(11,"div")(12,"button",11),b(),t(13,"svg",12),m(14,"path",13),i()()()()()(),S(),t(15,"div",14)(16,"h1",15),o(17),i(),t(18,"p",16),o(19),i()(),h(20,me,8,0,"div",17)(21,je,182,22,"div",18),i()()),e&2&&(c(12),x("routerLink",N(5,de)),c(5),M(" ",a.isEditing()?"Editar Cotizaci\xF3n":"Nueva Cotizaci\xF3n"," "),c(2),M(" ",a.isEditing()?"Actualiza los datos de la cotizaci\xF3n":"Completa la informaci\xF3n para generar la cotizaci\xF3n"," "),c(),f(a.loading()&&a.isEditing()?20:-1),c(),f(!a.loading()||!a.isEditing()?21:-1))},dependencies:[H,ne,J,Y,Z,B,K,X,U,R,te,ee,Q,W,$,q],encapsulation:2})};export{se as CotizacionFormComponent};
