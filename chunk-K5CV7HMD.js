import{a as F}from"./chunk-MR6A56XN.js";import"./chunk-AF4TJ6YQ.js";import{$ as f,D as E,Da as V,F as o,Fa as j,Ha as H,I as T,M as _,P as M,R as S,S as g,X as e,Y as t,Z as u,_ as w,aa as s,ca as n,da as c,ea as h,m as D,t as b,v,w as C,x as p,y as x}from"./chunk-CV56RX3B.js";import"./chunk-LJ5XHLMQ.js";import"./chunk-FK42CRUA.js";function N(r,i){if(r&1&&(e(0,"h1",13),n(1),t(),e(2,"p",14),n(3),t()),r&2){let a=s();o(),c(a.cirugia().numero_cirugia),o(2),c(a.getClienteNombre())}}function z(r,i){r&1&&(e(0,"h1",13),n(1,"Cargando..."),t(),e(2,"p",14),n(3,"Obteniendo informaci\xF3n de la cirug\xEDa"),t())}function G(r,i){r&1&&(e(0,"div",12)(1,"div",15)(2,"div",16)(3,"div",17),u(4,"div",18)(5,"div",19)(6,"div",20),t(),e(7,"p",21),n(8,"Cargando informaci\xF3n..."),t()()()())}function $(r,i){if(r&1){let a=w();e(0,"div",12)(1,"div",15)(2,"div",16)(3,"div",22),p(),e(4,"svg",23),u(5,"path",24),t(),x(),e(6,"p",25),n(7),t()(),e(8,"div",26)(9,"button",27),f("click",function(){v(a);let m=s();return C(m.recargarDatos())}),n(10," Reintentar "),t(),e(11,"button",28),f("click",function(){v(a);let m=s();return C(m.volverAtras())}),n(12," Volver a la Lista "),t()()()()()}if(r&2){let a=s();o(7),c(a.error())}}function A(r,i){if(r&1&&(e(0,"div")(1,"p",45),n(2,"Documento"),t(),e(3,"p",46),n(4),t()()),r&2){let a=s(2);o(4),c(a.getClienteDocumento())}}function P(r,i){if(r&1&&(e(0,"div")(1,"p",45),n(2,"Tel\xE9fono"),t(),e(3,"p",46),n(4),t()()),r&2){let a=s(2);o(4),c(a.getClienteTelefono())}}function B(r,i){if(r&1&&(e(0,"div")(1,"p",45),n(2,"Email"),t(),e(3,"p",46),n(4),t()()),r&2){let a=s(2);o(4),c(a.getClienteEmail())}}function O(r,i){if(r&1&&(e(0,"div")(1,"p",45),n(2,"Ciudad"),t(),e(3,"p",46),n(4),t()()),r&2){let a=s(2);o(4),c(a.getClienteCiudad())}}function R(r,i){if(r&1&&(e(0,"span",49),n(1),t()),r&2){let a,d=s(2);o(),h(" - ",(a=d.cirugia().hospital_data)==null?null:a.ciudad,"")}}function q(r,i){if(r&1&&(e(0,"div")(1,"p",45),n(2,"Direcci\xF3n"),t(),e(3,"p",58),n(4),t()()),r&2){let a,d=s(2);o(4),c((a=d.cirugia().hospital_data)==null?null:a.direccion)}}function U(r,i){if(r&1&&(e(0,"div")(1,"p",45),n(2,"Tel\xE9fono Hospital"),t(),e(3,"p",58),n(4),t()()),r&2){let a,d=s(2);o(4),c((a=d.cirugia().hospital_data)==null?null:a.telefono)}}function J(r,i){if(r&1&&(e(0,"p",50),n(1),t()),r&2){let a,d=s(2);o(),c((a=d.cirugia().tipo_cirugia_data)==null?null:a.especialidad)}}function K(r,i){if(r&1&&(e(0,"div")(1,"p",45),n(2,"\xC1rea"),t(),e(3,"p",58),n(4),t()()),r&2){let a=s(3);o(4),c(a.cirugia().tecnico_asignado.area)}}function Q(r,i){if(r&1&&(e(0,"div",30)(1,"h2",40)(2,"div",64),p(),e(3,"svg",42),u(4,"path",43),t()(),x(),e(5,"span"),n(6,"T\xE9cnico Asignado"),t()(),e(7,"div",44)(8,"div")(9,"p",45),n(10,"Nombre"),t(),e(11,"p",46),n(12),t()(),e(13,"div")(14,"p",45),n(15,"Email"),t(),e(16,"p",58),n(17),t()(),_(18,K,5,1,"div"),t()()),r&2){let a=s(2);o(12),c(a.cirugia().tecnico_asignado.full_name),o(5),c(a.cirugia().tecnico_asignado.email),o(),g(a.cirugia().tecnico_asignado.area?18:-1)}}function W(r,i){if(r&1&&(e(0,"div",30)(1,"h2",40)(2,"div",65),p(),e(3,"svg",42),u(4,"path",37),t()(),x(),e(5,"span"),n(6,"Observaciones"),t()(),e(7,"div",66)(8,"p",67),n(9),t()()()),r&2){let a=s(2);o(9),c(a.cirugia().notas)}}function X(r,i){if(r&1){let a=w();e(0,"main",12)(1,"div",29)(2,"div",30)(3,"div",31)(4,"div",4)(5,"span",32)(6,"span"),n(7),t(),e(8,"span"),n(9),t()(),e(10,"span",33),n(11),t()()(),e(12,"div",34)(13,"button",35),f("click",function(){v(a);let m=s();return C(m.editarCirugia())}),p(),e(14,"svg",36),u(15,"path",37),t(),x(),e(16,"span"),n(17,"Editar"),t()(),e(18,"button",38),f("click",function(){v(a);let m=s();return C(m.cambiarEstado())}),p(),e(19,"svg",36),u(20,"path",39),t(),x(),e(21,"span"),n(22,"Cambiar Estado"),t()()()(),e(23,"div",30)(24,"h2",40)(25,"div",41),p(),e(26,"svg",42),u(27,"path",43),t()(),x(),e(28,"span"),n(29,"Informaci\xF3n del Cliente"),t()(),e(30,"div",44)(31,"div")(32,"p",45),n(33,"Nombre Completo"),t(),e(34,"p",46),n(35),t()(),_(36,A,5,1,"div")(37,P,5,1,"div")(38,B,5,1,"div")(39,O,5,1,"div"),t()(),e(40,"div",30)(41,"h2",40)(42,"div",47),p(),e(43,"svg",42),u(44,"path",48),t()(),x(),e(45,"span"),n(46,"Informaci\xF3n de la Cirug\xEDa"),t()(),e(47,"div",44)(48,"div")(49,"p",45),n(50,"Hospital/Cl\xEDnica"),t(),e(51,"p",46),n(52),_(53,R,2,1,"span",49),t()(),_(54,q,5,1,"div")(55,U,5,1,"div"),e(56,"div")(57,"p",45),n(58,"Tipo de Cirug\xEDa"),t(),e(59,"p",46),n(60),t(),_(61,J,2,1,"p",50),t(),e(62,"div")(63,"p",45),n(64,"M\xE9dico Cirujano"),t(),e(65,"p",46),n(66),t()()()(),e(67,"div",30)(68,"h2",40)(69,"div",51),p(),e(70,"svg",42),u(71,"path",52),t()(),x(),e(72,"span"),n(73,"Programaci\xF3n"),t()(),e(74,"div",44)(75,"div")(76,"p",45),n(77,"Fecha Programada"),t(),e(78,"p",46),n(79),t(),e(80,"p",50),n(81),t()(),e(82,"div",53)(83,"div")(84,"p",45),n(85,"Hora de Inicio"),t(),e(86,"p",46),n(87),t()(),e(88,"div")(89,"p",45),n(90,"Duraci\xF3n Estimada"),t(),e(91,"p",46),n(92),t()()()()(),_(93,Q,19,3,"div",30)(94,W,10,1,"div",30),e(95,"div",30)(96,"h2",40)(97,"div",54),p(),e(98,"svg",42),u(99,"path",55),t()(),x(),e(100,"span"),n(101,"Informaci\xF3n del Sistema"),t()(),e(102,"div",56)(103,"div")(104,"p",45),n(105,"N\xFAmero de Cirug\xEDa"),t(),e(106,"p",57),n(107),t()(),e(108,"div",53)(109,"div")(110,"p",45),n(111,"Creada el"),t(),e(112,"p",58),n(113),t()(),e(114,"div")(115,"p",45),n(116,"\xDAltima actualizaci\xF3n"),t(),e(117,"p",58),n(118),t()()()()(),e(119,"div",30)(120,"h3",59),n(121,"Acciones"),t(),e(122,"div",44)(123,"button",60),f("click",function(){v(a);let m=s();return C(m.compartirCirugia())}),p(),e(124,"svg",36),u(125,"path",61),t(),x(),e(126,"span"),n(127,"Compartir"),t()(),e(128,"button",60),f("click",function(){v(a);let m=s();return C(m.imprimirDetalle())}),p(),e(129,"svg",36),u(130,"path",62),t(),x(),e(131,"span"),n(132,"Imprimir"),t()()()(),u(133,"div",63),t()()}if(r&2){let a,d,m,k,y,I,l=s();o(5),S(l.getEstadoInfo(l.cirugia().estado).color),o(2),c(l.getEstadoInfo(l.cirugia().estado).icon),o(2),c(l.getEstadoInfo(l.cirugia().estado).label),o(),S(l.getPrioridadInfo(l.cirugia().prioridad).color),o(),h(" ",l.getPrioridadInfo(l.cirugia().prioridad).label," "),o(7),M("disabled",l.cirugia().estado==="completada"||l.cirugia().estado==="cancelada"),o(17),c(l.getClienteNombre()),o(),g(l.getClienteDocumento()?36:-1),o(),g(l.getClienteTelefono()?37:-1),o(),g(l.getClienteEmail()?38:-1),o(),g(l.getClienteCiudad()?39:-1),o(13),h(" ",((a=l.cirugia().hospital_data)==null?null:a.nombre)||"No especificado"," "),o(),g((d=l.cirugia().hospital_data)!=null&&d.ciudad?53:-1),o(),g((m=l.cirugia().hospital_data)!=null&&m.direccion?54:-1),o(),g((k=l.cirugia().hospital_data)!=null&&k.telefono?55:-1),o(5),h(" ",((y=l.cirugia().tipo_cirugia_data)==null?null:y.nombre)||"No especificado"," "),o(),g((I=l.cirugia().tipo_cirugia_data)!=null&&I.especialidad?61:-1),o(5),c(l.cirugia().medico_cirujano),o(13),c(l.formatFecha(l.cirugia().fecha_programada)),o(2),c(l.formatFechaCorta(l.cirugia().fecha_programada)),o(6),c(l.formatHora(l.cirugia().hora_inicio)),o(5),c(l.formatDuracion(l.cirugia().duracion_estimada)),o(),g(l.cirugia().tecnico_asignado?93:-1),o(),g(l.cirugia().notas?94:-1),o(13),c(l.cirugia().numero_cirugia),o(6),c(l.formatFechaCorta(l.cirugia().created_at)),o(5),c(l.formatFechaCorta(l.cirugia().updated_at))}}var L=class r{route=b(j);router=b(H);cirugiasService=b(F);loading=E(!1);error=E(null);cirugia=E(null);estadosInfo={programada:{label:"Programada",color:"bg-blue-100 text-blue-800",icon:"\u{1F4C5}"},en_curso:{label:"En Curso",color:"bg-yellow-100 text-yellow-800",icon:"\u26A1"},completada:{label:"Completada",color:"bg-green-100 text-green-800",icon:"\u2705"},cancelada:{label:"Cancelada",color:"bg-red-100 text-red-800",icon:"\u274C"},urgencia:{label:"Urgencia",color:"bg-orange-100 text-orange-800",icon:"\u{1F6A8}"}};prioridadesInfo={baja:{label:"Baja",color:"bg-gray-100 text-gray-800"},normal:{label:"Normal",color:"bg-blue-100 text-blue-800"},alta:{label:"Alta",color:"bg-yellow-100 text-yellow-800"},urgencia:{label:"Urgencia",color:"bg-red-100 text-red-800"}};ngOnInit(){console.log("\u{1F680} CirugiaDetailComponent iniciando..."),this.loadCirugia()}loadCirugia(){this.loading.set(!0),this.error.set(null),this.route.paramMap.pipe(D(i=>{let a=i.get("id");if(!a)throw new Error("ID de cirug\xEDa no encontrado");return console.log("\u{1F4CB} Cargando cirug\xEDa con ID:",a),this.cirugiasService.getCirugiaById(a)})).subscribe({next:i=>{console.log("\u2705 Cirug\xEDa cargada:",i),this.cirugia.set(i),this.loading.set(!1)},error:i=>{console.error("\u274C Error loading cirugia:",i),this.error.set("Error al cargar la cirug\xEDa: "+(i?.message||i)),this.loading.set(!1)}})}formatFecha(i){return new Date(i).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}formatFechaCorta(i){return new Date(i).toLocaleDateString("es-ES")}formatHora(i){return i||"No especificada"}formatDuracion(i){if(!i)return"No especificada";let a=Math.floor(i/60),d=i%60;return a>0?`${a}h ${d}m`:`${d}m`}getEstadoInfo(i){return this.estadosInfo[i]||{label:i,color:"bg-gray-100 text-gray-800",icon:"\u2753"}}getPrioridadInfo(i){return this.prioridadesInfo[i]||{label:i,color:"bg-gray-100 text-gray-800"}}editarCirugia(){let i=this.cirugia();i&&this.router.navigate(["/internal/agenda/editar",i.id])}cambiarEstado(){let i=this.cirugia();if(!i)return;if(i.estado==="completada"||i.estado==="cancelada"){alert("No se puede cambiar el estado de una cirug\xEDa completada o cancelada");return}let a;switch(i.estado){case"programada":a="en_curso";break;case"en_curso":a="completada";break;case"urgencia":a="en_curso";break;default:a="programada";break}let d=this.getEstadoInfo(a);confirm(`\xBFCambiar estado a "${d.label}"?`)&&(this.loading.set(!0),this.cirugiasService.updateCirugia(i.id,{estado:a}).subscribe({next:m=>{console.log("\u2705 Estado actualizado:",m),this.cirugia.set(m),this.loading.set(!1)},error:m=>{console.error("\u274C Error updating estado:",m),alert("Error al cambiar estado: "+(m?.message||m)),this.loading.set(!1)}}))}volverAtras(){this.router.navigate(["/internal/agenda"])}recargarDatos(){this.loadCirugia()}compartirCirugia(){let i=this.cirugia();i&&(navigator.share?navigator.share({title:`Cirug\xEDa ${i.numero_cirugia}`,text:`${this.getClienteNombre()} - ${i.tipo_cirugia_data?.nombre}`,url:window.location.href}).catch(console.error):navigator.clipboard.writeText(window.location.href).then(()=>{alert("Enlace copiado al portapapeles")}).catch(()=>{alert("No se pudo copiar el enlace")}))}imprimirDetalle(){window.print()}getClienteNombre(){let i=this.cirugia();return i?.cliente?`${i.cliente.nombre} ${i.cliente.apellido}`.trim():"Sin informaci\xF3n"}getClienteDocumento(){let i=this.cirugia();return i?.cliente?`${i.cliente.documento_tipo}: ${i.cliente.documento_numero}`:null}getClienteTelefono(){let i=this.cirugia();return i?.cliente&&i.cliente.telefono||null}getClienteEmail(){let i=this.cirugia();return i&&i.cliente?.email||null}getClienteCiudad(){let i=this.cirugia();return i&&i.cliente?.ciudad||null}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=T({type:r,selectors:[["app-cirugia-detail"]],decls:19,vars:2,consts:[[1,"bg-gray-50","dark:bg-gray-900","min-h-screen"],[1,"bg-gradient-to-r","from-green-600","to-emerald-700","text-white","shadow-lg"],[1,"px-4","py-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"flex","items-center","space-x-3"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-8","brightness-0","invert"],[1,"text-lg","font-semibold"],[1,"flex","items-center","space-x-2"],[1,"bg-white/20","hover:bg-white/30","text-white","px-3","py-2","rounded-lg","text-sm","font-medium","transition","duration-200","shadow-md","backdrop-blur-sm",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-center"],[1,"px-4","py-6"],[1,"text-2xl","font-bold","mb-1"],[1,"text-green-100","text-sm"],[1,"max-w-lg","mx-auto"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","p-6","text-center"],[1,"animate-pulse","space-y-4"],[1,"h-4","bg-gray-200","rounded","w-3/4","mx-auto"],[1,"h-4","bg-gray-200","rounded","w-1/2","mx-auto"],[1,"h-4","bg-gray-200","rounded","w-2/3","mx-auto"],[1,"text-sm","text-gray-500","mt-4"],[1,"text-red-600","dark:text-red-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm","mb-4"],[1,"space-y-2"],[1,"w-full","bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded-lg","text-sm","font-medium","transition","duration-200",3,"click"],[1,"w-full","bg-gray-100","hover:bg-gray-200","text-gray-700","px-4","py-2","rounded-lg","text-sm","font-medium","transition","duration-200",3,"click"],[1,"max-w-lg","mx-auto","space-y-6"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","dark:border","dark:border-gray-700","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"px-3","py-1","rounded-full","text-sm","font-medium","flex","items-center","space-x-1"],[1,"px-2","py-1","rounded-full","text-xs","font-medium"],[1,"grid","grid-cols-2","gap-3"],[1,"bg-yellow-600","hover:bg-yellow-700","text-white","px-4","py-2.5","rounded-lg","text-sm","font-medium","transition","duration-200","flex","items-center","justify-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"bg-blue-600","hover:bg-blue-700","disabled:bg-gray-400","disabled:cursor-not-allowed","text-white","px-4","py-2.5","rounded-lg","text-sm","font-medium","transition","duration-200","flex","items-center","justify-center","space-x-2",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4","flex","items-center","space-x-2"],[1,"w-8","h-8","bg-gradient-to-br","from-blue-400","to-blue-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"space-y-3"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"text-gray-900","dark:text-white","font-medium"],[1,"w-8","h-8","bg-gradient-to-br","from-green-400","to-green-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-gray-500"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"w-8","h-8","bg-gradient-to-br","from-purple-400","to-purple-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"grid","grid-cols-2","gap-4"],[1,"w-8","h-8","bg-gradient-to-br","from-indigo-400","to-indigo-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"space-y-3","text-sm"],[1,"text-gray-900","dark:text-white","font-mono"],[1,"text-gray-900","dark:text-white"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4"],[1,"w-full","bg-gray-100","hover:bg-gray-200","text-gray-700","px-4","py-3","rounded-lg","font-medium","transition","duration-200","dark:bg-gray-700","dark:text-gray-300","dark:hover:bg-gray-600","flex","items-center","justify-center","space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],[1,"h-6"],[1,"w-8","h-8","bg-gradient-to-br","from-orange-400","to-orange-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],[1,"w-8","h-8","bg-gradient-to-br","from-gray-400","to-gray-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],[1,"bg-gray-50","dark:bg-gray-900","rounded-lg","p-4"],[1,"text-gray-700","dark:text-gray-300","whitespace-pre-wrap"]],template:function(a,d){a&1&&(e(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4),u(5,"img",5),e(6,"span",6),n(7,"Detalle de Cirug\xEDa"),t()(),e(8,"div",7)(9,"button",8),f("click",function(){return d.volverAtras()}),p(),e(10,"svg",9),u(11,"path",10),t(),n(12," Volver "),t()()(),x(),e(13,"div",11),_(14,N,4,2)(15,z,4,0),t()()(),_(16,G,9,0,"div",12)(17,$,13,1,"div",12)(18,X,134,29,"main",12),t()),a&2&&(o(14),g(d.cirugia()?14:15),o(2),g(d.loading()?16:d.error()?17:d.cirugia()?18:-1))},dependencies:[V],encapsulation:2})};export{L as CirugiaDetailComponent};
