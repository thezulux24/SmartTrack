import{a as H}from"./chunk-TJFSOEB2.js";import{a as A}from"./chunk-MMP7OOCF.js";import{o as j,p as z,v as $}from"./chunk-EAN4GLH2.js";import"./chunk-KXFMV5OZ.js";import{$ as p,Aa as S,B as I,E as x,Fa as D,G as r,J as E,Ka as O,Ma as B,N as g,Q as s,R as T,T as V,Z as t,_ as i,aa as C,ba as m,ca as c,ea as l,fa as v,ga as h,ha as F,na as y,oa as M,u as L,w as u,x as f,y as b,z as w,za as N}from"./chunk-6SF67QVY.js";import"./chunk-LJ5XHLMQ.js";import"./chunk-FK42CRUA.js";function K(o,n){if(o&1&&(t(0,"p",17),l(1),i()),o&2){let e=c(2);r(),h(" ",e.clientName," ")}}function Q(o,n){if(o&1){let e=C();t(0,"div",1),m("click",function(){u(e);let d=c();return f(d.onBackdropClick())}),p(1,"div",2),t(2,"div",3),m("click",function(d){return u(e),f(d.stopPropagation())}),t(3,"div",4),p(4,"div",5),t(5,"div",6)(6,"div",7)(7,"div",8),p(8,"img",9),i()(),t(9,"div",10)(10,"div",11)(11,"div",12)(12,"h2",13),l(13),i(),g(14,K,2,1,"p",14),i(),t(15,"div",15)(16,"button",16),m("click",function(){u(e);let d=c();return f(d.onConfirm())}),l(17," Eliminar Cliente "),i(),t(18,"button",16),m("click",function(){u(e);let d=c();return f(d.onCancel())}),l(19," Volver "),i()()()()()()()()}if(o&2){let e=c();r(4),T("background-image","url(/02.jpg)"),r(9),h(" ",e.title," "),r(),s("ngIf",e.clientName)}}var k=class o{isOpen=!1;title="\xBFEst\xE1 seguro/a de eliminar al cliente?";clientName="";confirm=new I;cancel=new I;onBackdropClick(){this.cancel.emit()}onConfirm(){this.confirm.emit()}onCancel(){this.cancel.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=E({type:o,selectors:[["app-cliente-confirm-dialog"]],inputs:{isOpen:"isOpen",title:"title",clientName:"clientName"},outputs:{confirm:"confirm",cancel:"cancel"},decls:1,vars:1,consts:[["class","fixed inset-0 z-50 flex items-center justify-center p-4",3,"click",4,"ngIf"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4",3,"click"],[1,"absolute","inset-0","bg-black/50","backdrop-blur-sm"],[1,"relative","z-10","w-full","max-w-md",3,"click"],[1,"relative","min-h-[400px]","bg-gradient-to-b","from-[#10284C]","via-[#1a4d5c]","to-[#0098A8]","rounded-lg","overflow-hidden"],[1,"absolute","inset-0","bg-cover","bg-center","opacity-10"],[1,"relative","z-10","flex","flex-col","h-full","min-h-[400px]"],[1,"flex","items-center","p-6"],[1,"flex","items-center","gap-2"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-8","brightness-0","invert"],[1,"flex-1","flex","items-center","justify-center","px-6","pb-6"],[1,"w-full","max-w-sm","bg-[#10284C]/90","backdrop-blur-sm","rounded-lg","p-8","space-y-6"],[1,"space-y-2"],[1,"text-2xl","font-bold","text-[#CBDD00]","text-center","leading-tight"],["class","text-[#CBDD00] text-center text-lg font-semibold",4,"ngIf"],[1,"space-y-3"],[1,"w-full","bg-[#CBDD00]","hover:bg-[#b5c700]","text-[#10284C]","font-semibold","text-base","h-12","rounded-lg","transition-colors",3,"click"],[1,"text-[#CBDD00]","text-center","text-lg","font-semibold"]],template:function(e,a){e&1&&g(0,Q,20,4,"div",0),e&2&&s("ngIf",a.isOpen)},dependencies:[D,S],styles:["[_nghost-%COMP%]{display:contents}"]})};var U=()=>["/internal"],q=()=>["/internal/clientes/nuevo"],W=o=>["/internal/clientes/editar",o];function X(o,n){o&1&&(t(0,"div",6)(1,"div",7)(2,"div",8),p(3,"div",9)(4,"div",10),i(),t(5,"p",11),l(6,"Cargando clientes..."),i()()())}function Y(o,n){if(o&1){let e=C();t(0,"div",12)(1,"div",13)(2,"div",14),b(),t(3,"svg",15),p(4,"path",16),i(),w(),t(5,"p",17),l(6),i()(),t(7,"button",18),m("click",function(){u(e);let d=c();return f(d.loadClientes())}),l(8," Reintentar "),i()()()}if(o&2){let e=c();r(6),v(e.error())}}function Z(o,n){if(o&1&&(t(0,"div")(1,"p",63),l(2,"Email"),i(),t(3,"p",55),l(4),i()()),o&2){let e=c().$implicit;r(4),v(e.email)}}function ee(o,n){if(o&1&&(t(0,"div")(1,"p",63),l(2,"Tel\xE9fono"),i(),t(3,"p",55),l(4),i()()),o&2){let e=c().$implicit;r(4),v(e.telefono)}}function te(o,n){if(o&1&&(t(0,"div")(1,"p",63),l(2,"Ciudad"),i(),t(3,"p",55),l(4),i()()),o&2){let e=c().$implicit;r(4),v(e.ciudad)}}function ie(o,n){if(o&1&&(t(0,"div")(1,"p",63),l(2,"Fecha de Nacimiento"),i(),t(3,"p",55),l(4),i()()),o&2){let e=c().$implicit,a=c(2);r(4),v(a.formatFecha(e.fecha_nacimiento))}}function ne(o,n){if(o&1&&(t(0,"div",64)(1,"p",63),l(2,"Observaciones"),i(),t(3,"p",65),l(4),i()()),o&2){let e=c().$implicit;r(4),v(e.observaciones)}}function oe(o,n){if(o&1){let e=C();t(0,"div",47)(1,"div",48)(2,"div",49)(3,"div",50)(4,"h3",51),l(5),i(),t(6,"span",52),l(7),i()(),t(8,"div",53)(9,"p",54),l(10),i()()(),t(11,"p",55),l(12),i()(),t(13,"div",56)(14,"div",57),g(15,Z,5,1,"div",3)(16,ee,5,1,"div",3),i(),t(17,"div",57),g(18,te,5,1,"div",3)(19,ie,5,1,"div",3),i(),g(20,ne,5,1,"div",58),t(21,"div",59)(22,"div",60)(23,"button",61),l(24," Editar "),i(),t(25,"button",62),m("click",function(){let d=u(e).$implicit,_=c(2);return f(_.deleteCliente(d))}),l(26," Eliminar "),i()()()()()}if(o&2){let e=n.$implicit,a=c(2);r(5),F(" ",e.nombre," ",e.apellido," "),r(),V(a.getEstadoBadgeClass(e.estado)),r(),h(" ",a.getEstadoLabel(e.estado)," "),r(3),v(a.formatFecha(e.created_at)),r(2),v(e.documento_numero),r(3),s("ngIf",e.email),r(),s("ngIf",e.telefono),r(2),s("ngIf",e.ciudad),r(),s("ngIf",e.fecha_nacimiento),r(),s("ngIf",e.observaciones),r(3),s("routerLink",M(13,W,e.id))}}function le(o,n){o&1&&(t(0,"div",66)(1,"div",67),l(2,"\u{1F465}"),i(),t(3,"h3",68),l(4,"No se encontraron clientes"),i(),t(5,"p",69),l(6,"Intenta ajustar los filtros de b\xFAsqueda"),i(),t(7,"button",70),l(8," Crear Primer Cliente "),i()()),o&2&&(r(7),s("routerLink",y(1,q)))}function re(o,n){if(o&1){let e=C();t(0,"div")(1,"div",19),p(2,"div",20),t(3,"div",21)(4,"div",22)(5,"div",23)(6,"div"),p(7,"img",24),i(),t(8,"div")(9,"button",25),b(),t(10,"svg",26),p(11,"path",27),i()()()(),w(),t(12,"div",28)(13,"h1",29),l(14,"Clientes"),i(),t(15,"p",30),l(16,"Gestiona la informaci\xF3n de tus clientes"),i()(),t(17,"button",31),l(18," + Nuevo Cliente "),i(),t(19,"div",32)(20,"h3",33),l(21,"Filtros"),i(),t(22,"div",34)(23,"div")(24,"label",35),l(25,"Buscar"),i(),t(26,"div",19)(27,"input",36),m("input",function(d){u(e);let _=c();return f(_.onSearchChange(d))}),i(),b(),t(28,"svg",37),p(29,"path",38),i()()(),w(),t(30,"div")(31,"label",35),l(32,"Estado"),i(),t(33,"select",39),m("change",function(d){u(e);let _=c();return f(_.onEstadoChange(d))}),t(34,"option",40),l(35,"Todos los estados"),i(),t(36,"option",41),l(37,"Activo"),i(),t(38,"option",42),l(39,"Inactivo"),i(),t(40,"option",43),l(41,"Suspendido"),i()()()()()()()(),t(42,"div",44)(43,"div",22)(44,"div",34),g(45,oe,27,15,"div",45),i(),g(46,le,9,2,"div",46),i()()()}if(o&2){let e=c();r(9),s("routerLink",y(6,U)),r(8),s("routerLink",y(7,q)),r(10),s("value",e.searchTerm()),r(6),s("value",e.selectedEstado()),r(12),s("ngForOf",e.filteredClientes()),r(),s("ngIf",e.filteredClientes().length===0)}}var P=class o{clientesService=L(A);clientes=x([]);filteredClientes=x([]);loading=x(!1);error=x(null);searchTerm=x("");selectedEstado=x("");showConfirmDialog=x(!1);showSuccessDialog=x(!1);clienteToDelete=x(null);ngOnInit(){this.loadClientes()}loadClientes(){this.loading.set(!0),this.error.set(null),this.clientesService.getClientes().subscribe({next:n=>{this.clientes.set(n),this.applyFilters(),this.loading.set(!1)},error:n=>{this.error.set("Error al cargar los clientes"),this.loading.set(!1),console.error("Error:",n)}})}onSearchChange(n){let e=n.target;this.searchTerm.set(e.value),this.applyFilters()}onEstadoChange(n){let e=n.target;this.selectedEstado.set(e.value),this.applyFilters()}applyFilters(){let n=this.clientes();if(this.searchTerm()){let e=this.searchTerm().toLowerCase();n=n.filter(a=>a.nombre.toLowerCase().includes(e)||a.apellido.toLowerCase().includes(e)||a.documento_numero.toLowerCase().includes(e)||a.email&&a.email.toLowerCase().includes(e))}this.selectedEstado()&&(n=n.filter(e=>e.estado===this.selectedEstado())),this.filteredClientes.set(n)}deleteCliente(n){this.clienteToDelete.set(n),this.showConfirmDialog.set(!0)}onConfirmDelete(){let n=this.clienteToDelete();!n||!n.id||(this.showConfirmDialog.set(!1),this.clientesService.deleteCliente(n.id).subscribe({next:()=>{this.showSuccessDialog.set(!0),this.loadClientes()},error:e=>{this.error.set("Error al eliminar el cliente"),console.error("Error:",e),this.clienteToDelete.set(null)}}))}onCancelDelete(){this.showConfirmDialog.set(!1),this.clienteToDelete.set(null)}onSuccessDialogClose(){this.showSuccessDialog.set(!1),this.clienteToDelete.set(null)}getClienteNombreCompleto(){let n=this.clienteToDelete();return n?`${n.nombre} ${n.apellido}`:""}getEstadoBadgeClass(n){switch(n){case"activo":return"bg-green-500 text-white font-medium";case"inactivo":return"bg-gray-400 text-white font-medium";case"suspendido":return"bg-fuchsia-600 text-white font-medium";default:return"bg-gray-400 text-white font-medium"}}getEstadoLabel(n){switch(n){case"activo":return"Activo";case"inactivo":return"Inactivo";case"suspendido":return"Suspendido";default:return n||"Sin estado"}}formatFecha(n){return n?new Date(n).toLocaleDateString("es-EC"):"-"}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=E({type:o,selectors:[["app-clientes-list"]],decls:6,vars:8,consts:[[1,"min-h-screen","bg-white"],["class","flex items-center justify-center min-h-screen",4,"ngIf"],["class","flex items-center justify-center min-h-screen px-4",4,"ngIf"],[4,"ngIf"],[3,"confirm","cancel","isOpen","clientName"],[3,"close","isOpen","title","showCrearOtroButton"],[1,"flex","items-center","justify-center","min-h-screen"],[1,"text-center"],[1,"animate-pulse","space-y-4"],[1,"h-4","bg-gray-200","rounded","w-64","mx-auto"],[1,"h-4","bg-gray-200","rounded","w-48","mx-auto"],[1,"text-sm","text-gray-500","mt-4"],[1,"flex","items-center","justify-center","min-h-screen","px-4"],[1,"bg-white","rounded-xl","shadow-lg","p-8","max-w-md","text-center"],[1,"text-red-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-lg"],["type","button",1,"mt-6","w-full","bg-red-600","hover:bg-red-700","text-white","px-6","py-3","rounded-lg","font-medium",3,"click"],[1,"relative"],[1,"absolute","top-0","left-0","w-full","bg-[#10284C]",2,"height","520px","clip-path","polygon(0 0, 100% 0, 100% 60%, 0 90%)"],[1,"relative","z-10","px-4","py-6"],[1,"max-w-lg","mx-auto"],[1,"flex","justify-between","items-center","mb-8"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-8","brightness-0","invert"],[1,"w-10","h-10","bg-[#C8D900]","rounded-lg","flex","items-center","justify-center","shadow-lg",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-[#10284C]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],[1,"text-center","mb-8"],[1,"text-3xl","font-bold","text-[#C8D900]","mb-2"],[1,"text-white/90","text-sm"],[1,"w-full","bg-[#C8D900]","hover:bg-[#B8C900]","text-[#10284C]","font-bold","py-4","rounded-2xl","shadow-lg","transition-colors","mb-6",3,"routerLink"],[1,"bg-[#0098A8]","rounded-2xl","p-5","shadow-lg"],[1,"text-[#10284C]","font-bold","text-lg","mb-4"],[1,"space-y-4"],[1,"block","text-[#10284C]","text-sm","mb-2","font-medium"],["type","text","placeholder","Nombre, documento, email...",1,"w-full","px-4","py-2.5","bg-[#0098A8]/50","border","border-white/30","rounded-lg","text-white","placeholder-white/60","focus:outline-none","focus:ring-2","focus:ring-white/50",3,"input","value"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"absolute","right-3","top-1/2","-translate-y-1/2","w-5","h-5","text-white/60"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"w-full","px-4","py-2.5","bg-[#0098A8]/50","border","border-white/30","rounded-lg","text-white","focus:outline-none","focus:ring-2","focus:ring-white/50",3,"change","value"],["value",""],["value","activo"],["value","inactivo"],["value","suspendido"],[1,"px-4","pb-8"],["class","bg-white rounded-2xl border-2 border-gray-200 overflow-hidden shadow-md hover:shadow-lg transition-shadow",4,"ngFor","ngForOf"],["class","bg-white rounded-2xl border-2 border-gray-200 p-8 text-center shadow-md",4,"ngIf"],[1,"bg-white","rounded-2xl","border-2","border-gray-200","overflow-hidden","shadow-md","hover:shadow-lg","transition-shadow"],[1,"p-4","border-b","border-gray-200"],[1,"flex","justify-between","items-start","mb-3"],[1,"flex","items-center","space-x-2","flex-wrap","gap-2"],[1,"text-lg","font-bold","text-[#10284C]"],[1,"px-3","py-1","rounded-full","text-xs","font-medium"],[1,"text-right"],[1,"text-sm","text-gray-600"],[1,"text-sm","font-medium","text-[#10284C]"],[1,"p-4","space-y-3"],[1,"grid","grid-cols-2","gap-3"],["class","border-t border-gray-200 pt-3",4,"ngIf"],[1,"space-y-2","pt-3"],[1,"grid","grid-cols-2","gap-2"],[1,"bg-[#10284C]","hover:bg-[#10284C]/90","text-white","font-medium","py-2.5","rounded-xl","transition-colors",3,"routerLink"],[1,"bg-[#CBDD00]","hover:bg-[#B8C900]","text-[#10284C]","font-medium","py-2.5","rounded-xl","transition-colors",3,"click"],[1,"text-xs","text-gray-500","mb-1"],[1,"border-t","border-gray-200","pt-3"],[1,"text-sm","text-gray-700"],[1,"bg-white","rounded-2xl","border-2","border-gray-200","p-8","text-center","shadow-md"],[1,"text-4xl","mb-4"],[1,"text-lg","font-bold","text-[#10284C]","mb-2"],[1,"text-gray-600","mb-4"],[1,"bg-[#C8D900]","hover:bg-[#B8C900]","text-[#10284C]","font-bold","px-6","py-3","rounded-xl","transition-colors",3,"routerLink"]],template:function(e,a){e&1&&(t(0,"div",0),g(1,X,7,0,"div",1)(2,Y,9,1,"div",2)(3,re,47,8,"div",3),i(),t(4,"app-cliente-confirm-dialog",4),m("confirm",function(){return a.onConfirmDelete()})("cancel",function(){return a.onCancelDelete()}),i(),t(5,"app-cliente-success-dialog",5),m("close",function(){return a.onSuccessDialogClose()}),i()),e&2&&(r(),s("ngIf",a.loading()),r(),s("ngIf",!a.loading()&&a.error()),r(),s("ngIf",!a.loading()&&!a.error()),r(),s("isOpen",a.showConfirmDialog())("clientName",a.getClienteNombreCompleto()),r(),s("isOpen",a.showSuccessDialog())("title",`Cliente eliminado
exitosamente`)("showCrearOtroButton",!1))},dependencies:[D,N,S,B,O,$,j,z,k,H],encapsulation:2})};export{P as ClientesListComponent};
