import{a as pe,b as q,c as P}from"./chunk-K75DD3LV.js";import{a as ue}from"./chunk-2VQOYCKJ.js";import"./chunk-MEQI4YBX.js";import{a as Y,b as y,c as W,d as X,e as B,h as Z,i as ee,k as te,l as ie,m as oe,n as ne,o as ae,p as re,q as se,s as le,v as ce,w as de,y as me}from"./chunk-ZJDURMG7.js";import{$ as d,Aa as T,B as O,Ca as Q,E as w,Ea as K,G as l,J as I,Ja as V,Ma as U,N as v,Oa as J,Q as C,R as z,T as L,U as x,V as R,X as D,Y as M,Z as i,_ as o,aa as j,ba as u,ca as m,f as F,ha as r,ia as b,ja as S,ka as N,la as $,u as E,w as p,x as g,y as h,z as f}from"./chunk-OA5U47VA.js";import"./chunk-LJ5XHLMQ.js";import{h as H}from"./chunk-FK42CRUA.js";function _e(s,t){if(s&1&&(i(0,"p",17),r(1),o()),s&2){let e=m(2);l(),S(" ",e.hojaNumero," ")}}function Ce(s,t){if(s&1){let e=j();i(0,"button",21),u("click",function(){p(e);let n=m(2);return g(n.onCrearOtra())}),r(1," Crear otra hoja "),o()}}function we(s,t){if(s&1){let e=j();i(0,"div",1),u("click",function(){p(e);let n=m();return g(n.onBackdropClick())}),d(1,"div",2),i(2,"div",3),u("click",function(n){return p(e),g(n.stopPropagation())}),i(3,"div",4),d(4,"div",5),i(5,"div",6)(6,"div",7)(7,"div",8),d(8,"img",9),o()(),i(9,"div",10)(10,"div",11)(11,"div",12)(12,"div",13),h(),i(13,"svg",14),d(14,"path",15),o()()(),f(),i(15,"h2",16),r(16),o(),v(17,_e,2,1,"p",17),i(18,"div",18),v(19,Ce,2,0,"button",19),i(20,"button",20),u("click",function(){p(e);let n=m();return g(n.onVolver())}),r(21," Volver a hojas de gasto "),o()()()()()()()()}if(s&2){let e=m();l(4),z("background-image","url(/02.jpg)"),l(12),S(" ",e.title," "),l(),x(e.hojaNumero?17:-1),l(2),C("ngIf",e.showCrearOtraButton),l(),L(e.showCrearOtraButton?"w-full bg-white/10 hover:bg-white/20 text-white font-semibold text-base h-12 rounded-lg transition-colors border border-white/30":"w-full bg-[#CBDD00] hover:bg-[#b5c700] text-[#10284C] font-semibold text-base h-12 rounded-lg transition-colors")}}var A=class s{isOpen=!1;title=`Hoja de gasto
creada
exitosamente`;hojaNumero="";showCrearOtraButton=!1;close=new O;crearOtra=new O;onBackdropClick(){this.close.emit()}onVolver(){this.close.emit()}onCrearOtra(){this.crearOtra.emit()}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=I({type:s,selectors:[["app-hoja-gasto-success-dialog"]],inputs:{isOpen:"isOpen",title:"title",hojaNumero:"hojaNumero",showCrearOtraButton:"showCrearOtraButton"},outputs:{close:"close",crearOtra:"crearOtra"},decls:1,vars:1,consts:[["class","fixed inset-0 z-50 flex items-center justify-center p-4",3,"click",4,"ngIf"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4",3,"click"],[1,"absolute","inset-0","bg-black/50","backdrop-blur-sm"],[1,"relative","z-10","w-full","max-w-md",3,"click"],[1,"relative","min-h-[500px]","bg-gradient-to-b","from-[#10284C]","via-[#1a4d5c]","to-[#0098A8]","rounded-lg","overflow-hidden"],[1,"absolute","inset-0","bg-cover","bg-center","opacity-10"],[1,"relative","z-10","flex","flex-col","h-full","min-h-[500px]"],[1,"flex","items-center","p-6"],[1,"flex","items-center","gap-2"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-8","brightness-0","invert"],[1,"flex-1","flex","items-center","justify-center","px-6"],[1,"w-full","max-w-sm","bg-[#10284C]/90","backdrop-blur-sm","rounded-lg","p-8","space-y-4"],[1,"flex","justify-center","mb-4"],[1,"w-16","h-16","bg-[#CBDD00]","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-[#10284C]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","3","d","M5 13l4 4L19 7"],[1,"text-2xl","font-bold","text-[#CBDD00]","text-center","leading-tight"],[1,"text-white","text-center","text-sm"],[1,"space-y-3","pt-4"],["class","w-full bg-[#CBDD00] hover:bg-[#b5c700] text-[#10284C] font-semibold text-base h-12 rounded-lg transition-colors",3,"click",4,"ngIf"],[3,"click"],[1,"w-full","bg-[#CBDD00]","hover:bg-[#b5c700]","text-[#10284C]","font-semibold","text-base","h-12","rounded-lg","transition-colors",3,"click"]],template:function(e,a){e&1&&v(0,we,22,7,"div",0),e&2&&C("ngIf",a.isOpen)},dependencies:[V,K],styles:["[_nghost-%COMP%]{display:contents}"]})};var he=(s,t)=>t.id;function ye(s,t){s&1&&(i(0,"div",34)(1,"div",39),d(2,"div",40),o(),i(3,"p",41),r(4,"Cargando datos..."),o()())}function je(s,t){if(s&1){let e=j();i(0,"div",35),h(),i(1,"svg",42),d(2,"path",43),o(),f(),i(3,"p",44),r(4),o(),i(5,"button",45),u("click",function(){p(e);let n=m();return g(n.loadData())}),r(6," Reintentar "),o()()}if(s&2){let e=m();l(4),b(e.error())}}function Se(s,t){if(s&1&&(i(0,"div",47)(1,"div",73)(2,"span",74),r(3,"Estado actual:"),o(),i(4,"span",75),r(5),o()()()),s&2){let e=m(2);l(4),C("ngClass",e.getEstadoInfo(e.hojaGasto().estado).color),l(),S(" ",e.getEstadoInfo(e.hojaGasto().estado).label," ")}}function Ee(s,t){if(s&1&&(i(0,"option",55),r(1),o()),s&2){let e=t.$implicit;C("value",e.id),l(),$(" ",e.numero_cirugia," - ",e.cliente.nombre," ",e.cliente.apellido," ")}}function Ge(s,t){s&1&&(i(0,"div",56),r(1," Debe seleccionar una cirug\xEDa "),o())}function ke(s,t){if(s&1&&(i(0,"div",76)(1,"div",77)(2,"span",78),r(3,"Cliente:"),o(),i(4,"span",79),r(5),o()(),i(6,"div",77)(7,"span",78),r(8,"T\xE9cnico:"),o(),i(9,"span",79),r(10),o()(),i(11,"div",77)(12,"span",78),r(13,"Kit:"),o(),i(14,"span",79),r(15),o()(),i(16,"div",77)(17,"span",78),r(18,"Fecha:"),o(),i(19,"span",79),r(20),o()()()),s&2){let e=m().$implicit;l(5),N("",e.cliente.nombre," ",e.cliente.apellido,""),l(5),N("",e.tecnico.nombre," ",e.tecnico.apellido,""),l(5),b(e.kit.nombre),l(5),b(e.fecha_cirugia)}}function He(s,t){if(s&1&&v(0,ke,21,6,"div",76),s&2){let e,a=t.$implicit,n=m(3);x(a.id===((e=n.form.get("cirugiaId"))==null?null:e.value)?0:-1)}}function Fe(s,t){if(s&1&&(i(0,"div",57),D(1,He,1,1,null,null,he),o()),s&2){let e=m(2);l(),M(e.cirugias())}}function Ie(s,t){if(s&1){let e=j();i(0,"div",65)(1,"div",80)(2,"span",81),r(3),o(),i(4,"button",82),u("click",function(){let n=p(e).$index,c=m(2);return g(c.removeItem(n))}),h(),i(5,"svg",83),d(6,"path",84),o()()(),f(),i(7,"div",85)(8,"div")(9,"label",86),r(10,"Descripci\xF3n *"),o(),d(11,"input",87),o(),i(12,"div")(13,"label",86),r(14,"Categor\xEDa *"),o(),i(15,"select",88)(16,"option",89),r(17),o(),i(18,"option",90),r(19),o(),i(20,"option",91),r(21),o()()(),i(22,"div",92)(23,"div")(24,"label",86),r(25,"Cantidad *"),o(),i(26,"input",93),u("input",function(){let n=p(e).$index,c=m(2);return g(c.onItemQuantityOrPriceChange(n))}),o()(),i(27,"div")(28,"label",86),r(29,"Precio Unit. *"),o(),i(30,"input",94),u("input",function(){let n=p(e).$index,c=m(2);return g(c.onItemQuantityOrPriceChange(n))}),o()()(),i(31,"div")(32,"label",86),r(33,"Subtotal"),o(),i(34,"div",95),r(35),o()(),i(36,"div")(37,"label",86),r(38,"Observaciones"),o(),d(39,"textarea",96),o()()()}if(s&2){let e,a=t.$implicit,n=t.$index,c=m(2);C("formGroupName",n),l(3),S("Item ",n+1,""),l(14),b(c.getCategoriaInfo("productos").label),l(2),b(c.getCategoriaInfo("transporte").label),l(2),b(c.getCategoriaInfo("otros").label),l(14),S(" ",c.formatMoneda(((e=a.get("precio_total"))==null?null:e.value)||0)," ")}}function De(s,t){s&1&&(i(0,"div",66),h(),i(1,"svg",97),d(2,"path",98)(3,"path",99),o(),f(),i(4,"p"),r(5,"No hay items agregados"),o(),i(6,"p",100),r(7,"Seleccione una cirug\xEDa para cargar autom\xE1ticamente los items del kit"),o()())}function Me(s,t){if(s&1&&(i(0,"div",34)(1,"h3",48),h(),i(2,"svg",101),d(3,"path",102),o(),r(4," Resumen de Totales "),o(),f(),i(5,"div",103)(6,"div",73)(7,"span",104),r(8,"Productos M\xE9dicos:"),o(),i(9,"span",105),r(10),o()(),i(11,"div",73)(12,"span",106),r(13,"Transporte:"),o(),i(14,"span",107),r(15),o()(),i(16,"div",73)(17,"span",108),r(18,"Otros:"),o(),i(19,"span",109),r(20),o()(),d(21,"hr",110),i(22,"div",73)(23,"span",111),r(24,"Total General:"),o(),i(25,"span",111),r(26),o()()()()),s&2){let e=m(2);l(10),b(e.formatMoneda(e.calculateTotalByCategory("productos"))),l(5),b(e.formatMoneda(e.calculateTotalByCategory("transporte"))),l(5),b(e.formatMoneda(e.calculateTotalByCategory("otros"))),l(6),b(e.formatMoneda(e.calculateTotal()))}}function Te(s,t){if(s&1&&(i(0,"span"),r(1),o()),s&2){let e=m(2);l(),b(e.submitButtonText())}}function Ve(s,t){s&1&&(i(0,"span",72),h(),i(1,"svg",112),d(2,"circle",113)(3,"path",114),o(),r(4," Guardando... "),o())}function Ae(s,t){if(s&1){let e=j();i(0,"form",46),u("ngSubmit",function(){p(e);let n=m();return g(n.onSubmit())}),v(1,Se,6,2,"div",47),i(2,"div",34)(3,"h3",48),h(),i(4,"svg",49),d(5,"path",50),o(),r(6," Informaci\xF3n de Cirug\xEDa "),o(),f(),i(7,"div",51)(8,"div")(9,"label",52),r(10," Seleccionar Cirug\xEDa * "),o(),i(11,"select",53),u("change",function(n){p(e);let c=m();return g(c.onCirugiaChange(n.target.value))}),i(12,"option",54),r(13,"-- Seleccione una cirug\xEDa --"),o(),D(14,Ee,2,4,"option",55,he),o(),v(16,Ge,2,0,"div",56),o(),v(17,Fe,3,0,"div",57),o()(),i(18,"div",34)(19,"div",58)(20,"h3",59),h(),i(21,"svg",49),d(22,"path",60),o(),r(23," Items Utilizados "),o(),f(),i(24,"button",61),u("click",function(){p(e);let n=m();return g(n.addItem())}),h(),i(25,"svg",62),d(26,"path",63),o(),r(27," Agregar Item "),o()(),f(),i(28,"div",64),D(29,Ie,40,6,"div",65,R),v(31,De,8,0,"div",66),o()(),v(32,Me,27,4,"div",34),i(33,"div",34)(34,"h3",48),h(),i(35,"svg",49),d(36,"path",67),o(),r(37," Observaciones Generales "),o(),f(),d(38,"textarea",68),o(),i(39,"div",69)(40,"button",70),u("click",function(){p(e);let n=m();return g(n.volver())}),r(41," Cancelar "),o(),i(42,"button",71),v(43,Te,2,1,"span")(44,Ve,5,0,"span",72),o()()()}if(s&2){let e,a,n=m();C("formGroup",n.form),l(),x(n.isEditMode()&&n.hojaGasto()?1:-1),l(10),C("disabled",n.isEditMode()),l(3),M(n.cirugias()),l(2),x((e=n.form.get("cirugiaId"))!=null&&e.invalid&&((e=n.form.get("cirugiaId"))!=null&&e.touched)?16:-1),l(),x((a=n.form.get("cirugiaId"))!=null&&a.value?17:-1),l(12),M(n.itemsFormArray.controls),l(2),x(n.itemsFormArray.length===0?31:-1),l(),x(n.itemsFormArray.length>0?32:-1),l(10),C("disabled",n.form.invalid||n.saving()),l(),x(n.saving()?-1:43),l(),x(n.saving()?44:-1)}}var ge=class s{fb=E(de);router=E(J);route=E(U);hojaGastoService=E(pe);cirugiasService=E(ue);loading=w(!1);saving=w(!1);error=w(null);showSuccessDialog=w(!1);successHojaNumero=w("");hojaGasto=w(null);cirugias=w([]);kitItems=w([]);isEditMode=T(()=>!!this.hojaGasto()||!!this.route.snapshot.paramMap.get("id"));pageTitle=T(()=>this.isEditMode()?"Editar Hoja de Gasto":"Nueva Hoja de Gasto");submitButtonText=T(()=>this.isEditMode()?"Actualizar Hoja":"Crear Hoja");form;ESTADOS_CONFIG=q;CATEGORIAS_CONFIG=P;constructor(){this.form=this.fb.group({cirugiaId:["",y.required],observaciones:[""],items:this.fb.array([])})}ngOnInit(){this.loadData()}get itemsFormArray(){return this.form.get("items")}loadData(){return H(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let t=this.route.snapshot.paramMap.get("id");if(console.log("\u{1F4CB} ID de hoja desde ruta:",t),console.log("\u{1F4CB} isEditMode:",this.isEditMode()),t){console.log("\u{1F504} MODO EDICI\xD3N: Cargando hoja de gasto...");let e=yield F(this.hojaGastoService.getHojaGasto(t));if(e)console.log("\u2705 Hoja de gasto cargada:",e),this.hojaGasto.set(e),this.populateForm(e);else{console.error("\u274C No se encontr\xF3 la hoja de gasto"),this.error.set("No se encontr\xF3 la hoja de gasto");return}}else console.log("\u{1F195} MODO CREACI\xD3N: Nueva hoja de gasto");yield this.loadCirugias()}catch(t){console.error("Error cargando datos:",t),this.error.set("Error al cargar los datos. Por favor, int\xE9ntelo de nuevo.")}finally{this.loading.set(!1)}})}loadCirugias(){return H(this,null,function*(){try{console.log("\u{1F504} Cargando cirug\xEDas con kits desde la base de datos...");let t=yield F(this.cirugiasService.getCirugiasConKits());if(console.log("\u2705 Cirug\xEDas cargadas:",t.length,t),console.log("\u{1F50D} Modo edici\xF3n:",this.isEditMode(),"Hoja actual:",this.hojaGasto()?.id),this.isEditMode())console.log("\u2705 Modo EDICI\xD3N: Mostrando todas las cirug\xEDas"),this.cirugias.set(t),t.length===0&&(console.warn("\u26A0\uFE0F No se encontraron cirug\xEDas con kits"),this.error.set("No hay cirug\xEDas con kits disponibles."));else{console.log("\u{1F50D} Modo CREACI\xD3N: Filtrando cirug\xEDas que ya tienen hojas de gasto...");let e=yield F(this.hojaGastoService.getHojasGasto({})),a=new Set(e.map(c=>c.cirugia_id));console.log("\u{1F4CB} Cirug\xEDas que ya tienen hoja de gasto:",Array.from(a));let n=t.filter(c=>!a.has(c.id));console.log("\u2705 Cirug\xEDas disponibles (sin hoja de gasto):",n.length),this.cirugias.set(n),n.length===0&&(console.warn("\u26A0\uFE0F No hay cirug\xEDas disponibles sin hoja de gasto"),this.error.set("No hay cirug\xEDas disponibles. Todas las cirug\xEDas completadas ya tienen una hoja de gasto asignada."))}}catch(t){console.error("\u274C Error cargando cirug\xEDas con kits:",t),this.error.set("Error al cargar las cirug\xEDas disponibles. Por favor, int\xE9ntelo de nuevo.")}})}populateForm(t){for(this.form.patchValue({cirugiaId:t.cirugia_id,observaciones:t.observaciones||""});this.itemsFormArray.length!==0;)this.itemsFormArray.removeAt(0);(t.items||t.hoja_gasto_items||[]).forEach(a=>{this.itemsFormArray.push(this.createItemFormGroup(a))})}onCirugiaChange(t){let e=this.cirugias().find(a=>a.id===t);e&&(this.kitItems.set(e.kit.items),this.populateItemsFromKit(e.kit.items))}populateItemsFromKit(t){for(;this.itemsFormArray.length!==0;)this.itemsFormArray.removeAt(0);t.forEach(e=>{let a={descripcion:e.nombre,categoria:e.categoria,cantidad:e.cantidad_requerida,precio_unitario:e.precio,precio_total:e.cantidad_requerida*e.precio,observaciones:""};this.itemsFormArray.push(this.createItemFormGroup(a))})}createItemFormGroup(t){let e=t?.descripcion||t?.nombre_producto||"",a=t?.cantidad||t?.cantidad_usada||1,n=t?.precio_total||t?.subtotal||0;return this.fb.group({descripcion:[e,y.required],categoria:[t?.categoria||"productos",y.required],cantidad:[a,[y.required,y.min(0)]],precio_unitario:[t?.precio_unitario||0,[y.required,y.min(0)]],precio_total:[{value:n,disabled:!0}],observaciones:[t?.observaciones||""]})}addItem(){this.itemsFormArray.push(this.createItemFormGroup())}removeItem(t){this.itemsFormArray.removeAt(t)}onItemQuantityOrPriceChange(t){let e=this.itemsFormArray.at(t),a=e.get("cantidad")?.value||0,n=e.get("precio_unitario")?.value||0,c=a*n;e.get("precio_total")?.setValue(c)}calculateTotal(){return this.itemsFormArray.controls.reduce((t,e)=>{let a=e.get("precio_total")?.value||0;return t+a},0)}calculateTotalByCategory(t){return this.itemsFormArray.controls.reduce((e,a)=>{if(a.get("categoria")?.value===t){let n=a.get("precio_total")?.value||0;return e+n}return e},0)}onSubmit(){return H(this,null,function*(){if(this.form.invalid){this.markFormGroupTouched(this.form);return}this.saving.set(!0),this.error.set(null);try{let t=this.form.value,a=(this.cirugias().find(c=>c.id===t.cirugiaId)?.tecnico,"1"),n=t.items.map(c=>({producto_id:null,categoria:c.categoria,descripcion:c.descripcion,cantidad:c.cantidad,precio_unitario:c.precio_unitario,precio_total:c.cantidad*c.precio_unitario,observaciones:c.observaciones||void 0}));if(this.isEditMode()&&this.hojaGasto()){let c={observaciones:t.observaciones,items:n};this.hojaGastoService.updateHojaGasto(this.hojaGasto().id,c).subscribe({next:()=>{console.log("\u2705 Hoja actualizada correctamente"),this.saving.set(!1),this.successHojaNumero.set(this.hojaGasto()?.numero_hoja||"Hoja de Gasto"),this.showSuccessDialog.set(!0)},error:G=>{console.error("\u274C Error actualizando hoja de gasto:",G),this.error.set("Error al actualizar la hoja de gasto: "+(G.message||"Error desconocido")),this.saving.set(!1)}})}else{let c=this.cirugias().find(_=>_.id===t.cirugiaId);if(!c?.tecnico_asignado_id){console.error("\u274C La cirug\xEDa seleccionada no tiene t\xE9cnico asignado"),this.error.set("La cirug\xEDa seleccionada no tiene t\xE9cnico asignado");return}let G={cirugia_id:t.cirugiaId,tecnico_id:c.tecnico_asignado_id,fecha_cirugia:c.fecha_cirugia,observaciones:t.observaciones,items:n};console.log("\u{1F4E4} Enviando createRequest:",G),this.hojaGastoService.createHojaGasto(G).subscribe({next:_=>{console.log("\u2705 Hoja creada:",_),this.saving.set(!1);let k=this.cirugias().find(xe=>xe.id===t.cirugiaId);this.successHojaNumero.set(k?.numero_cirugia||"Hoja de Gasto"),this.showSuccessDialog.set(!0)},error:_=>{console.error("\u274C Error creando hoja de gasto:",_),console.error("\u{1F4CB} Detalle completo:",JSON.stringify(_,null,2));let k="Error al crear la hoja de gasto";_.message&&_.message.includes("Ya existe una hoja de gasto")?k=_.message:_.message&&(k+=": "+_.message),this.error.set(k),this.saving.set(!1)}});return}}catch(t){console.error("Error guardando hoja de gasto:",t),this.error.set("Error al guardar la hoja de gasto. Por favor, int\xE9ntelo de nuevo."),this.saving.set(!1)}})}markFormGroupTouched(t){Object.keys(t.controls).forEach(e=>{let a=t.get(e);a?.markAsTouched(),a instanceof B?this.markFormGroupTouched(a):a instanceof ce&&a.controls.forEach(n=>{n instanceof B&&this.markFormGroupTouched(n)})})}volver(){this.router.navigate(["/internal/hojas-gasto"])}onSuccessDialogClose(){this.showSuccessDialog.set(!1),this.router.navigate(["/internal/hojas-gasto"])}onCrearOtraHoja(){for(this.showSuccessDialog.set(!1),this.form.reset(),this.form.patchValue({cirugiaId:"",observaciones:""});this.itemsFormArray.length!==0;)this.itemsFormArray.removeAt(0);this.kitItems.set([])}getEstadoInfo(t){return q[t]||{label:t,color:"bg-gray-100 text-gray-800",descripcion:""}}getCategoriaInfo(t){return P[t]||{label:t,color:"text-gray-600",icon:""}}formatMoneda(t){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}).format(t)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=I({type:s,selectors:[["app-hoja-gasto-form"]],decls:42,vars:8,consts:[[1,"min-h-screen","relative","overflow-hidden"],[1,"absolute","inset-0","z-0"],[1,"absolute","inset-0","bg-[#10284C]"],["xmlns","http://www.w3.org/2000/svg",1,"absolute","w-full","h-full"],["points","100,20 120,30 120,50 100,60 80,50 80,30","fill","#0098A8","opacity","0.1","transform","scale(1.5)"],["points","750,100 770,110 770,130 750,140 730,130 730,110","fill","#C8D900","opacity","0.09"],["cx","15%","cy","20%","r","100","fill","#0098A8","opacity","0.12"],["cx","80%","cy","15%","r","140","fill","#C8D900","opacity","0.08"],["cx","50%","cy","75%","r","120","fill","#0098A8","opacity","0.1"],["cx","25%","cy","85%","r","80","fill","#C8D900","opacity","0.11"],["points","300,50 350,150 250,150","fill","#0098A8","opacity","0.08"],["points","1100,400 1150,500 1050,500","fill","#C8D900","opacity","0.07"],["x","65%","y","40%","width","140","height","140","fill","#0098A8","opacity","0.09","transform","rotate(45 70 45)"],["x","10%","y","55%","width","100","height","100","fill","#C8D900","opacity","0.08","transform","rotate(30 15 60)"],["x1","0%","y1","25%","x2","100%","y2","30%","stroke","#0098A8","stroke-width","3","opacity","0.1"],["x1","0%","y1","65%","x2","100%","y2","60%","stroke","#C8D900","stroke-width","2","opacity","0.09"],["x1","20%","y1","0%","x2","25%","y2","100%","stroke","#0098A8","stroke-width","2","opacity","0.08"],["x1","75%","y1","0%","x2","80%","y2","100%","stroke","#C8D900","stroke-width","2","opacity","0.07"],["points","600,150 610,170 630,175 610,180 600,200 590,180 570,175 590,170","fill","#0098A8","opacity","0.1"],["points","200,450 210,470 230,475 210,480 200,500 190,480 170,475 190,470","fill","#C8D900","opacity","0.09"],["d","M 900 200 Q 920 220 900 240","stroke","#0098A8","stroke-width","15","fill","none","opacity","0.08"],["d","M 150 600 Q 170 620 150 640","stroke","#C8D900","stroke-width","12","fill","none","opacity","0.09"],[1,"absolute","inset-0","bg-gradient-to-br","from-[#10284C]/60","via-[#10284C]/85","to-[#10284C]/95"],[1,"relative","z-10","px-4","py-6"],[1,"max-w-4xl","mx-auto","space-y-6"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","gap-4"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-10","w-auto","brightness-0","invert"],[1,"px-4","py-2","bg-white/10","text-white","border","border-white/20","rounded-lg","hover:bg-white/20","transition-colors","font-medium","flex","items-center","gap-2","backdrop-blur-sm","active:scale-95",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"hidden","sm:inline"],[1,"text-center"],[1,"text-3xl","sm:text-4xl","font-bold","text-[#C8D900]","mb-2"],[1,"text-white/80","text-sm"],[1,"bg-[#0098A8]/20","backdrop-blur-md","rounded-2xl","border","border-white/20","p-6","shadow-xl"],[1,"bg-[#0098A8]/20","backdrop-blur-md","rounded-2xl","border","border-white/20","p-6","shadow-xl","text-center"],[1,"space-y-6",3,"formGroup"],[1,"h-6"],[3,"close","crearOtra","isOpen","title","hojaNumero","showCrearOtraButton"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-[#C8D900]"],[1,"text-sm","text-white/70","mt-4","text-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-4","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm","text-white","mb-4"],["type","button",1,"px-6","py-2","bg-red-500/20","text-red-300","border","border-red-400/40","rounded-lg","hover:bg-red-500/30","transition-all","font-semibold","active:scale-95",3,"click"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"bg-[#0098A8]/20","backdrop-blur-md","rounded-2xl","border","border-white/20","p-4","shadow-xl"],[1,"text-lg","font-semibold","text-white","mb-4","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-[#C8D900]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"space-y-4"],["for","cirugia",1,"block","text-sm","font-medium","text-white/90","mb-2"],["id","cirugia","formControlName","cirugiaId",1,"w-full","px-3","py-2","bg-[#10284C]/50","border","border-white/20","rounded-lg","text-white","focus:ring-2","focus:ring-[#C8D900]","focus:border-transparent","backdrop-blur-sm","text-sm",3,"change","disabled"],["value",""],[3,"value"],[1,"mt-1","text-xs","text-red-300"],[1,"p-3","bg-[#0098A8]/30","rounded-lg","backdrop-blur-sm","border","border-white/10"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg","font-semibold","text-white","flex","items-center","gap-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["type","button",1,"bg-[#C8D900]","hover:bg-[#d4e820]","text-[#10284C]","px-3","py-2","rounded-lg","text-xs","font-medium","transition-all","active:scale-95",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["formArrayName","items",1,"space-y-4"],[1,"p-4","border","border-white/20","rounded-lg","bg-[#10284C]/40","backdrop-blur-sm",3,"formGroupName"],[1,"text-center","py-8","text-white/70"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"],["formControlName","observaciones","rows","3","placeholder","Observaciones adicionales sobre la hoja de gasto...",1,"w-full","px-3","py-2","text-sm","bg-[#10284C]/50","border","border-white/20","rounded-lg","text-white","focus:ring-2","focus:ring-[#C8D900]","focus:border-transparent","backdrop-blur-sm","resize-none"],[1,"flex","gap-3"],["type","button",1,"flex-1","bg-white/10","text-white","border","border-white/20","px-4","py-3","rounded-lg","font-medium","transition-all","backdrop-blur-sm","hover:bg-white/20","active:scale-95",3,"click"],["type","submit",1,"flex-1","bg-[#C8D900]","hover:bg-[#d4e820]","disabled:bg-gray-500","disabled:cursor-not-allowed","text-[#10284C]","px-4","py-3","rounded-lg","font-bold","transition-all","shadow-xl","active:scale-95",3,"disabled"],[1,"flex","items-center","justify-center"],[1,"flex","justify-between","items-center"],[1,"text-sm","text-white/80"],[1,"inline-flex","px-2","py-1","text-xs","font-semibold","rounded-full",3,"ngClass"],[1,"space-y-2","text-sm"],[1,"flex","justify-between"],[1,"text-white/70"],[1,"font-medium","text-white"],[1,"flex","justify-between","items-start","mb-3"],[1,"text-sm","font-medium","text-white"],["type","button",1,"text-red-400","hover:text-red-300","text-xs",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"grid","grid-cols-1","gap-3"],[1,"block","text-xs","text-white/70","mb-1"],["type","text","formControlName","descripcion","placeholder","Descripci\xF3n del producto o servicio",1,"w-full","px-3","py-2","text-sm","bg-[#10284C]/50","border","border-white/20","rounded-lg","text-white","focus:ring-2","focus:ring-[#C8D900]","focus:border-transparent","backdrop-blur-sm"],["formControlName","categoria",1,"w-full","px-3","py-2","text-sm","bg-[#10284C]/50","border","border-white/20","rounded-lg","text-white","focus:ring-2","focus:ring-[#C8D900]","focus:border-transparent","backdrop-blur-sm"],["value","productos"],["value","transporte"],["value","otros"],[1,"grid","grid-cols-2","gap-2"],["type","number","formControlName","cantidad","min","0","step","1",1,"w-full","px-3","py-2","text-sm","bg-[#10284C]/50","border","border-white/20","rounded-lg","text-white","focus:ring-2","focus:ring-[#C8D900]","focus:border-transparent","backdrop-blur-sm",3,"input"],["type","number","formControlName","precio_unitario","min","0","step","0.01",1,"w-full","px-3","py-2","text-sm","bg-[#10284C]/50","border","border-white/20","rounded-lg","text-white","focus:ring-2","focus:ring-[#C8D900]","focus:border-transparent","backdrop-blur-sm",3,"input"],[1,"w-full","px-3","py-2","text-sm","bg-[#0098A8]/30","border","border-white/20","rounded-lg","text-white","font-semibold"],["formControlName","observaciones","rows","2","placeholder","Observaciones del item",1,"w-full","px-3","py-2","text-sm","bg-[#10284C]/50","border","border-white/20","rounded-lg","text-white","focus:ring-2","focus:ring-[#C8D900]","focus:border-transparent","backdrop-blur-sm","resize-none"],["fill","currentColor","viewBox","0 0 20 20",1,"w-12","h-12","mx-auto","mb-4","text-[#C8D900]/50"],["d","M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"],["fill-rule","evenodd","d","M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6.586A2 2 0 0117.414 13L16 14.414V17a2 2 0 01-2 2H6a2 2 0 01-2-2v-2.586L2.586 13A2 2 0 012 11.414V5z","clip-rule","evenodd"],[1,"text-xs","mt-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-[#C8D900]\\"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"],[1,"space-y-3"],[1,"text-sm","text-blue-300","font-medium"],[1,"font-semibold","text-blue-300"],[1,"text-sm","text-green-300","font-medium"],[1,"font-semibold","text-green-300"],[1,"text-sm","text-gray-300","font-medium"],[1,"font-semibold","text-gray-300"],[1,"border-white/20"],[1,"text-lg","font-bold","text-[#C8D900]"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),h(),i(3,"svg",3),d(4,"polygon",4)(5,"polygon",5)(6,"circle",6)(7,"circle",7)(8,"circle",8)(9,"circle",9)(10,"polygon",10)(11,"polygon",11)(12,"rect",12)(13,"rect",13)(14,"line",14)(15,"line",15)(16,"line",16)(17,"line",17)(18,"polygon",18)(19,"polygon",19)(20,"path",20)(21,"path",21),o()(),f(),d(22,"div",22),o(),i(23,"main",23)(24,"div",24)(25,"div",25),d(26,"img",26),i(27,"button",27),u("click",function(){return a.volver()}),h(),i(28,"svg",28),d(29,"path",29),o(),f(),i(30,"span",30),r(31,"Volver"),o()()(),i(32,"div",31)(33,"h1",32),r(34),o(),i(35,"p",33),r(36,"Complete los detalles de gastos de la cirug\xEDa"),o()(),v(37,ye,5,0,"div",34)(38,je,7,1,"div",35)(39,Ae,45,10,"form",36),d(40,"div",37),o()()(),i(41,"app-hoja-gasto-success-dialog",38),u("close",function(){return a.onSuccessDialogClose()})("crearOtra",function(){return a.onCrearOtraHoja()}),o()),e&2&&(l(34),b(a.pageTitle()),l(3),x(a.loading()?37:-1),l(),x(!a.loading()&&a.error()?38:-1),l(),x(!a.loading()&&!a.error()?39:-1),l(2),C("isOpen",a.showSuccessDialog())("title",a.isEditMode()?`Hoja de gasto
actualizada
exitosamente`:`Hoja de gasto
creada
exitosamente`)("hojaNumero",a.successHojaNumero())("showCrearOtraButton",!a.isEditMode()))},dependencies:[V,Q,me,Z,re,se,Y,ee,ae,W,X,le,te,ne,ie,oe,A],encapsulation:2})};export{ge as HojaGastoFormComponent};
