import{a as p}from"./chunk-FT475XF5.js";import{b as i,k as o,n as u,r as b}from"./chunk-MUJJ6JXK.js";import{a as l,b as c}from"./chunk-FK42CRUA.js";var g=class s{supabase=b(p);getClientes(){return i(this.supabase.client.from("clientes").select("*").order("created_at",{ascending:!1}).then(({data:t,error:e})=>{if(e)throw e;return t||[]}))}getClienteById(t){return i(this.supabase.client.from("clientes").select("*").eq("id",t).single().then(({data:e,error:n})=>{if(n)throw n;return e}))}createCliente(t){return i(this.supabase.getCurrentUserId()).pipe(o(e=>{let n=c(l({},t),{created_by:e,updated_by:e});return i(this.supabase.client.from("clientes").insert([n]).select().single().then(({data:a,error:r})=>{if(r)throw r;return a}))}))}updateCliente(t,e){return i(this.supabase.getCurrentUserId()).pipe(o(n=>{let a=c(l({},e),{updated_by:n});return i(this.supabase.client.from("clientes").update(a).eq("id",t).select().single().then(({data:r,error:d})=>{if(d)throw d;return r}))}))}deleteCliente(t){return i(this.supabase.client.from("clientes").delete().eq("id",t).then(({error:e})=>{if(e)throw e}))}searchClientes(t){return i(this.supabase.client.from("clientes").select("*").or(`nombre.ilike.%${t}%,apellido.ilike.%${t}%,documento_numero.ilike.%${t}%,email.ilike.%${t}%`).order("created_at",{ascending:!1}).then(({data:e,error:n})=>{if(n)throw n;return e||[]}))}getClientesActivos(){return i(this.supabase.client.from("clientes").select("*").eq("estado","activo").order("nombre",{ascending:!0}).then(({data:t,error:e})=>{if(e)throw e;return t||[]}))}static \u0275fac=function(e){return new(e||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};export{g as a};
