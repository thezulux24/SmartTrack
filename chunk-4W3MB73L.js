import{a as K}from"./chunk-WMESQ2UE.js";import{a as G,b as m,c as q,d as D,h as z,j as B,m as P,n as j,o as R,p as H,u as $,w as J}from"./chunk-RXLLN3G3.js";import"./chunk-Q6XZXIU7.js";import{$ as F,E as f,Ea as L,G as o,Ga as M,Ia as V,J as S,Ja as O,La as A,N as s,Q as l,R as x,Y as r,Z as t,_ as d,aa as I,ba as u,da as i,ea as k,fa as c,ma as C,u as g,w as E,x as w,y as b,ya as N,z as _,za as T}from"./chunk-NR6UGQL3.js";import"./chunk-LJ5XHLMQ.js";import{a as y,b as h}from"./chunk-FK42CRUA.js";var U=()=>["/internal/clientes"];function W(n,a){n&1&&(r(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18),d(4,"div",19)(5,"div",20),t(),r(6,"p",21),i(7,"Cargando datos del cliente..."),t()()()())}function X(n,a){if(n&1&&(r(0,"div",59)(1,"div",60),b(),r(2,"svg",61),d(3,"path",62),t(),_(),r(4,"div",63)(5,"p",64),i(6),t()()()()),n&2){let e=u(2);o(6),k(e.error())}}function Y(n,a){if(n&1&&(r(0,"p",65),i(1),t()),n&2){let e=u(2);o(),c(" ",e.getFieldError("nombre")," ")}}function Z(n,a){if(n&1&&(r(0,"p",65),i(1),t()),n&2){let e=u(2);o(),c(" ",e.getFieldError("apellido")," ")}}function ee(n,a){if(n&1&&(r(0,"option",66),i(1),t()),n&2){let e=a.$implicit;l("value",e.value),o(),c(" ",e.label," ")}}function te(n,a){if(n&1&&(r(0,"p",65),i(1),t()),n&2){let e=u(2);o(),c(" ",e.getFieldError("documento_numero")," ")}}function re(n,a){if(n&1&&(r(0,"p",65),i(1),t()),n&2){let e=u(2);o(),c(" ",e.getFieldError("email")," ")}}function ie(n,a){if(n&1&&(r(0,"option",66),i(1),t()),n&2){let e=a.$implicit;l("value",e.value),o(),c(" ",e.label," ")}}function ne(n,a){n&1&&(b(),r(0,"svg",67),d(1,"circle",68)(2,"path",69),t())}function oe(n,a){if(n&1){let e=F();r(0,"main",15)(1,"div",16),s(2,X,7,1,"div",22),r(3,"form",23),I("ngSubmit",function(){E(e);let v=u();return w(v.onSubmit())}),r(4,"div",24)(5,"h3",25),i(6,"Informaci\xF3n B\xE1sica"),t(),r(7,"div",26)(8,"div")(9,"label",27),i(10," Nombre * "),t(),d(11,"input",28),s(12,Y,2,1,"p",29),t(),r(13,"div")(14,"label",30),i(15," Apellido * "),t(),d(16,"input",31),s(17,Z,2,1,"p",29),t(),r(18,"div",32)(19,"div")(20,"label",33),i(21," Tipo de Documento * "),t(),r(22,"select",34),s(23,ee,2,2,"option",35),t()(),r(24,"div")(25,"label",36),i(26," N\xFAmero * "),t(),d(27,"input",37),s(28,te,2,1,"p",29),t()(),r(29,"div")(30,"label",38),i(31," Fecha de Nacimiento "),t(),d(32,"input",39),t()()(),r(33,"div",24)(34,"h3",25),i(35,"Informaci\xF3n de Contacto"),t(),r(36,"div",26)(37,"div")(38,"label",40),i(39," Email "),t(),d(40,"input",41),s(41,re,2,1,"p",29),t(),r(42,"div")(43,"label",42),i(44," Tel\xE9fono "),t(),d(45,"input",43),t(),r(46,"div")(47,"label",44),i(48," Direcci\xF3n "),t(),r(49,"textarea",45),i(50,"              "),t()(),r(51,"div",32)(52,"div")(53,"label",46),i(54," Ciudad "),t(),d(55,"input",47),t(),r(56,"div")(57,"label",48),i(58," Pa\xEDs "),t(),d(59,"input",49),t()()()(),r(60,"div",24)(61,"h3",25),i(62,"Informaci\xF3n Adicional"),t(),r(63,"div",26)(64,"div")(65,"label",50),i(66," Estado * "),t(),r(67,"select",51),s(68,ie,2,2,"option",35),t()(),r(69,"div")(70,"label",52),i(71," Observaciones "),t(),r(72,"textarea",53),i(73,"              "),t()()()(),r(74,"div",54)(75,"button",55),s(76,ne,3,0,"svg",56),r(77,"span"),i(78),t()(),r(79,"button",57),i(80," Cancelar "),t()()()(),d(81,"div",58),t()}if(n&2){let e=u();o(2),l("ngIf",e.error()),o(),l("formGroup",e.form),o(8),x("border-red-500",e.isFieldInvalid("nombre")),o(),l("ngIf",e.isFieldInvalid("nombre")),o(4),x("border-red-500",e.isFieldInvalid("apellido")),o(),l("ngIf",e.isFieldInvalid("apellido")),o(6),l("ngForOf",e.documentoTipos),o(4),x("border-red-500",e.isFieldInvalid("documento_numero")),o(),l("ngIf",e.isFieldInvalid("documento_numero")),o(12),x("border-red-500",e.isFieldInvalid("email")),o(),l("ngIf",e.isFieldInvalid("email")),o(27),l("ngForOf",e.estados),o(7),l("disabled",e.loading()),o(),l("ngIf",e.loading()),o(2),k(e.isEditing()?"Actualizar Cliente":"Crear Cliente"),o(),l("routerLink",C(20,U))}}var Q=class n{fb=g($);router=g(V);route=g(M);clientesService=g(K);form;isEditing=f(!1);clienteId=f(null);loading=f(!1);error=f(null);documentoTipos=[{value:"cedula",label:"C\xE9dula"},{value:"pasaporte",label:"Pasaporte"}];estados=[{value:"activo",label:"Activo"},{value:"inactivo",label:"Inactivo"},{value:"suspendido",label:"Suspendido"}];ngOnInit(){this.initForm(),this.checkEditMode()}initForm(){this.form=this.fb.group({nombre:["",[m.required,m.maxLength(100)]],apellido:["",[m.required,m.maxLength(100)]],documento_tipo:["cedula",m.required],documento_numero:["",[m.required,m.maxLength(50)]],fecha_nacimiento:[""],telefono:["",m.maxLength(20)],email:["",[m.email,m.maxLength(255)]],direccion:[""],ciudad:["",m.maxLength(100)],pais:["Colombia",m.maxLength(100)],observaciones:[""],estado:["activo",m.required]})}checkEditMode(){let a=this.route.snapshot.paramMap.get("id");a&&(this.isEditing.set(!0),this.clienteId.set(a),this.loadCliente(a))}loadCliente(a){this.loading.set(!0),this.clientesService.getClienteById(a).subscribe({next:e=>{this.form.patchValue(h(y({},e),{fecha_nacimiento:e.fecha_nacimiento||""})),this.loading.set(!1)},error:e=>{this.error.set("Error al cargar el cliente"),this.loading.set(!1),console.error("Error:",e)}})}onSubmit(){if(this.form.invalid){this.markFormGroupTouched();return}this.loading.set(!0),this.error.set(null);let a=this.form.value,e=h(y({},a),{fecha_nacimiento:a.fecha_nacimiento||null});(this.isEditing()&&this.clienteId()?this.clientesService.updateCliente(this.clienteId(),e):this.clientesService.createCliente(e)).subscribe({next:()=>{this.router.navigate(["/internal/clientes"])},error:v=>{this.error.set(this.isEditing()?"Error al actualizar el cliente":"Error al crear el cliente"),this.loading.set(!1),console.error("Error:",v)}})}markFormGroupTouched(){Object.keys(this.form.controls).forEach(a=>{this.form.get(a)?.markAsTouched()})}isFieldInvalid(a){let e=this.form.get(a);return!!(e&&e.invalid&&e.touched)}getFieldError(a){let e=this.form.get(a);if(e&&e.errors&&e.touched){if(e.errors.required)return"Este campo es requerido";if(e.errors.email)return"Email inv\xE1lido";if(e.errors.maxlength)return`M\xE1ximo ${e.errors.maxlength.requiredLength} caracteres`}return""}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=S({type:n,selectors:[["app-cliente-form"]],decls:20,vars:7,consts:[[1,"bg-gray-50","dark:bg-gray-900","min-h-screen"],[1,"bg-gradient-to-r","from-green-600","to-emerald-700","text-white","shadow-lg"],[1,"px-4","py-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"flex","items-center","space-x-3"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-8","brightness-0","invert"],[1,"text-lg","font-semibold"],[1,"flex","items-center","space-x-2"],[1,"bg-white/20","hover:bg-white/30","text-white","px-3","py-2","rounded-lg","text-sm","font-medium","transition","duration-200","shadow-md","backdrop-blur-sm",3,"routerLink"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-center"],[1,"text-2xl","font-bold","mb-1"],[1,"text-green-100","text-sm"],["class","px-4 py-6",4,"ngIf"],[1,"px-4","py-6"],[1,"max-w-lg","mx-auto"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","p-6","text-center"],[1,"animate-pulse","space-y-4"],[1,"h-4","bg-gray-200","rounded","w-3/4","mx-auto"],[1,"h-4","bg-gray-200","rounded","w-1/2","mx-auto"],[1,"text-sm","text-gray-500","mt-4"],["class","mb-6 bg-red-50 border border-red-200 rounded-lg p-4",4,"ngIf"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","dark:border","dark:border-gray-700","p-6"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4"],[1,"space-y-4"],["for","nombre",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","text","id","nombre","formControlName","nombre",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white"],["class","text-red-500 text-xs mt-1",4,"ngIf"],["for","apellido",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","text","id","apellido","formControlName","apellido",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white"],[1,"grid","grid-cols-1","gap-4","sm:grid-cols-2"],["for","documento_tipo",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["id","documento_tipo","formControlName","documento_tipo",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white"],[3,"value",4,"ngFor","ngForOf"],["for","documento_numero",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","text","id","documento_numero","formControlName","documento_numero",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white"],["for","fecha_nacimiento",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","date","id","fecha_nacimiento","formControlName","fecha_nacimiento",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white"],["for","email",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","email","id","email","formControlName","email",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white"],["for","telefono",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","tel","id","telefono","formControlName","telefono",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white"],["for","direccion",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["id","direccion","formControlName","direccion","rows","2",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white"],["for","ciudad",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","text","id","ciudad","formControlName","ciudad",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white"],["for","pais",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","text","id","pais","formControlName","pais",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white"],["for","estado",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["id","estado","formControlName","estado",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white"],["for","observaciones",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["id","observaciones","formControlName","observaciones","rows","3","placeholder","Notas adicionales sobre el cliente...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:border-gray-600","dark:text-white"],[1,"space-y-3"],["type","submit",1,"w-full","bg-gradient-to-r","from-lime-400","to-green-500","hover:from-lime-500","hover:to-green-600","disabled:from-gray-400","disabled:to-gray-500","text-white","px-6","py-3","rounded-xl","font-medium","shadow-lg","transition-all","duration-200","flex","items-center","justify-center","space-x-2",3,"disabled"],["class","w-5 h-5 animate-spin","fill","none","viewBox","0 0 24 24",4,"ngIf"],["type","button",1,"w-full","bg-gray-200","hover:bg-gray-300","text-gray-800","px-6","py-3","rounded-xl","font-medium","transition-all","duration-200",3,"routerLink"],[1,"h-6"],[1,"mb-6","bg-red-50","border","border-red-200","rounded-lg","p-4"],[1,"flex"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","text-red-800"],[1,"text-red-500","text-xs","mt-1"],[3,"value"],["fill","none","viewBox","0 0 24 24",1,"w-5","h-5","animate-spin"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,p){e&1&&(r(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4),d(5,"img",5),r(6,"span",6),i(7),t()(),r(8,"div",7)(9,"button",8),b(),r(10,"svg",9),d(11,"path",10),t(),i(12," Volver "),t()()(),_(),r(13,"div",11)(14,"h1",12),i(15),t(),r(16,"p",13),i(17),t()()()(),s(18,W,8,0,"div",14)(19,oe,82,21,"main",14),t()),e&2&&(o(7),c(" ",p.isEditing()?"Editar Cliente":"Nuevo Cliente"," "),o(2),l("routerLink",C(6,U)),o(6),c(" ",p.isEditing()?"Editar Cliente":"Nuevo Cliente"," "),o(2),c(" ",p.isEditing()?"Actualiza la informaci\xF3n del cliente":"Completa los datos del nuevo cliente"," "),o(),l("ngIf",p.loading()&&p.isEditing()),o(),l("ngIf",!p.loading()||!p.isEditing()))},dependencies:[L,N,T,A,O,J,z,R,H,G,j,q,D,B,P],encapsulation:2})};export{Q as ClienteFormComponent};
