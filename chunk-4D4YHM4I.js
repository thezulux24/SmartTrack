import{a as F}from"./chunk-IJHCNZQ7.js";import{$ as C,A as E,B as o,Ba as H,E as T,I as _,L as M,N as S,O as x,S as e,T as t,U as u,V as w,W as f,X as s,Z as i,_ as c,k as D,r as b,t as v,u as h,v as p,w as g,xa as V,za as j}from"./chunk-QDKNTWK2.js";import"./chunk-LJ5XHLMQ.js";import"./chunk-FK42CRUA.js";function z(r,a){if(r&1&&(e(0,"h1",13),i(1),t(),e(2,"p",14),i(3),t()),r&2){let n=s();o(),c(n.cirugia().numero_cirugia),o(2),c(n.cirugia().paciente_nombre)}}function G(r,a){r&1&&(e(0,"h1",13),i(1,"Cargando..."),t(),e(2,"p",14),i(3,"Obteniendo informaci\xF3n de la cirug\xEDa"),t())}function N(r,a){r&1&&(e(0,"div",12)(1,"div",15)(2,"div",16)(3,"div",17),u(4,"div",18)(5,"div",19)(6,"div",20),t(),e(7,"p",21),i(8,"Cargando informaci\xF3n..."),t()()()())}function A(r,a){if(r&1){let n=w();e(0,"div",12)(1,"div",15)(2,"div",16)(3,"div",22),p(),e(4,"svg",23),u(5,"path",24),t(),g(),e(6,"p",25),i(7),t()(),e(8,"div",26)(9,"button",27),f("click",function(){v(n);let m=s();return h(m.recargarDatos())}),i(10," Reintentar "),t(),e(11,"button",28),f("click",function(){v(n);let m=s();return h(m.volverAtras())}),i(12," Volver a la Lista "),t()()()()()}if(r&2){let n=s();o(7),c(n.error())}}function P(r,a){if(r&1&&(e(0,"div")(1,"p",45),i(2,"Documento"),t(),e(3,"p",46),i(4),t()()),r&2){let n=s(2);o(4),c(n.cirugia().paciente_documento)}}function $(r,a){if(r&1&&(e(0,"div")(1,"p",45),i(2,"Tel\xE9fono"),t(),e(3,"p",46),i(4),t()()),r&2){let n=s(2);o(4),c(n.cirugia().paciente_telefono)}}function B(r,a){if(r&1&&(e(0,"span",49),i(1),t()),r&2){let n,d=s(2);o(),C(" - ",(n=d.cirugia().hospital_data)==null?null:n.ciudad,"")}}function O(r,a){if(r&1&&(e(0,"div")(1,"p",45),i(2,"Direcci\xF3n"),t(),e(3,"p",58),i(4),t()()),r&2){let n,d=s(2);o(4),c((n=d.cirugia().hospital_data)==null?null:n.direccion)}}function R(r,a){if(r&1&&(e(0,"div")(1,"p",45),i(2,"Tel\xE9fono Hospital"),t(),e(3,"p",58),i(4),t()()),r&2){let n,d=s(2);o(4),c((n=d.cirugia().hospital_data)==null?null:n.telefono)}}function q(r,a){if(r&1&&(e(0,"p",50),i(1),t()),r&2){let n,d=s(2);o(),c((n=d.cirugia().tipo_cirugia_data)==null?null:n.especialidad)}}function U(r,a){if(r&1&&(e(0,"div")(1,"p",45),i(2,"\xC1rea"),t(),e(3,"p",58),i(4),t()()),r&2){let n=s(3);o(4),c(n.cirugia().tecnico_asignado.area)}}function J(r,a){if(r&1&&(e(0,"div",30)(1,"h2",40)(2,"div",64),p(),e(3,"svg",42),u(4,"path",43),t()(),g(),e(5,"span"),i(6,"T\xE9cnico Asignado"),t()(),e(7,"div",44)(8,"div")(9,"p",45),i(10,"Nombre"),t(),e(11,"p",46),i(12),t()(),e(13,"div")(14,"p",45),i(15,"Email"),t(),e(16,"p",58),i(17),t()(),_(18,U,5,1,"div"),t()()),r&2){let n=s(2);o(12),c(n.cirugia().tecnico_asignado.full_name),o(5),c(n.cirugia().tecnico_asignado.email),o(),x(n.cirugia().tecnico_asignado.area?18:-1)}}function K(r,a){if(r&1&&(e(0,"div",30)(1,"h2",40)(2,"div",65),p(),e(3,"svg",42),u(4,"path",37),t()(),g(),e(5,"span"),i(6,"Observaciones"),t()(),e(7,"div",66)(8,"p",67),i(9),t()()()),r&2){let n=s(2);o(9),c(n.cirugia().notas)}}function Q(r,a){if(r&1){let n=w();e(0,"main",12)(1,"div",29)(2,"div",30)(3,"div",31)(4,"div",4)(5,"span",32)(6,"span"),i(7),t(),e(8,"span"),i(9),t()(),e(10,"span",33),i(11),t()()(),e(12,"div",34)(13,"button",35),f("click",function(){v(n);let m=s();return h(m.editarCirugia())}),p(),e(14,"svg",36),u(15,"path",37),t(),g(),e(16,"span"),i(17,"Editar"),t()(),e(18,"button",38),f("click",function(){v(n);let m=s();return h(m.cambiarEstado())}),p(),e(19,"svg",36),u(20,"path",39),t(),g(),e(21,"span"),i(22,"Cambiar Estado"),t()()()(),e(23,"div",30)(24,"h2",40)(25,"div",41),p(),e(26,"svg",42),u(27,"path",43),t()(),g(),e(28,"span"),i(29,"Informaci\xF3n del Paciente"),t()(),e(30,"div",44)(31,"div")(32,"p",45),i(33,"Nombre Completo"),t(),e(34,"p",46),i(35),t()(),_(36,P,5,1,"div")(37,$,5,1,"div"),t()(),e(38,"div",30)(39,"h2",40)(40,"div",47),p(),e(41,"svg",42),u(42,"path",48),t()(),g(),e(43,"span"),i(44,"Informaci\xF3n de la Cirug\xEDa"),t()(),e(45,"div",44)(46,"div")(47,"p",45),i(48,"Hospital/Cl\xEDnica"),t(),e(49,"p",46),i(50),_(51,B,2,1,"span",49),t()(),_(52,O,5,1,"div")(53,R,5,1,"div"),e(54,"div")(55,"p",45),i(56,"Tipo de Cirug\xEDa"),t(),e(57,"p",46),i(58),t(),_(59,q,2,1,"p",50),t(),e(60,"div")(61,"p",45),i(62,"M\xE9dico Cirujano"),t(),e(63,"p",46),i(64),t()()()(),e(65,"div",30)(66,"h2",40)(67,"div",51),p(),e(68,"svg",42),u(69,"path",52),t()(),g(),e(70,"span"),i(71,"Programaci\xF3n"),t()(),e(72,"div",44)(73,"div")(74,"p",45),i(75,"Fecha Programada"),t(),e(76,"p",46),i(77),t(),e(78,"p",50),i(79),t()(),e(80,"div",53)(81,"div")(82,"p",45),i(83,"Hora de Inicio"),t(),e(84,"p",46),i(85),t()(),e(86,"div")(87,"p",45),i(88,"Duraci\xF3n Estimada"),t(),e(89,"p",46),i(90),t()()()()(),_(91,J,19,3,"div",30)(92,K,10,1,"div",30),e(93,"div",30)(94,"h2",40)(95,"div",54),p(),e(96,"svg",42),u(97,"path",55),t()(),g(),e(98,"span"),i(99,"Informaci\xF3n del Sistema"),t()(),e(100,"div",56)(101,"div")(102,"p",45),i(103,"N\xFAmero de Cirug\xEDa"),t(),e(104,"p",57),i(105),t()(),e(106,"div",53)(107,"div")(108,"p",45),i(109,"Creada el"),t(),e(110,"p",58),i(111),t()(),e(112,"div")(113,"p",45),i(114,"\xDAltima actualizaci\xF3n"),t(),e(115,"p",58),i(116),t()()()()(),e(117,"div",30)(118,"h3",59),i(119,"Acciones"),t(),e(120,"div",44)(121,"button",60),f("click",function(){v(n);let m=s();return h(m.compartirCirugia())}),p(),e(122,"svg",36),u(123,"path",61),t(),g(),e(124,"span"),i(125,"Compartir"),t()(),e(126,"button",60),f("click",function(){v(n);let m=s();return h(m.imprimirDetalle())}),p(),e(127,"svg",36),u(128,"path",62),t(),g(),e(129,"span"),i(130,"Imprimir"),t()()()(),u(131,"div",63),t()()}if(r&2){let n,d,m,k,y,I,l=s();o(5),S(l.getEstadoInfo(l.cirugia().estado).color),o(2),c(l.getEstadoInfo(l.cirugia().estado).icon),o(2),c(l.getEstadoInfo(l.cirugia().estado).label),o(),S(l.getPrioridadInfo(l.cirugia().prioridad).color),o(),C(" ",l.getPrioridadInfo(l.cirugia().prioridad).label," "),o(7),M("disabled",l.cirugia().estado==="completada"||l.cirugia().estado==="cancelada"),o(17),c(l.cirugia().paciente_nombre),o(),x(l.cirugia().paciente_documento?36:-1),o(),x(l.cirugia().paciente_telefono?37:-1),o(13),C(" ",((n=l.cirugia().hospital_data)==null?null:n.nombre)||"No especificado"," "),o(),x((d=l.cirugia().hospital_data)!=null&&d.ciudad?51:-1),o(),x((m=l.cirugia().hospital_data)!=null&&m.direccion?52:-1),o(),x((k=l.cirugia().hospital_data)!=null&&k.telefono?53:-1),o(5),C(" ",((y=l.cirugia().tipo_cirugia_data)==null?null:y.nombre)||"No especificado"," "),o(),x((I=l.cirugia().tipo_cirugia_data)!=null&&I.especialidad?59:-1),o(5),c(l.cirugia().medico_cirujano),o(13),c(l.formatFecha(l.cirugia().fecha_programada)),o(2),c(l.formatFechaCorta(l.cirugia().fecha_programada)),o(6),c(l.formatHora(l.cirugia().hora_inicio)),o(5),c(l.formatDuracion(l.cirugia().duracion_estimada)),o(),x(l.cirugia().tecnico_asignado?91:-1),o(),x(l.cirugia().notas?92:-1),o(13),c(l.cirugia().numero_cirugia),o(6),c(l.formatFechaCorta(l.cirugia().created_at)),o(5),c(l.formatFechaCorta(l.cirugia().updated_at))}}var L=class r{route=b(j);router=b(H);cirugiasService=b(F);loading=E(!1);error=E(null);cirugia=E(null);estadosInfo={programada:{label:"Programada",color:"bg-blue-100 text-blue-800",icon:"\u{1F4C5}"},en_curso:{label:"En Curso",color:"bg-yellow-100 text-yellow-800",icon:"\u26A1"},completada:{label:"Completada",color:"bg-green-100 text-green-800",icon:"\u2705"},cancelada:{label:"Cancelada",color:"bg-red-100 text-red-800",icon:"\u274C"},urgencia:{label:"Urgencia",color:"bg-orange-100 text-orange-800",icon:"\u{1F6A8}"}};prioridadesInfo={baja:{label:"Baja",color:"bg-gray-100 text-gray-800"},normal:{label:"Normal",color:"bg-blue-100 text-blue-800"},alta:{label:"Alta",color:"bg-yellow-100 text-yellow-800"},urgencia:{label:"Urgencia",color:"bg-red-100 text-red-800"}};ngOnInit(){console.log("\u{1F680} CirugiaDetailComponent iniciando..."),this.loadCirugia()}loadCirugia(){this.loading.set(!0),this.error.set(null),this.route.paramMap.pipe(D(a=>{let n=a.get("id");if(!n)throw new Error("ID de cirug\xEDa no encontrado");return console.log("\u{1F4CB} Cargando cirug\xEDa con ID:",n),this.cirugiasService.getCirugiaById(n)})).subscribe({next:a=>{console.log("\u2705 Cirug\xEDa cargada:",a),this.cirugia.set(a),this.loading.set(!1)},error:a=>{console.error("\u274C Error loading cirugia:",a),this.error.set("Error al cargar la cirug\xEDa: "+(a?.message||a)),this.loading.set(!1)}})}formatFecha(a){return new Date(a).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}formatFechaCorta(a){return new Date(a).toLocaleDateString("es-ES")}formatHora(a){return a||"No especificada"}formatDuracion(a){if(!a)return"No especificada";let n=Math.floor(a/60),d=a%60;return n>0?`${n}h ${d}m`:`${d}m`}getEstadoInfo(a){return this.estadosInfo[a]||{label:a,color:"bg-gray-100 text-gray-800",icon:"\u2753"}}getPrioridadInfo(a){return this.prioridadesInfo[a]||{label:a,color:"bg-gray-100 text-gray-800"}}editarCirugia(){let a=this.cirugia();a&&this.router.navigate(["/internal/agenda/editar",a.id])}cambiarEstado(){let a=this.cirugia();if(!a)return;if(a.estado==="completada"||a.estado==="cancelada"){alert("No se puede cambiar el estado de una cirug\xEDa completada o cancelada");return}let n;switch(a.estado){case"programada":n="en_curso";break;case"en_curso":n="completada";break;case"urgencia":n="en_curso";break;default:n="programada";break}let d=this.getEstadoInfo(n);confirm(`\xBFCambiar estado a "${d.label}"?`)&&(this.loading.set(!0),this.cirugiasService.updateCirugia(a.id,{estado:n}).subscribe({next:m=>{console.log("\u2705 Estado actualizado:",m),this.cirugia.set(m),this.loading.set(!1)},error:m=>{console.error("\u274C Error updating estado:",m),alert("Error al cambiar estado: "+(m?.message||m)),this.loading.set(!1)}}))}volverAtras(){this.router.navigate(["/internal/agenda"])}recargarDatos(){this.loadCirugia()}compartirCirugia(){let a=this.cirugia();a&&(navigator.share?navigator.share({title:`Cirug\xEDa ${a.numero_cirugia}`,text:`${a.paciente_nombre} - ${a.tipo_cirugia_data?.nombre}`,url:window.location.href}).catch(console.error):navigator.clipboard.writeText(window.location.href).then(()=>{alert("Enlace copiado al portapapeles")}).catch(()=>{alert("No se pudo copiar el enlace")}))}imprimirDetalle(){window.print()}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=T({type:r,selectors:[["app-cirugia-detail"]],decls:19,vars:2,consts:[[1,"bg-gray-50","dark:bg-gray-900","min-h-screen"],[1,"bg-gradient-to-r","from-green-600","to-emerald-700","text-white","shadow-lg"],[1,"px-4","py-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"flex","items-center","space-x-3"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-8","brightness-0","invert"],[1,"text-lg","font-semibold"],[1,"flex","items-center","space-x-2"],[1,"bg-white/20","hover:bg-white/30","text-white","px-3","py-2","rounded-lg","text-sm","font-medium","transition","duration-200","shadow-md","backdrop-blur-sm",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-center"],[1,"px-4","py-6"],[1,"text-2xl","font-bold","mb-1"],[1,"text-green-100","text-sm"],[1,"max-w-lg","mx-auto"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","p-6","text-center"],[1,"animate-pulse","space-y-4"],[1,"h-4","bg-gray-200","rounded","w-3/4","mx-auto"],[1,"h-4","bg-gray-200","rounded","w-1/2","mx-auto"],[1,"h-4","bg-gray-200","rounded","w-2/3","mx-auto"],[1,"text-sm","text-gray-500","mt-4"],[1,"text-red-600","dark:text-red-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm","mb-4"],[1,"space-y-2"],[1,"w-full","bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded-lg","text-sm","font-medium","transition","duration-200",3,"click"],[1,"w-full","bg-gray-100","hover:bg-gray-200","text-gray-700","px-4","py-2","rounded-lg","text-sm","font-medium","transition","duration-200",3,"click"],[1,"max-w-lg","mx-auto","space-y-6"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","dark:border","dark:border-gray-700","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"px-3","py-1","rounded-full","text-sm","font-medium","flex","items-center","space-x-1"],[1,"px-2","py-1","rounded-full","text-xs","font-medium"],[1,"grid","grid-cols-2","gap-3"],[1,"bg-yellow-600","hover:bg-yellow-700","text-white","px-4","py-2.5","rounded-lg","text-sm","font-medium","transition","duration-200","flex","items-center","justify-center","space-x-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"bg-blue-600","hover:bg-blue-700","disabled:bg-gray-400","disabled:cursor-not-allowed","text-white","px-4","py-2.5","rounded-lg","text-sm","font-medium","transition","duration-200","flex","items-center","justify-center","space-x-2",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4","flex","items-center","space-x-2"],[1,"w-8","h-8","bg-gradient-to-br","from-blue-400","to-blue-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"space-y-3"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"text-gray-900","dark:text-white","font-medium"],[1,"w-8","h-8","bg-gradient-to-br","from-green-400","to-green-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-gray-500"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"w-8","h-8","bg-gradient-to-br","from-purple-400","to-purple-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"grid","grid-cols-2","gap-4"],[1,"w-8","h-8","bg-gradient-to-br","from-indigo-400","to-indigo-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"space-y-3","text-sm"],[1,"text-gray-900","dark:text-white","font-mono"],[1,"text-gray-900","dark:text-white"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4"],[1,"w-full","bg-gray-100","hover:bg-gray-200","text-gray-700","px-4","py-3","rounded-lg","font-medium","transition","duration-200","dark:bg-gray-700","dark:text-gray-300","dark:hover:bg-gray-600","flex","items-center","justify-center","space-x-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],[1,"h-6"],[1,"w-8","h-8","bg-gradient-to-br","from-orange-400","to-orange-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],[1,"w-8","h-8","bg-gradient-to-br","from-gray-400","to-gray-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],[1,"bg-gray-50","dark:bg-gray-900","rounded-lg","p-4"],[1,"text-gray-700","dark:text-gray-300","whitespace-pre-wrap"]],template:function(n,d){n&1&&(e(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4),u(5,"img",5),e(6,"span",6),i(7,"Detalle de Cirug\xEDa"),t()(),e(8,"div",7)(9,"button",8),f("click",function(){return d.volverAtras()}),p(),e(10,"svg",9),u(11,"path",10),t(),i(12," Volver "),t()()(),g(),e(13,"div",11),_(14,z,4,2)(15,G,4,0),t()()(),_(16,N,9,0,"div",12)(17,A,13,1,"div",12)(18,Q,132,27,"main",12),t()),n&2&&(o(14),x(d.cirugia()?14:15),o(2),x(d.loading()?16:d.error()?17:d.cirugia()?18:-1))},dependencies:[V],encapsulation:2})};export{L as CirugiaDetailComponent};
