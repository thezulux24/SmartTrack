import{a as he}from"./chunk-UUJD3HPT.js";import{a as ie,b as E,c as oe,d as re,g as ne,h as ae,i as de,j as le,k as se,l as ce,m as me,n as ue,o as pe,p as ge,r as _e,u as xe,v as be,w as fe}from"./chunk-RXLLN3G3.js";import{a as te}from"./chunk-Q6XZXIU7.js";import{$ as B,Aa as Y,Da as J,E as k,Ea as X,G as l,Ga as Z,Ia as ee,J as H,N as x,Q as p,T as f,U as z,W as O,X as A,Y as i,Z as o,_ as m,aa as C,ba as c,da as d,ea as h,f as T,fa as v,ga as G,ia as I,ja as K,ka as F,ma as V,oa as L,pa as j,qa as W,u as M,va as $,w as g,x as _,xa as R,y as u,ya as Q,z as y,za as U}from"./chunk-NR6UGQL3.js";import"./chunk-LJ5XHLMQ.js";import{a as q,b as D,h as S}from"./chunk-FK42CRUA.js";var N=()=>({standalone:!0}),ye=(a,t)=>t.id;function Ce(a,t){if(a&1&&(i(0,"p",15),d(1),o()),a&2){let e,r=c();l(),G(" ",(e=r.cirugia())==null?null:e.numero_cirugia," - ",r.getClienteNombre()," ")}}function ke(a,t){a&1&&(i(0,"div",14)(1,"div",16)(2,"div",17)(3,"div",18),m(4,"div",19)(5,"div",20)(6,"div",21),o(),i(7,"p",22),d(8,"Cargando informaci\xF3n de la cirug\xEDa..."),o()()()())}function we(a,t){if(a&1&&(i(0,"div",2)(1,"div",16)(2,"div",23)(3,"div",4),u(),i(4,"svg",24),m(5,"path",25),o(),y(),i(6,"p",26),d(7),o()()()()()),a&2){let e=c();l(7),h(e.error())}}function Se(a,t){if(a&1){let e=B();i(0,"div",70)(1,"div",71)(2,"p",72),d(3),o(),i(4,"p",73),d(5),o()(),i(6,"button",74),C("click",function(){let n=g(e).$implicit,s=c(3);return _(s.agregarProducto(n))}),d(7," Agregar "),o()()}if(a&2){let e=t.$implicit;l(3),h(e.nombre),l(2),G("",e.codigo," - Stock: ",e.stock_disponible,"")}}function Ee(a,t){if(a&1&&(i(0,"div",28)(1,"h2",29)(2,"div",66),u(),i(3,"svg",31),m(4,"path",67),o()(),y(),i(5,"span"),d(6,"Productos Sugeridos"),o()(),i(7,"p",68),d(8),o(),i(9,"div",69),O(10,Se,8,3,"div",70,ye),o()()),a&2){let e,r=c(2);l(8),v(" Basado en el tipo de cirug\xEDa: ",(e=r.cirugia())==null||e.tipo_cirugia==null?null:e.tipo_cirugia.nombre," "),l(2),A(r.productosSugeridos())}}function Me(a,t){if(a&1&&(i(0,"option",75),d(1),L(2,"titlecase"),o()),a&2){let e=t.$implicit;p("value",e),l(),v(" ",j(2,2,e)," ")}}function Pe(a,t){if(a&1&&(i(0,"option",75),d(1),o()),a&2){let e=t.$implicit;p("value",e),l(),v(" ",e," ")}}function Be(a,t){if(a&1&&(i(0,"span",82),d(1),o()),a&2){let e=c().$implicit;l(),v(" ",e.marca," ")}}function Ie(a,t){if(a&1&&(i(0,"div",87),d(1),L(2,"number"),o()),a&2){let e=c().$implicit;l(),v(" $",W(2,1,e.precio,"1.0-0")," ")}}function Ke(a,t){if(a&1&&(i(0,"div",88),d(1),o()),a&2){let e=c().$implicit;l(),v(" ",e.descripcion," ")}}function Fe(a,t){a&1&&(u(),i(0,"svg",9),m(1,"path",90),o(),d(2," Ya agregado "))}function Ve(a,t){a&1&&(u(),i(0,"svg",9),m(1,"path",91),o(),d(2," Agregar "))}function Te(a,t){if(a&1){let e=B();i(0,"div",78)(1,"div",79)(2,"div",71)(3,"h4",72),d(4),o(),i(5,"p",73),d(6),o(),i(7,"div",80)(8,"span",81),d(9),L(10,"titlecase"),o(),x(11,Be,2,1,"span",82),o()(),i(12,"div",83)(13,"div",7)(14,"span",84),d(15),o(),i(16,"div")(17,"div",85),d(18),o(),i(19,"div",86),d(20,"unidades"),o()()(),x(21,Ie,3,4,"div",87),o()(),x(22,Ke,2,1,"div",88),i(23,"button",89),C("click",function(){let n=g(e).$implicit,s=c(3);return _(s.agregarProducto(n))}),x(24,Fe,3,0)(25,Ve,3,0),o()()}if(a&2){let e=t.$implicit,r=c(3);l(4),h(e.nombre),l(2),h(e.codigo),l(3),v(" ",j(10,11,e.categoria)," "),l(2),f(e.marca?11:-1),l(4),h(r.getStockIcon(e)),l(2),p("ngClass",r.getStockColorClass(e)),l(),v(" ",e.stock_total||e.stock_disponible||0," "),l(3),f(e.precio?21:-1),l(),f(e.descripcion?22:-1),l(),p("disabled",r.isProductoAgregado(e.id)),l(),f(r.isProductoAgregado(e.id)?24:25)}}function Oe(a,t){if(a&1&&(i(0,"div",28)(1,"h2",29)(2,"div",66),u(),i(3,"svg",31),m(4,"path",76),o()(),y(),i(5,"span"),d(6),o()(),i(7,"div",77),O(8,Te,26,13,"div",78,ye),o()()),a&2){let e=c(2);l(6),v("Productos Disponibles (",e.productosEncontrados().length,")"),l(2),A(e.productosEncontrados())}}function Ae(a,t){a&1&&(i(0,"div",57),u(),i(1,"svg",92),m(2,"path",76),o(),y(),i(3,"p",93),d(4,"No hay productos agregados al kit"),o(),i(5,"p",94),d(6,"Busca y agrega productos para armar el kit"),o()())}function Le(a,t){if(a&1){let e=B();i(0,"div",95)(1,"div",79)(2,"div",71)(3,"p",72),d(4),o(),i(5,"p",73),d(6),o()(),i(7,"button",96),C("click",function(){let n=g(e).$index,s=c(3);return _(s.removerProducto(n))}),u(),i(8,"svg",97),m(9,"path",98),o()()(),y(),i(10,"div",99)(11,"div")(12,"label",100),d(13,"Cantidad *"),o(),m(14,"input",101),o(),i(15,"div")(16,"label",100),d(17,"Observaciones"),o(),m(18,"input",102),o()()()}if(a&2){let e=t.$index,r=c(3);p("formGroupName",e),l(4),h(r.getProductoNombre(e)),l(2),h(r.getProductoCodigo(e))}}function Ne(a,t){if(a&1&&(i(0,"div",58),O(1,Le,19,3,"div",95,z),o()),a&2){let e=c(2);l(),A(e.productosFormArray().controls)}}function qe(a,t){if(a&1&&(u(),i(0,"svg",103),m(1,"circle",104)(2,"path",105),o(),d(3)),a&2){let e=c(2);l(3),v(" ",e.modoEdicion?"Guardando cambios...":"Creando Kit..."," ")}}function De(a,t){a&1&&(u(),i(0,"svg",106),m(1,"path",90),o(),d(2," Guardar Cambios "))}function Ge(a,t){a&1&&(u(),i(0,"svg",106),m(1,"path",91),o(),d(2," Crear Kit "))}function je(a,t){if(a&1&&x(0,De,3,0)(1,Ge,3,0),a&2){let e=c(2);f(e.modoEdicion?0:1)}}function He(a,t){if(a&1){let e=B();i(0,"main",14)(1,"form",27),C("ngSubmit",function(){g(e);let n=c();return _(n.onSubmit())}),i(2,"div",28)(3,"h2",29)(4,"div",30),u(),i(5,"svg",31),m(6,"path",32),o()(),y(),i(7,"span"),d(8,"Informaci\xF3n de la Cirug\xEDa"),o()(),i(9,"div",33)(10,"div",34)(11,"span",35),d(12,"Cliente:"),o(),i(13,"span",36),d(14),o()(),i(15,"div",34)(16,"span",35),d(17,"M\xE9dico:"),o(),i(18,"span",36),d(19),o()(),i(20,"div",34)(21,"span",35),d(22,"Fecha:"),o(),i(23,"span",36),d(24),o()(),i(25,"div",37)(26,"span",35),d(27,"Hospital:"),o(),i(28,"span",36),d(29),o()()()(),x(30,Ee,12,1,"div",28),i(31,"div",28)(32,"h2",29)(33,"div",38),u(),i(34,"svg",31),m(35,"path",39),o()(),y(),i(36,"span"),d(37,"Filtros de B\xFAsqueda"),o()(),i(38,"div",40)(39,"div")(40,"label",41),d(41,"Buscar"),o(),i(42,"input",42),F("ngModelChange",function(n){g(e);let s=c();return K(s.busquedaProducto,n)||(s.busquedaProducto=n),_(n)}),C("input",function(){g(e);let n=c();return _(n.buscarProductos())}),o()(),i(43,"div")(44,"label",43),d(45,"Categor\xEDa"),o(),i(46,"select",44),F("ngModelChange",function(n){g(e);let s=c();return K(s.categoriaSeleccionada,n)||(s.categoriaSeleccionada=n),_(n)}),C("change",function(){g(e);let n=c();return _(n.buscarProductos())}),i(47,"option",45),d(48,"Todas las categor\xEDas"),o(),x(49,Me,3,4,"option",46),o()(),i(50,"div")(51,"label",47),d(52,"Disponibilidad"),o(),i(53,"select",48),F("ngModelChange",function(n){g(e);let s=c();return K(s.filtroStock,n)||(s.filtroStock=n),_(n)}),C("change",function(){g(e);let n=c();return _(n.buscarProductos())}),i(54,"option",45),d(55,"Todos los productos"),o(),i(56,"option",49),d(57,"Solo con stock"),o(),i(58,"option",50),d(59,"Stock bajo"),o(),i(60,"option",51),d(61,"Agotados"),o()()(),i(62,"div")(63,"label",52),d(64,"Marca"),o(),i(65,"select",53),F("ngModelChange",function(n){g(e);let s=c();return K(s.marcaSeleccionada,n)||(s.marcaSeleccionada=n),_(n)}),C("change",function(){g(e);let n=c();return _(n.buscarProductos())}),i(66,"option",45),d(67,"Todas las marcas"),o(),x(68,Pe,2,2,"option",46),o()()(),i(69,"div",54)(70,"div",55),d(71),o()()(),x(72,Oe,10,1,"div",28),i(73,"div",28)(74,"h2",29)(75,"div",30),u(),i(76,"svg",31),m(77,"path",56),o()(),y(),i(78,"span"),d(79),o()(),x(80,Ae,7,0,"div",57)(81,Ne,3,0,"div",58),o(),i(82,"div",28)(83,"h2",29)(84,"div",59),u(),i(85,"svg",31),m(86,"path",60),o()(),y(),i(87,"span"),d(88,"Observaciones del Kit"),o()(),m(89,"textarea",61),o(),i(90,"div",62)(91,"button",63),C("click",function(){g(e);let n=c();return _(n.volver())}),d(92," Cancelar "),o(),i(93,"button",64),x(94,qe,4,1)(95,je,2,1),o()(),m(96,"div",65),o()()}if(a&2){let e,r,n,s=c();l(),p("formGroup",s.form),l(13),h(s.getClienteNombre()),l(5),h((e=s.cirugia())==null?null:e.medico_cirujano),l(5),h(s.formatearFecha((r=s.cirugia())==null?null:r.fecha_programada)),l(5),h((n=s.cirugia())==null||n.hospital==null?null:n.hospital.nombre),l(),f(s.productosSugeridos().length>0?30:-1),l(12),I("ngModel",s.busquedaProducto),p("ngModelOptions",V(22,N)),l(4),I("ngModel",s.categoriaSeleccionada),p("ngModelOptions",V(23,N)),l(3),p("ngForOf",s.categorias()),l(4),I("ngModel",s.filtroStock),p("ngModelOptions",V(24,N)),l(12),I("ngModel",s.marcaSeleccionada),p("ngModelOptions",V(25,N)),l(3),p("ngForOf",s.marcas()),l(3),v(" \u{1F4E6} ",s.productosEncontrados().length," productos encontrados "),l(),f(s.productosEncontrados().length>0?72:-1),l(7),v("Productos del Kit (",s.productosFormArray().length,")"),l(),f(s.productosFormArray().length===0?80:81),l(13),p("disabled",!s.form.valid||s.creandoKit()||s.productosFormArray().length===0),l(),f(s.creandoKit()?94:95)}}var ve=class a{fb=M(xe);router=M(ee);route=M(Z);kitService=M(he);supabase=M(te);loading=k(!0);error=k(null);creandoKit=k(!1);cirugia=k(null);productosSugeridos=k([]);productosEncontrados=k([]);productosSeleccionados=k([]);categorias=k([]);marcas=k([]);form=this.fb.group({productos:this.fb.array([]),observaciones_generales:[""]});busquedaProducto="";cirugiaId="";kitId="";modoEdicion=!1;categoriaSeleccionada="";marcaSeleccionada="";filtroStock="";todosLosProductos=[];productosFormArray=$(()=>this.form.get("productos"));ngOnInit(){this.cirugiaId=this.route.snapshot.paramMap.get("id")||"",this.modoEdicion=this.route.snapshot.url.some(t=>t.path==="edit"),this.modoEdicion?(this.kitId=this.cirugiaId,this.cargarDatosEdicion()):this.cirugiaId?this.cargarDatos():(this.error.set("ID de cirug\xEDa no proporcionado"),this.loading.set(!1))}cargarDatos(){return S(this,null,function*(){try{this.loading.set(!0),this.error.set(null);let{data:t,error:e}=yield this.supabase.client.from("cirugias").select(`
          *,
          hospital:hospitales(*),
          tipo_cirugia:tipos_cirugia(*)
        `).eq("id",this.cirugiaId).single();if(e)throw e;this.cirugia.set(t),t.tipo_cirugia?.productos_comunes&&(yield this.cargarProductosSugeridos(t.tipo_cirugia.productos_comunes)),yield this.cargarTodosLosProductos()}catch(t){console.error("Error cargando datos:",t),this.error.set(t.message||"Error cargando la informaci\xF3n")}finally{this.loading.set(!1)}})}cargarProductosSugeridos(t){return S(this,null,function*(){try{let e=Array.isArray(t)?t:[];if(e.length>0){let{data:r,error:n}=yield this.supabase.client.from("productos").select(`
            *,
            inventario:inventario(cantidad)
          `).in("id",e).eq("es_activo",!0);if(n)throw n;let s=r?.map(b=>D(q({},b),{stock_disponible:b.inventario?.reduce((w,P)=>w+P.cantidad,0)||0}))||[];this.productosSugeridos.set(s)}}catch(e){console.error("Error cargando productos sugeridos:",e)}})}cargarTodosLosProductos(){return S(this,null,function*(){try{let{data:t,error:e}=yield this.supabase.client.from("productos").select(`
          *,
          inventario:inventario(cantidad)
        `).eq("es_activo",!0).order("nombre");if(e)throw e;let r=t?.map(b=>D(q({},b),{stock_total:b.inventario?.reduce((w,P)=>w+P.cantidad,0)||0,stock_disponible:b.inventario?.reduce((w,P)=>w+P.cantidad,0)||0}))||[];this.todosLosProductos=r;let n=[...new Set(r.map(b=>b.categoria).filter(Boolean))],s=[...new Set(r.map(b=>b.marca).filter(Boolean))];this.categorias.set(n),this.marcas.set(s),this.buscarProductos()}catch(t){console.error("Error cargando productos:",t)}})}buscarProductos(){let t=[...this.todosLosProductos];if(this.busquedaProducto.trim()){let r=this.busquedaProducto.toLowerCase().trim();t=t.filter(n=>n.nombre?.toLowerCase().includes(r)||n.codigo?.toLowerCase().includes(r)||n.descripcion?.toLowerCase().includes(r))}if(this.categoriaSeleccionada&&(t=t.filter(r=>r.categoria===this.categoriaSeleccionada)),this.marcaSeleccionada&&(t=t.filter(r=>r.marca===this.marcaSeleccionada)),this.filtroStock)switch(this.filtroStock){case"disponible":t=t.filter(r=>(r.stock_total||0)>0);break;case"bajo":t=t.filter(r=>{let n=r.stock_total||0,s=r.stock_minimo||0;return n>0&&n<=s});break;case"agotado":t=t.filter(r=>(r.stock_total||0)===0);break}let e=t.slice(0,20);this.productosEncontrados.set(e)}agregarProducto(t){let e=this.form.get("productos");if(this.productosSeleccionados().some(n=>n.id===t.id))return;let r=this.fb.group({producto_id:[t.id,E.required],cantidad_solicitada:[1,[E.required,E.min(1)]],observaciones:[""]});e.push(r),this.productosSeleccionados.update(n=>[...n,t]),this.busquedaProducto="",this.productosEncontrados.set([])}removerProducto(t){this.form.get("productos").removeAt(t),this.productosSeleccionados.update(r=>r.filter((n,s)=>s!==t))}getProductoNombre(t){return this.productosSeleccionados()[t]?.nombre||""}getProductoCodigo(t){return this.productosSeleccionados()[t]?.codigo||""}onSubmit(){return S(this,null,function*(){if(!(!this.form.valid||this.productosFormArray().length===0))try{this.creandoKit.set(!0),this.error.set(null);let t=this.form.value;if(this.modoEdicion)yield this.actualizarKit(t);else{let e={cirugia_id:this.cirugiaId,productos:t.productos||[],observaciones:t.observaciones_generales||void 0};yield T(this.kitService.crearKit(e))}this.router.navigate(["/internal/agenda"])}catch(t){console.error("Error procesando kit:",t),this.error.set(t.message||"Error procesando el kit")}finally{this.creandoKit.set(!1)}})}volver(){this.router.navigate(["/internal/agenda"])}cargarDatosEdicion(){return S(this,null,function*(){try{this.loading.set(!0),this.error.set(null);let t=yield T(this.kitService.getKit(this.kitId)),e=yield T(this.kitService.getKitProductos(this.kitId));this.cirugiaId=t.cirugia_id;let{data:r,error:n}=yield this.supabase.client.from("cirugias").select(`
          *,
          hospital:hospitales(*),
          tipo_cirugia:tipos_cirugia(*)
        `).eq("id",this.cirugiaId).single();if(n)throw n;this.cirugia.set(r),yield this.cargarTodosLosProductos(),this.llenarFormularioConProductos(e),this.form.patchValue({observaciones_generales:t.observaciones||""})}catch(t){console.error("Error cargando datos para edici\xF3n:",t),this.error.set(t.message||"Error cargando la informaci\xF3n del kit")}finally{this.loading.set(!1)}})}llenarFormularioConProductos(t){let e=this.form.get("productos");for(;e.length!==0;)e.removeAt(0);t.forEach(n=>{let s=this.fb.group({producto_id:[n.producto_id,E.required],nombre:[n.producto?.nombre||""],codigo:[n.producto?.codigo||""],cantidad_solicitada:[n.cantidad_solicitada,[E.required,E.min(1)]],observaciones:[n.observaciones||""]});e.push(s)});let r=t.map(n=>({id:n.producto_id,nombre:n.producto?.nombre,codigo:n.producto?.codigo}));this.productosSeleccionados.set(r)}formatearFecha(t){return t?new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}getStockIcon(t){let e=t.stock_total||t.stock_disponible||0,r=t.stock_minimo||0;return e===0?"\u{1F534}":e<=r?"\u{1F7E1}":"\u{1F7E2}"}getStockColorClass(t){let e=t.stock_total||t.stock_disponible||0,r=t.stock_minimo||0;return e===0?"text-red-600 dark:text-red-400":e<=r?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"}isProductoAgregado(t){return this.form.get("productos").controls.some(r=>r.get("producto_id")?.value===t)}actualizarKit(t){return S(this,null,function*(){console.log("Actualizando kit:",this.kitId,t);let{error:e}=yield this.supabase.client.from("kits_cirugia").update({observaciones:t.observaciones_generales||null,updated_at:new Date().toISOString()}).eq("id",this.kitId);if(e)throw e;let{error:r}=yield this.supabase.client.from("kit_productos").delete().eq("kit_id",this.kitId);if(r)throw r;let n=t.productos||[];if(n.length>0){let s=n.map(w=>({kit_id:this.kitId,producto_id:w.producto_id,cantidad_solicitada:w.cantidad_solicitada,cantidad_preparada:0,observaciones:w.observaciones})),{error:b}=yield this.supabase.client.from("kit_productos").insert(s);if(b)throw b}yield this.supabase.client.from("kit_trazabilidad").insert({kit_id:this.kitId,usuario_id:"00000000-0000-0000-0000-000000000000",accion:"editado",estado_nuevo:"preparando",observaciones:"Kit editado y productos actualizados"})})}getClienteNombre(){let t=this.cirugia();return t?.cliente?`${t.cliente.nombre} ${t.cliente.apellido}`.trim():"Sin informaci\xF3n"}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=H({type:a,selectors:[["app-kit-builder"]],decls:20,vars:5,consts:[[1,"bg-gray-50","dark:bg-gray-900","min-h-screen"],[1,"bg-gradient-to-r","from-green-600","to-emerald-700","text-white","shadow-lg"],[1,"px-4","py-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"flex","items-center","space-x-3"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-8","brightness-0","invert"],[1,"text-lg","font-semibold"],[1,"flex","items-center","space-x-2"],[1,"bg-white/20","hover:bg-white/30","text-white","px-3","py-2","rounded-lg","text-sm","font-medium","transition","duration-200","shadow-md","backdrop-blur-sm",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-center"],[1,"text-2xl","font-bold","mb-1"],["class","text-green-100 text-sm",4,"ngIf"],[1,"px-4","py-6"],[1,"text-green-100","text-sm"],[1,"max-w-lg","mx-auto"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","p-6","text-center"],[1,"animate-pulse","space-y-4"],[1,"h-4","bg-gray-200","rounded","w-3/4","mx-auto"],[1,"h-4","bg-gray-200","rounded","w-1/2","mx-auto"],[1,"h-4","bg-gray-200","rounded","w-2/3","mx-auto"],[1,"text-sm","text-gray-500","mt-4"],[1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-xl","shadow-md"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-500","flex-shrink-0"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-sm"],[1,"max-w-lg","mx-auto","space-y-6",3,"ngSubmit","formGroup"],[1,"bg-white","rounded-xl","shadow-md","dark:bg-gray-800","dark:border","dark:border-gray-700","p-6"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","mb-4","flex","items-center","space-x-2"],[1,"w-8","h-8","bg-gradient-to-br","from-green-400","to-green-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"space-y-3","text-sm"],[1,"flex","justify-between","border-b","border-gray-100","dark:border-gray-700","pb-2"],[1,"font-medium","text-gray-600","dark:text-gray-400"],[1,"text-gray-900","dark:text-white"],[1,"flex","justify-between"],[1,"w-8","h-8","bg-gradient-to-br","from-purple-400","to-purple-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],["for","busqueda",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","text","id","busqueda","placeholder","Buscar por nombre o c\xF3digo...",1,"w-full","px-4","py-3","border","border-gray-300","dark:border-gray-600","rounded-xl","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:text-white","transition","duration-200",3,"ngModelChange","input","ngModel","ngModelOptions"],["for","categoria",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["id","categoria",1,"w-full","px-4","py-3","border","border-gray-300","dark:border-gray-600","rounded-xl","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:text-white","transition","duration-200",3,"ngModelChange","change","ngModel","ngModelOptions"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","stockFilter",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["id","stockFilter",1,"w-full","px-4","py-3","border","border-gray-300","dark:border-gray-600","rounded-xl","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:text-white","transition","duration-200",3,"ngModelChange","change","ngModel","ngModelOptions"],["value","disponible"],["value","bajo"],["value","agotado"],["for","marca",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["id","marca",1,"w-full","px-4","py-3","border","border-gray-300","dark:border-gray-600","rounded-xl","focus:ring-2","focus:ring-green-500","focus:border-transparent","dark:bg-gray-700","dark:text-white","transition","duration-200",3,"ngModelChange","change","ngModel","ngModelOptions"],[1,"text-center","pt-2","border-t","border-gray-200","dark:border-gray-600"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium","bg-green-100","text-green-800","dark:bg-green-900","dark:text-green-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"],[1,"text-center","py-8"],["formArrayName","productos",1,"space-y-4"],[1,"w-8","h-8","bg-gradient-to-br","from-gray-400","to-gray-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["formControlName","observaciones_generales","rows","3","placeholder","Instrucciones especiales, notas para log\xEDstica...",1,"w-full","px-4","py-3","border","border-gray-300","dark:border-gray-600","rounded-xl","focus:ring-2","focus:ring-blue-500","focus:border-transparent","dark:bg-gray-700","dark:text-white","resize-none","transition","duration-200"],[1,"flex","flex-col","sm:flex-row","space-y-3","sm:space-y-0","sm:space-x-4"],["type","button",1,"flex-1","bg-white","hover:bg-gray-50","text-gray-700","border","border-gray-300","px-6","py-3","rounded-xl","font-medium","transition-all","duration-200","dark:bg-gray-800","dark:text-gray-300","dark:border-gray-600","dark:hover:bg-gray-700","shadow-md",3,"click"],["type","submit",1,"flex-1","bg-gradient-to-r","from-green-600","to-emerald-700","hover:from-green-700","hover:to-emerald-800","text-white","px-6","py-3","rounded-xl","font-medium","transition-all","duration-200","shadow-md","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"h-6"],[1,"w-8","h-8","bg-gradient-to-br","from-blue-400","to-blue-600","rounded-lg","flex","items-center","justify-center","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"text-sm","text-gray-600","dark:text-gray-400","mb-4"],[1,"space-y-3"],[1,"flex","justify-between","items-center","p-3","border","border-gray-200","dark:border-gray-600","rounded-lg","hover:bg-gray-50","dark:hover:bg-gray-700","transition","duration-200"],[1,"flex-1"],[1,"font-medium","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-400"],["type","button",1,"bg-blue-600","hover:bg-blue-700","text-white","px-3","py-2","rounded-lg","text-sm","font-medium","transition","duration-200","shadow-md",3,"click"],[3,"value"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"space-y-4","max-h-96","overflow-y-auto"],[1,"border","border-gray-200","dark:border-gray-600","rounded-lg","p-4","bg-gray-50","dark:bg-gray-700"],[1,"flex","justify-between","items-start","mb-3"],[1,"flex","items-center","space-x-2","mt-2"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","text-xs","font-medium","bg-blue-100","text-blue-800","dark:bg-blue-900","dark:text-blue-300"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","text-xs","font-medium","bg-purple-100","text-purple-800","dark:bg-purple-900","dark:text-purple-300"],[1,"text-right","ml-4"],[1,"text-lg"],[1,"text-sm","font-bold",3,"ngClass"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"text-sm","font-semibold","text-gray-900","dark:text-white","mt-1"],[1,"text-xs","text-gray-600","dark:text-gray-300","bg-white","dark:bg-gray-800","p-2","rounded","mb-3"],["type","button",1,"w-full","bg-blue-600","hover:bg-blue-700","disabled:bg-gray-400","text-white","px-3","py-2","rounded-lg","text-sm","font-medium","transition","duration-200","disabled:cursor-not-allowed",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400","mx-auto","mb-4"],[1,"text-gray-500","dark:text-gray-400"],[1,"text-sm","text-gray-400","dark:text-gray-500","mt-1"],[1,"border","border-gray-200","dark:border-gray-600","rounded-lg","p-4","bg-gray-50","dark:bg-gray-700",3,"formGroupName"],["type","button",1,"text-red-600","hover:text-red-800","dark:text-red-400","dark:hover:text-red-300","p-1","rounded-lg","hover:bg-red-50","dark:hover:bg-red-900/20","transition","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["type","number","formControlName","cantidad_solicitada","min","1",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","dark:bg-gray-600","dark:text-white","transition","duration-200"],["type","text","formControlName","observaciones","placeholder","Notas adicionales...",1,"w-full","px-3","py-2","border","border-gray-300","dark:border-gray-600","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","dark:bg-gray-600","dark:text-white","transition","duration-200"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","w-5","h-5","inline","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","inline","mr-2"]],template:function(e,r){e&1&&(i(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4),m(5,"img",5),i(6,"span",6),d(7,"Armar Kit Quir\xFArgico"),o()(),i(8,"div",7)(9,"button",8),C("click",function(){return r.volver()}),u(),i(10,"svg",9),m(11,"path",10),o(),d(12," Volver "),o()()(),y(),i(13,"div",11)(14,"h1",12),d(15),o(),x(16,Ce,2,2,"p",13),o()()(),x(17,ke,9,0,"div",14)(18,we,8,1,"div",2)(19,He,97,26,"main",14),o()),e&2&&(l(15),h(r.modoEdicion?"Editar Kit Quir\xFArgico":"Crear Kit Quir\xFArgico"),l(),p("ngIf",r.cirugia()),l(),f(r.loading()?17:-1),l(),f(r.error()?18:-1),l(),f(!r.loading()&&!r.error()?19:-1))},dependencies:[X,R,Q,U,J,Y,fe,ae,pe,ge,ie,de,ue,oe,re,_e,le,me,se,ce,be,ne],styles:[".grid[_ngcontent-%COMP%]{display:grid}.grid-cols-1[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}.gap-4[_ngcontent-%COMP%]{gap:1rem}.max-h-60[_ngcontent-%COMP%]{max-height:15rem}.overflow-y-auto[_ngcontent-%COMP%]{overflow-y:auto}.space-x-4[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){margin-left:1rem}.flex-1[_ngcontent-%COMP%]{flex:1 1 0%}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (min-width: 768px){.md\\:grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}.form-section[_ngcontent-%COMP%]{max-width:42rem;margin:0 auto}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.animate-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite}.max-h-60[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.max-h-60[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.max-h-60[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.max-h-60[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.dark[_ngcontent-%COMP%]   .max-h-60[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#374151}.dark[_ngcontent-%COMP%]   .max-h-60[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#6b7280}.dark[_ngcontent-%COMP%]   .max-h-60[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#9ca3af}"]})};export{ve as KitBuilderComponent};
