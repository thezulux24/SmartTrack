import{a as H}from"./chunk-CUSICNO3.js";import"./chunk-SJQHPYOF.js";import"./chunk-Q6XZXIU7.js";import{$ as S,E as b,Ea as M,G as r,Ga as V,Ia as T,J as y,N as f,Q as I,S as E,T as x,Y as e,Z as t,_ as m,aa as _,ba as u,da as n,ea as s,fa as w,n as D,u as h,w as v,x as C,y as p,z as g}from"./chunk-NR6UGQL3.js";import"./chunk-LJ5XHLMQ.js";import"./chunk-FK42CRUA.js";function z(o,i){o&1&&(e(0,"main",16)(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",20),p(),e(5,"svg",21),m(6,"circle",22)(7,"path",23),t()(),g(),e(8,"p",24),n(9,"Cargando informaci\xF3n..."),t()()()()())}function A(o,i){if(o&1){let a=S();e(0,"main",16)(1,"div",17)(2,"div",18)(3,"div",25),p(),e(4,"svg",26),m(5,"path",27),t(),g(),e(6,"p",28),n(7),t()(),e(8,"div",29)(9,"button",30),_("click",function(){v(a);let c=u();return C(c.recargarDatos())}),n(10," Reintentar "),t(),e(11,"button",31),_("click",function(){v(a);let c=u();return C(c.volverAtras())}),n(12," Volver a la Lista "),t()()()()()}if(o&2){let a=u();r(7),s(a.error())}}function F(o,i){if(o&1&&(e(0,"div",47)(1,"p",48),n(2,"Documento"),t(),e(3,"p",49),n(4),t()()),o&2){let a=u(2);r(4),s(a.getClienteDocumento())}}function L(o,i){if(o&1&&(e(0,"div",47)(1,"p",48),n(2,"Tel\xE9fono"),t(),e(3,"p",49),n(4),t()()),o&2){let a=u(2);r(4),s(a.getClienteTelefono())}}function N(o,i){if(o&1&&(e(0,"div",47)(1,"p",48),n(2,"Email"),t(),e(3,"p",59),n(4),t()()),o&2){let a=u(2);r(4),s(a.getClienteEmail())}}function B(o,i){if(o&1&&(e(0,"div",47)(1,"p",48),n(2,"Ciudad"),t(),e(3,"p",49),n(4),t()()),o&2){let a=u(2);r(4),s(a.getClienteCiudad())}}function G(o,i){if(o&1&&(e(0,"div",47)(1,"p",48),n(2,"Direcci\xF3n"),t(),e(3,"p",49),n(4),t()()),o&2){let a,d=u(2);r(4),s((a=d.cirugia().hospital_data)==null?null:a.direccion)}}function $(o,i){if(o&1&&(e(0,"div",47)(1,"p",48),n(2,"Tel\xE9fono Hospital"),t(),e(3,"p",49),n(4),t()()),o&2){let a,d=u(2);r(4),s((a=d.cirugia().hospital_data)==null?null:a.telefono)}}function P(o,i){if(o&1&&(e(0,"div",47)(1,"p",48),n(2,"\xC1rea"),t(),e(3,"p",61),n(4),t()()),o&2){let a=u(3);r(4),s(a.cirugia().tecnico_asignado.area)}}function q(o,i){if(o&1&&(m(0,"div",40),e(1,"div")(2,"div",41)(3,"div",42),p(),e(4,"svg",43),m(5,"path",60),t()(),g(),e(6,"h2",45),n(7,"T\xE9cnico Asignado"),t()(),e(8,"div",46)(9,"div",47)(10,"p",48),n(11,"Nombre"),t(),e(12,"p",61),n(13),t()(),e(14,"div",47)(15,"p",48),n(16,"Email"),t(),e(17,"p",59),n(18),t()(),f(19,P,5,1,"div",47),t()()),o&2){let a=u(2);r(13),s(a.cirugia().tecnico_asignado.full_name),r(5),s(a.cirugia().tecnico_asignado.email),r(),x(a.cirugia().tecnico_asignado.area?19:-1)}}function O(o,i){if(o&1){let a=S();e(0,"main",16)(1,"div",32)(2,"div",33)(3,"h1",34),n(4),t(),e(5,"div",35)(6,"span",36),n(7),t(),e(8,"span",36),n(9),t()()(),e(10,"div",37)(11,"div",38)(12,"button",30),_("click",function(){v(a);let c=u();return C(c.editarCirugia())}),n(13," Editar "),t(),e(14,"button",39),_("click",function(){v(a);let c=u();return C(c.cambiarEstado())}),n(15," Cambiar Estado "),t()(),m(16,"div",40),e(17,"div")(18,"div",41)(19,"div",42),p(),e(20,"svg",43),m(21,"path",44),t()(),g(),e(22,"h2",45),n(23,"Informaci\xF3n del Paciente"),t()(),e(24,"div",46)(25,"div",47)(26,"p",48),n(27,"Nombre completo"),t(),e(28,"p",49),n(29),t()(),f(30,F,5,1,"div",47)(31,L,5,1,"div",47)(32,N,5,1,"div",47)(33,B,5,1,"div",47),t()(),m(34,"div",40),e(35,"div")(36,"div",41)(37,"div",42),p(),e(38,"svg",43),m(39,"path",50),t()(),g(),e(40,"h2",45),n(41,"Informaci\xF3n de la Cirug\xEDa"),t()(),e(42,"div",46)(43,"div",47)(44,"p",48),n(45,"Hospital/Cl\xEDnica"),t(),e(46,"p",49),n(47),t()(),f(48,G,5,1,"div",47)(49,$,5,1,"div",47),e(50,"div",47)(51,"p",48),n(52,"Tipo de Cirug\xEDa"),t(),e(53,"p",49),n(54),t()(),e(55,"div",47)(56,"p",48),n(57,"M\xE9dico Cirujano"),t(),e(58,"p",49),n(59),t()()()(),m(60,"div",40),e(61,"div")(62,"div",41)(63,"div",42),p(),e(64,"svg",43),m(65,"path",15),t()(),g(),e(66,"h2",45),n(67,"Programaci\xF3n"),t()(),e(68,"div",46)(69,"div",47)(70,"p",48),n(71,"Fecha Programada"),t(),e(72,"p",49),n(73),t()(),e(74,"div",47)(75,"p",48),n(76,"Hora de Inicio"),t(),e(77,"p",49),n(78),t()(),e(79,"div",47)(80,"p",48),n(81,"Duraci\xF3n Estimada"),t(),e(82,"p",49),n(83),t()()()(),f(84,q,20,3),m(85,"div",40),e(86,"div")(87,"div",41)(88,"div",42),p(),e(89,"svg",43),m(90,"path",51),t()(),g(),e(91,"h2",45),n(92,"Informaci\xF3n del Sistema"),t()(),e(93,"div",46)(94,"div",47)(95,"p",48),n(96,"N\xFAmero de Cirug\xEDa"),t(),e(97,"p",52),n(98),t()(),e(99,"div",47)(100,"p",48),n(101,"Contacto"),t(),e(102,"p",49),n(103,"Implameq"),t()(),e(104,"div",47)(105,"p",48),n(106,"\xDAltima Actualizaci\xF3n"),t(),e(107,"p",49),n(108),t()()()(),m(109,"div",40),e(110,"div",53)(111,"button",54),_("click",function(){v(a);let c=u();return C(c.compartirCirugia())}),p(),e(112,"svg",55),m(113,"path",56),t(),g(),e(114,"span"),n(115,"Compartir"),t()(),e(116,"button",54),_("click",function(){v(a);let c=u();return C(c.imprimirDetalle())}),p(),e(117,"svg",55),m(118,"path",57),t(),g(),e(119,"span"),n(120,"Imprimir"),t()(),e(121,"button",54),_("click",function(){v(a);let c=u();return C(c.volverAtras())}),p(),e(122,"svg",55),m(123,"path",58),t(),g(),e(124,"span"),n(125,"Volver"),t()()()()()()}if(o&2){let a,d,c,k,l=u();r(4),s(l.cirugia().numero_cirugia),r(2),E(l.getPrioridadInfo(l.cirugia().prioridad).color),r(),w(" ",l.getPrioridadInfo(l.cirugia().prioridad).label," "),r(),E(l.getEstadoInfo(l.cirugia().estado).color),r(),w(" ",l.getEstadoInfo(l.cirugia().estado).label," "),r(5),I("disabled",l.cirugia().estado==="completada"||l.cirugia().estado==="cancelada"),r(15),s(l.getClienteNombre()),r(),x(l.getClienteDocumento()?30:-1),r(),x(l.getClienteTelefono()?31:-1),r(),x(l.getClienteEmail()?32:-1),r(),x(l.getClienteCiudad()?33:-1),r(14),s(((a=l.cirugia().hospital_data)==null?null:a.nombre)||"No especificado"),r(),x((d=l.cirugia().hospital_data)!=null&&d.direccion?48:-1),r(),x((c=l.cirugia().hospital_data)!=null&&c.telefono?49:-1),r(5),s(((k=l.cirugia().tipo_cirugia_data)==null?null:k.nombre)||"No especificado"),r(5),s(l.cirugia().medico_cirujano),r(14),s(l.formatFecha(l.cirugia().fecha_programada)),r(5),s(l.formatHora(l.cirugia().hora_inicio)),r(5),s(l.formatDuracion(l.cirugia().duracion_estimada)),r(),x(l.cirugia().tecnico_asignado?84:-1),r(14),s(l.cirugia().numero_cirugia),r(10),s(l.formatFechaCorta(l.cirugia().updated_at))}}var j=class o{route=h(V);router=h(T);cirugiasService=h(H);loading=b(!1);error=b(null);cirugia=b(null);estadosInfo={programada:{label:"Programada",color:"bg-blue-100 text-blue-800",icon:"\u{1F4C5}"},en_curso:{label:"En Curso",color:"bg-yellow-100 text-yellow-800",icon:"\u26A1"},completada:{label:"Completada",color:"bg-green-100 text-green-800",icon:"\u2705"},cancelada:{label:"Cancelada",color:"bg-red-100 text-red-800",icon:"\u274C"},urgencia:{label:"Urgencia",color:"bg-orange-100 text-orange-800",icon:"\u{1F6A8}"}};prioridadesInfo={baja:{label:"Baja",color:"bg-gray-100 text-gray-800"},normal:{label:"Normal",color:"bg-blue-100 text-blue-800"},alta:{label:"Alta",color:"bg-yellow-100 text-yellow-800"},urgencia:{label:"Urgencia",color:"bg-red-100 text-red-800"}};ngOnInit(){console.log("\u{1F680} CirugiaDetailComponent iniciando..."),this.loadCirugia()}loadCirugia(){this.loading.set(!0),this.error.set(null),this.route.paramMap.pipe(D(i=>{let a=i.get("id");if(!a)throw new Error("ID de cirug\xEDa no encontrado");return console.log("\u{1F4CB} Cargando cirug\xEDa con ID:",a),this.cirugiasService.getCirugiaById(a)})).subscribe({next:i=>{console.log("\u2705 Cirug\xEDa cargada:",i),this.cirugia.set(i),this.loading.set(!1)},error:i=>{console.error("\u274C Error loading cirugia:",i),this.error.set("Error al cargar la cirug\xEDa: "+(i?.message||i)),this.loading.set(!1)}})}formatFecha(i){return new Date(i).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}formatFechaCorta(i){return new Date(i).toLocaleDateString("es-ES")}formatHora(i){return i||"No especificada"}formatDuracion(i){if(!i)return"No especificada";let a=Math.floor(i/60),d=i%60;return a>0?`${a}h ${d}m`:`${d}m`}getEstadoInfo(i){return this.estadosInfo[i]||{label:i,color:"bg-gray-100 text-gray-800",icon:"\u2753"}}getPrioridadInfo(i){return this.prioridadesInfo[i]||{label:i,color:"bg-gray-100 text-gray-800"}}editarCirugia(){let i=this.cirugia();i&&this.router.navigate(["/internal/agenda/editar",i.id])}cambiarEstado(){let i=this.cirugia();if(!i)return;if(i.estado==="completada"||i.estado==="cancelada"){alert("No se puede cambiar el estado de una cirug\xEDa completada o cancelada");return}let a;switch(i.estado){case"programada":a="en_curso";break;case"en_curso":a="completada";break;case"urgencia":a="en_curso";break;default:a="programada";break}let d=this.getEstadoInfo(a);confirm(`\xBFCambiar estado a "${d.label}"?`)&&(this.loading.set(!0),this.cirugiasService.updateCirugia(i.id,{estado:a}).subscribe({next:c=>{console.log("\u2705 Estado actualizado:",c),this.cirugia.set(c),this.loading.set(!1)},error:c=>{console.error("\u274C Error updating estado:",c),alert("Error al cambiar estado: "+(c?.message||c)),this.loading.set(!1)}}))}volverAtras(){this.router.navigate(["/internal/agenda"])}recargarDatos(){this.loadCirugia()}compartirCirugia(){let i=this.cirugia();i&&(navigator.share?navigator.share({title:`Cirug\xEDa ${i.numero_cirugia}`,text:`${this.getClienteNombre()} - ${i.tipo_cirugia_data?.nombre}`,url:window.location.href}).catch(console.error):navigator.clipboard.writeText(window.location.href).then(()=>{alert("Enlace copiado al portapapeles")}).catch(()=>{alert("No se pudo copiar el enlace")}))}imprimirDetalle(){window.print()}getClienteNombre(){let i=this.cirugia();return i?.cliente?`${i.cliente.nombre} ${i.cliente.apellido}`.trim():"Sin informaci\xF3n"}getClienteDocumento(){let i=this.cirugia();return i?.cliente?`${i.cliente.documento_tipo}: ${i.cliente.documento_numero}`:null}getClienteTelefono(){let i=this.cirugia();return i?.cliente&&i.cliente.telefono||null}getClienteEmail(){let i=this.cirugia();return i&&i.cliente?.email||null}getClienteCiudad(){let i=this.cirugia();return i&&i.cliente?.ciudad||null}static \u0275fac=function(a){return new(a||o)};static \u0275cmp=y({type:o,selectors:[["app-cirugia-detail"]],decls:21,vars:1,consts:[[1,"min-h-screen","bg-white","relative"],[1,"fixed","inset-0","z-0"],["src","/02.jpg","alt","Background",1,"w-full","h-full","object-cover"],[1,"absolute","inset-0","bg-white/98"],[1,"bg-white/50","backdrop-blur-sm","border-b","border-gray-200","sticky","top-0","z-20"],[1,"max-w-2xl","mx-auto","px-6","py-4"],[1,"flex","items-center","justify-between"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq",1,"h-8","w-auto"],[1,"text-xs","text-[#0098A8]","mt-1"],[1,"flex","items-center","gap-3"],[1,"h-10","w-10","rounded-lg","bg-[#10284C]","hover:bg-[#10284C]/90","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-[#CBDD00]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],[1,"h-10","w-10","rounded-lg","bg-[#CBDD00]","hover:bg-[#CBDD00]/90","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-[#10284C]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"relative","z-10","px-6","py-8"],[1,"max-w-2xl","mx-auto"],[1,"bg-white/70","backdrop-blur-sm","rounded-xl","border-2","border-[#0098A8]","p-6","text-center"],[1,"animate-pulse","space-y-3"],[1,"flex","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-10","w-10","text-[#0098A8]"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-xs","text-[#10284C]","font-medium"],[1,"text-red-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-xs","mb-4"],[1,"space-y-2"],[1,"w-full","bg-[#10284C]","hover:bg-[#0a1a30]","text-[#C8D900]","px-4","py-3","rounded-lg","text-sm","font-semibold","transition","duration-200",3,"click"],[1,"w-full","bg-gray-100","hover:bg-gray-200","text-gray-700","px-4","py-3","rounded-lg","text-sm","font-semibold","transition","duration-200",3,"click"],[1,"max-w-2xl","mx-auto","space-y-6"],[1,"text-center"],[1,"text-3xl","font-bold","mb-4","text-[#10284C]"],[1,"flex","items-center","justify-center","gap-2","mb-6"],[1,"px-3","py-1","rounded-full","text-xs","font-medium"],[1,"bg-white/70","backdrop-blur-sm","rounded-xl","border-2","border-[#0098A8]","p-6","space-y-6"],[1,"space-y-3"],[1,"w-full","bg-[#10284C]","hover:bg-[#0a1a30]","disabled:bg-gray-400","disabled:cursor-not-allowed","text-[#C8D900]","px-4","py-3","rounded-lg","text-sm","font-semibold","transition","duration-200",3,"click","disabled"],[1,"h-0.5","bg-[#CBDD00]"],[1,"flex","items-center","gap-3","mb-4"],[1,"w-10","h-10","rounded-full","bg-[#0098A8]","flex","items-center","justify-center","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-lg","font-semibold","text-[#10284C]"],[1,"space-y-0"],[1,"grid","grid-cols-2","gap-x-4","py-2","border-b","border-[#0098A8]/20"],[1,"text-xs","text-[#10284C]"],[1,"text-xs","text-gray-500","text-right"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-xs","text-gray-500","text-right","font-mono"],[1,"space-y-3","pt-2"],[1,"w-full","bg-[#10284C]","hover:bg-[#0a1a30]","text-[#C8D900]","px-4","py-3","rounded-lg","text-sm","font-semibold","transition","duration-200","flex","items-center","justify-center","gap-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"text-xs","text-gray-500","text-right","break-all"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"text-xs","text-gray-500","text-right","break-words"]],template:function(a,d){a&1&&(e(0,"section",0)(1,"div",1),m(2,"img",2)(3,"div",3),t(),e(4,"header",4)(5,"div",5)(6,"div",6)(7,"div"),m(8,"img",7),e(9,"p",8),n(10,"Implantes m\xE9dicos - Quir\xFArgicos"),t()(),e(11,"div",9)(12,"button",10),p(),e(13,"svg",11),m(14,"path",12),t()(),g(),e(15,"button",13),p(),e(16,"svg",14),m(17,"path",15),t()()()()()(),f(18,z,10,0,"main",16)(19,A,13,1,"main",16)(20,O,126,24,"main",16),t()),a&2&&(r(18),x(d.loading()?18:d.error()?19:d.cirugia()?20:-1))},dependencies:[M],encapsulation:2})};export{j as CirugiaDetailComponent};
