import{A as _,D as d,F as t,G as i,H as x,I as b,J as f,K as m,L as r,M as s,N as S,P as C,V as P,W as E,X as I,_ as H,ba as N,ca as T,j as u,l as p,m as g,n as h,o as w,t as o,w as k}from"./chunk-XZWFQ4NH.js";import"./chunk-LJ5XHLMQ.js";import{h as v}from"./chunk-FK42CRUA.js";var W=(n,a,e,l,c)=>({"bg-blue-100 text-blue-800":n,"bg-green-100 text-green-800":a,"bg-yellow-100 text-yellow-800":e,"bg-purple-100 text-purple-800":l,"bg-gray-100 text-gray-800":c});function V(n,a){n&1&&(t(0,"div",6)(1,"div",7)(2,"div",8),x(3,"div",9)(4,"div",10),i(),t(5,"p",11),r(6,"Cargando informaci\xF3n del usuario..."),i()()())}function A(n,a){if(n&1){let e=b();t(0,"div",6)(1,"div",7)(2,"div",12),h(),t(3,"svg",13),x(4,"path",14),i(),w(),t(5,"p",15),r(6),i()(),t(7,"button",16),f("click",function(){p(e);let c=m();return g(c.logout())}),r(8," Volver al login "),i()()()}if(n&2){let e=m();o(6),s(e.error)}}function M(n,a){if(n&1&&(t(0,"div",27)(1,"span",28),r(2,"\xC1rea:"),i(),t(3,"span",33),r(4),i()()),n&2){let e=m(2);o(4),s(e.userProfile.area)}}function j(n,a){if(n&1&&(t(0,"div",27)(1,"span",28),r(2,"Tel\xE9fono:"),i(),t(3,"span",34),r(4),i()()),n&2){let e=m(2);o(4),s(e.userProfile.phone)}}function z(n,a){if(n&1){let e=b();t(0,"div",6)(1,"div",17)(2,"div",18)(3,"div",19)(4,"span",20),r(5),i()(),t(6,"h2",21),r(7),i(),t(8,"p",4),r(9),i(),t(10,"div",22)(11,"span",23),r(12),i()(),t(13,"p",24),r(14),i()(),t(15,"div",25),_(16,M,5,1,"div",26)(17,j,5,1,"div",26),t(18,"div",27)(19,"span",28),r(20,"Estado:"),i(),t(21,"span",29),r(22),i()()(),t(23,"div",30)(24,"button",31),f("click",function(){p(e);let c=m();return g(c.acceder())}),r(25," Acceder al Sistema "),i(),t(26,"button",32),f("click",function(){p(e);let c=m();return g(c.logout())}),r(27," Cerrar sesi\xF3n "),i()()()()}if(n&2){let e=m();o(5),s(e.displayName.charAt(0).toUpperCase()),o(2),s(e.displayName),o(2),s(e.userProfile.email),o(2),d("ngClass",C(9,W,e.userProfile.role==="comercial",e.userProfile.role==="soporte_tecnico",e.userProfile.role==="logistica",e.userProfile.role==="admin",e.userProfile.role==="client")),o(),S(" ",e.roleDisplayName," "),o(2),s(e.organizationName),o(2),d("ngIf",e.userProfile.area),o(),d("ngIf",e.userProfile.phone),o(5),s(e.userProfile.is_active?"Activo":"Inactivo")}}var y=class n{_authService=u(T);_supabaseService=u(N);_router=u(H);loading=!0;userProfile=null;error=null;ngOnInit(){return v(this,null,function*(){try{let e=(yield this._supabaseService.getSession())?.user?.id;if(!e){this._router.navigate(["/auth"]);return}let l=yield this._supabaseService.getUserProfile(e);if(!l){this.error="No se encontr\xF3 perfil de usuario";return}this.userProfile=l}catch(a){console.error("Error cargando perfil:",a),this.error=a?.message??"Error al cargar informaci\xF3n del usuario"}finally{this.loading=!1}})}get displayName(){return this.userProfile?.full_name||this.userProfile?.email||"Usuario"}get roleDisplayName(){return{client:"Cliente",comercial:"Comercial",soporte_tecnico:"Soporte T\xE9cnico",logistica:"Log\xEDstica",admin:"Administrador"}[this.userProfile?.role||""]||this.userProfile?.role||"Sin rol"}get organizationName(){return this.userProfile?.role==="client"?this.userProfile.company_name||"Organizaci\xF3n no especificada":"Implameq S.A.S."}acceder(){if(!this.userProfile?.role)return;this.userProfile.role==="client"?this._router.navigate(["/client"]):this._router.navigate(["/internal"])}logout(){return v(this,null,function*(){yield this._authService.logOut(),this._router.navigate(["/auth/log-in"])})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-welcome-home"]],decls:10,vars:3,consts:[[1,"bg-gray-50","dark:bg-gray-900","min-h-screen","flex","flex-col","items-center","justify-center","px-6","py-8","mx-auto"],[1,"flex","flex-col","items-center","mb-6"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white","mb-4"],["src","https://www.implameq.com/wp-content/uploads/logotipo-impla-300x78.png.webp","alt","Implameq Logo",1,"w-48","mb-2"],[1,"text-sm","text-gray-600","dark:text-gray-300"],["class","w-full bg-white rounded-lg shadow dark:border sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700",4,"ngIf"],[1,"w-full","bg-white","rounded-lg","shadow","dark:border","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8","text-center"],[1,"animate-pulse"],[1,"h-4","bg-gray-200","rounded","w-3/4","mx-auto","mb-2"],[1,"h-4","bg-gray-200","rounded","w-1/2","mx-auto"],[1,"text-sm","text-gray-500"],[1,"text-red-600","dark:text-red-400"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm"],["type","button",1,"w-full","text-white","bg-red-600","hover:bg-red-700","focus:ring-4","focus:outline-none","focus:ring-red-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",3,"click"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-center","border-b","pb-4","mb-4"],[1,"w-16","h-16","bg-gradient-to-r","from-lime-400","to-green-500","rounded-full","flex","items-center","justify-center","mx-auto","mb-3"],[1,"text-white","text-xl","font-bold"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white"],[1,"mt-2"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-2"],[1,"space-y-2","text-sm"],["class","flex justify-between",4,"ngIf"],[1,"flex","justify-between"],[1,"text-gray-600","dark:text-gray-300"],[1,"text-green-600","dark:text-green-400"],[1,"space-y-3","pt-4"],["type","button",1,"w-full","text-gray-900","bg-lime-400","hover:bg-lime-500","focus:ring-4","focus:outline-none","focus:ring-lime-300","font-bold","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-lime-400","dark:hover:bg-lime-500","dark:focus:ring-lime-500",3,"click"],["type","button",1,"w-full","text-white","bg-green-600","hover:bg-green-700","focus:ring-4","focus:outline-none","focus:ring-green-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-green-600","dark:hover:bg-green-700","dark:focus:ring-green-800",3,"click"],[1,"text-gray-900","dark:text-white","capitalize"],[1,"text-gray-900","dark:text-white"]],template:function(e,l){e&1&&(t(0,"section",0)(1,"div",1)(2,"h1",2),r(3,"Bienvenido a"),i(),x(4,"img",3),t(5,"p",4),r(6,"Implantes m\xE9dico - Quir\xFArgicos"),i()(),_(7,V,7,0,"div",5)(8,A,9,1,"div",5)(9,z,28,15,"div",5),i()),e&2&&(o(7),d("ngIf",l.loading),o(),d("ngIf",!l.loading&&l.error),o(),d("ngIf",!l.loading&&!l.error&&l.userProfile))},dependencies:[I,P,E],encapsulation:2})};export{y as default};
