import{$ as Ut,A as di,Aa as po,B as Zs,Ba as Wr,C as Js,Ca as go,D as Xs,Da as pt,E as se,Ea as Re,F as Qs,Fa as _i,G as z,H as M,Ia as mo,J as C,Ja as Di,K as ct,Ka as bi,L as eo,La as Si,M as x,Ma as vo,N as hi,Na as yo,O as A,P as _,Q as to,R as ro,S as lt,T as ce,U as jt,Wa as wo,Ya as Ci,Z as fi,Za as Vt,_ as pi,_a as _o,a as qs,aa as no,b as Gs,ba as io,c as oi,ca as dt,d as ai,da as Ae,e as ie,ea as gi,f as X,fa as so,g as _e,ga as $t,h as W,i as D,ia as oo,j as Nt,ja as mi,k as Ws,ka as ao,l as Ks,la as ht,m as k,ma as vi,n as qr,na as uo,o as K,oa as yi,ob as Do,p as ui,pa as co,q as Ys,qa as Bt,qb as bo,r as ci,ra as lo,rb as qt,sb as So,t as Ce,ta as ft,tb as Co,u as Le,ua as wi,ub as Gt,v as Ne,va as ho,w as li,wa as zt,x as ut,xa as q,xb as Eo,y as Gr,ya as fo,z as Ee,za as Ht}from"./chunk-L6U4RGVI.js";import{b as Ao,c as Ro,f as dc,g as To}from"./chunk-LJ5XHLMQ.js";import{a as v,b as V,d as Fe,f as cc,g as lc,h}from"./chunk-FK42CRUA.js";var _s=Fe(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});var ys=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ws.default=ys});var bs=Fe(Sr=>{"use strict";var eu=Sr&&Sr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Sr,"__esModule",{value:!0});var xd=eu((To(),lc(dc))),Fd=eu(_s()),Ds=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=xd.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>h(this,null,function*(){var o,a,u,c;let l=null,d=null,p=null,f=s.status,g=s.statusText;if(s.ok){if(this.method!=="HEAD"){let T=yield s.text();T===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?d=T:d=JSON.parse(T))}let m=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),R=(u=s.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");m&&R&&R.length>1&&(p=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(l={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,p=null,f=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{let m=yield s.text();try{l=JSON.parse(m),Array.isArray(l)&&s.status===404&&(d=[],l=null,f=200,g="OK")}catch{s.status===404&&m===""?(f=204,g="No Content"):l={message:m}}if(l&&this.isMaybeSingle&&(!((c=l?.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,f=200,g="OK"),l&&this.shouldThrowOnError)throw new Fd.default(l)}return{error:l,data:d,count:p,status:f,statusText:g}}));return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,u;return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:`${(a=s?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(u=s?.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}};Sr.default=Ds});var Cs=Fe(Cr=>{"use strict";var Ld=Cr&&Cr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Cr,"__esModule",{value:!0});var Nd=Ld(bs()),Ss=class extends Nd.default{select(t){let e=!1,r=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){let o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:i=r}={}){let s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;let u=[t?"analyze":null,e?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Cr.default=Ss});var Ln=Fe(Er=>{"use strict";var jd=Er&&Er.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Er,"__esModule",{value:!0});var Ud=jd(Cs()),Es=class extends Ud.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");let o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};Er.default=Es});var Rs=Fe(Rr=>{"use strict";var $d=Rr&&Rr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Rr,"__esModule",{value:!0});var Ar=$d(Ln()),As=class{constructor(t,{headers:e={},schema:r,fetch:i}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=i}select(t,{head:e=!1,count:r}={}){let i=e?"HEAD":"GET",s=!1,o=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Ar.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var i;let s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let o=t.reduce((a,u)=>a.concat(Object.keys(u)),[]);if(o.length>0){let a=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ar.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var o;let a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let u=t.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(u.length>0){let c=[...new Set(u)].map(l=>`"${l}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ar.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var r;let i="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Ar.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;let r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Ar.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}};Rr.default=As});var ru=Fe(Tr=>{"use strict";var tu=Tr&&Tr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Tr,"__esModule",{value:!0});var Bd=tu(Rs()),zd=tu(Ln()),Ts=class n{constructor(t,{headers:e={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(e),this.schemaName=r,this.fetch=i}from(t){let e=new URL(`${this.url}/${t}`);return new Bd.default(e,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:i=!1,count:s}={}){var o;let a,u=new URL(`${this.url}/rpc/${t}`),c;r||i?(a=r?"HEAD":"GET",Object.entries(e).filter(([d,p])=>p!==void 0).map(([d,p])=>[d,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([d,p])=>{u.searchParams.append(d,p)})):(a="POST",c=e);let l=new Headers(this.headers);return s&&l.set("Prefer",`count=${s}`),new zd.default({method:a,url:u,headers:l,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Tr.default=Ts});var cu=Fe(B=>{"use strict";var Rt=B&&B.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(B,"__esModule",{value:!0});B.PostgrestError=B.PostgrestBuilder=B.PostgrestTransformBuilder=B.PostgrestFilterBuilder=B.PostgrestQueryBuilder=B.PostgrestClient=void 0;var nu=Rt(ru());B.PostgrestClient=nu.default;var iu=Rt(Rs());B.PostgrestQueryBuilder=iu.default;var su=Rt(Ln());B.PostgrestFilterBuilder=su.default;var ou=Rt(Cs());B.PostgrestTransformBuilder=ou.default;var au=Rt(bs());B.PostgrestBuilder=au.default;var uu=Rt(_s());B.PostgrestError=uu.default;B.default={PostgrestClient:nu.default,PostgrestQueryBuilder:iu.default,PostgrestFilterBuilder:su.default,PostgrestTransformBuilder:ou.default,PostgrestBuilder:au.default,PostgrestError:uu.default}});var $=new x("");var ko=null;function De(){return ko}function Ei(n){ko??=n}var Wt=class{},Kt=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:()=>_(Po),providedIn:"platform"})}return n})(),Ai=new x(""),Po=(()=>{class n extends Kt{_location;_history;_doc=_($);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return De().getBaseHref(this._doc)}onPopState(e){let r=De().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=De().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Kr(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function Io(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function oe(n){return n&&n[0]!=="?"?`?${n}`:n}var ae=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:()=>_(Zr),providedIn:"root"})}return n})(),Yr=new x(""),Zr=(()=>{class n extends ae{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??_($).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Kr(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+oe(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,s){let o=this.prepareExternalUrl(i+oe(s));this._platformLocation.pushState(e,r,o)}replaceState(e,r,i,s){let o=this.prepareExternalUrl(i+oe(s));this._platformLocation.replaceState(e,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(A(Kt),A(Yr,8))};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Te=(()=>{class n{_subject=new ie;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=pc(Io(Oo(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+oe(r))}normalize(e){return n.stripTrailingSlash(fc(this._basePath,Oo(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+oe(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+oe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=oe;static joinWithSlash=Kr;static stripTrailingSlash=Io;static \u0275fac=function(r){return new(r||n)(A(ae))};static \u0275prov=C({token:n,factory:()=>hc(),providedIn:"root"})}return n})();function hc(){return new Te(A(ae))}function fc(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function Oo(n){return n.replace(/\/index.html$/,"")}function pc(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var Oi=(()=>{class n extends ae{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(e){let r=Kr(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,s){let o=this.prepareExternalUrl(i+oe(s))||this._platformLocation.pathname;this._platformLocation.pushState(e,r,o)}replaceState(e,r,i,s){let o=this.prepareExternalUrl(i+oe(s))||this._platformLocation.pathname;this._platformLocation.replaceState(e,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(A(Kt),A(Yr,8))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})();var ki=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(ki||{});var le={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function gt(n,t){let e=Ci(n),r=e[Vt.NumberSymbols][t];if(typeof r>"u"){if(t===le.CurrencyDecimal)return e[Vt.NumberSymbols][le.Decimal];if(t===le.CurrencyGroup)return e[Vt.NumberSymbols][le.Group]}return r}function No(n,t){return Ci(n)[Vt.NumberFormats][t]}var gc=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Mo=22,Jr=".",Yt="0",mc=";",vc=",",Ri="#";function yc(n,t,e,r,i,s,o=!1){let a="",u=!1;if(!isFinite(n))a=gt(e,le.Infinity);else{let c=Dc(n);o&&(c=_c(c));let l=t.minInt,d=t.minFrac,p=t.maxFrac;if(s){let T=s.match(gc);if(T===null)throw new Error(`${s} is not a valid digit info`);let P=T[1],w=T[3],O=T[5];P!=null&&(l=Ti(P)),w!=null&&(d=Ti(w)),O!=null?p=Ti(O):w!=null&&d>p&&(p=d)}bc(c,d,p);let f=c.digits,g=c.integerLen,y=c.exponent,m=[];for(u=f.every(T=>!T);g<l;g++)f.unshift(0);for(;g<0;g++)f.unshift(0);g>0?m=f.splice(g,f.length):(m=f,f=[0]);let R=[];for(f.length>=t.lgSize&&R.unshift(f.splice(-t.lgSize,f.length).join(""));f.length>t.gSize;)R.unshift(f.splice(-t.gSize,f.length).join(""));f.length&&R.unshift(f.join("")),a=R.join(gt(e,r)),m.length&&(a+=gt(e,i)+m.join("")),y&&(a+=gt(e,le.Exponential)+"+"+y)}return n<0&&!u?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function jo(n,t,e){let r=No(t,ki.Decimal),i=wc(r,gt(t,le.MinusSign));return yc(n,i,t,le.Group,le.Decimal,e)}function wc(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(mc),i=r[0],s=r[1],o=i.indexOf(Jr)!==-1?i.split(Jr):[i.substring(0,i.lastIndexOf(Yt)+1),i.substring(i.lastIndexOf(Yt)+1)],a=o[0],u=o[1]||"";e.posPre=a.substring(0,a.indexOf(Ri));for(let l=0;l<u.length;l++){let d=u.charAt(l);d===Yt?e.minFrac=e.maxFrac=l+1:d===Ri?e.maxFrac=l+1:e.posSuf+=d}let c=a.split(vc);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){let l=i.length-e.posPre.length-e.posSuf.length,d=s.indexOf(Ri);e.negPre=s.substring(0,d).replace(/'/g,""),e.negSuf=s.slice(d+l).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function _c(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function Dc(n){let t=Math.abs(n)+"",e=0,r,i,s,o,a;for((i=t.indexOf(Jr))>-1&&(t=t.replace(Jr,"")),(s=t.search(/e/i))>0?(i<0&&(i=s),i+=+t.slice(s+1),t=t.substring(0,s)):i<0&&(i=t.length),s=0;t.charAt(s)===Yt;s++);if(s===(a=t.length))r=[0],i=1;else{for(a--;t.charAt(a)===Yt;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(t.charAt(s))}return i>Mo&&(r=r.splice(0,Mo-1),e=i-1,i=1),{digits:r,exponent:e,integerLen:i}}function bc(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(t,i),e),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=s!==0,c=t+n.integerLen,l=r.reduceRight(function(d,p,f,g){return p=p+d,g[f]=p<10?p:p-10,u&&(g[f]===0&&f>=c?g.pop():u=!1),p>=10?1:0},0);l&&(r.unshift(l),n.integerLen++)}function Ti(n){let t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}var Ii=/\s+/,xo=[],Sc=(()=>{class n{_ngEl;_renderer;initialClasses=xo;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(Ii):xo}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(Ii):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(Ii).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(q($t),q(zt))};static \u0275dir=Re({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Xr=class{$implicit;ngForOf;index;count;constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Uo=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let r=this._viewContainer;e.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Xr(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),Fo(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);Fo(s,i)})}static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(q(Ht),q(wi),q(So))};static \u0275dir=Re({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Fo(n,t){n.context.$implicit=t.item}var Cc=(()=>{class n{_viewContainer;_context=new Qr;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,r){this._viewContainer=e,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Lo(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Lo(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(q(Ht),q(wi))};static \u0275dir=Re({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Qr=class{$implicit=null;ngIf=null};function Lo(n,t){if(n&&!n.createEmbeddedView)throw new M(2020,!1)}function $o(n,t){return new M(2100,!1)}var Ec=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Ac=(()=>{class n{transform(e){if(e==null)return null;if(typeof e!="string")throw $o(n,e);return e.replace(Ec,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=_i({name:"titlecase",type:n,pure:!0})}return n})();var Rc=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,r,i){if(!Tc(e))return null;i||=this._locale;try{let s=Ic(e);return jo(s,i,r)}catch(s){throw $o(n,s.message)}}static \u0275fac=function(r){return new(r||n)(q(bo,16))};static \u0275pipe=_i({name:"number",type:n,pure:!0})}return n})();function Tc(n){return!(n==null||n===""||n!==n)}function Ic(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Bo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=pt({type:n});static \u0275inj=ct({})}return n})();function Pi(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[i,s]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}var Mi="browser",zo="server";function en(n){return n===zo}var Zt=class{};var Ho=(()=>{class n{static \u0275prov=C({token:n,providedIn:"root",factory:()=>new xi(_($),window)})}return n})(),xi=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=Oc(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function Oc(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}i=r.nextNode()}}return null}var nn=new x(""),ji=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i,s){return this._findPluginFor(r).addEventListener(e,r,i,s)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(s=>s.supports(e)),!r)throw new M(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(A(nn),A(Ae))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),Jt=class{_doc;constructor(t){this._doc=t}manager},tn="ng-app-id";function Vo(n){for(let t of n)t.remove()}function qo(n,t){let e=t.createElement("style");return e.textContent=n,e}function Pc(n,t,e,r){let i=n.head?.querySelectorAll(`style[${tn}="${t}"],link[${tn}="${t}"]`);if(i)for(let s of i)s.removeAttribute(tn),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function Li(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Ui=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,i,s={}){this.doc=e,this.appId=r,this.nonce=i,this.isServer=en(s),Pc(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,qo);r?.forEach(i=>this.addUsage(i,this.external,Li))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let s=r.get(e);s?s.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(Vo(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])Vo(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,qo(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,Li(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(tn,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(A($),A(mi),A(vi,8),A(ht))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),Fi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},$i=/%COMP%/g;var Wo="%COMP%",Mc=`_nghost-${Wo}`,xc=`_ngcontent-${Wo}`,Fc=!0,Lc=new x("",{providedIn:"root",factory:()=>Fc});function Nc(n){return xc.replace($i,n)}function jc(n){return Mc.replace($i,n)}function Ko(n,t){return t.map(e=>e.replace($i,n))}var Bi=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,s,o,a,u,c=null,l=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=c,this.tracingService=l,this.platformIsServer=en(a),this.defaultRenderer=new Xt(e,o,u,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Bt.ShadowDom&&(r=V(v({},r),{encapsulation:Bt.Emulated}));let i=this.getOrCreateRenderer(e,r);return i instanceof rn?i.applyToHost(e):i instanceof Qt&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case Bt.Emulated:s=new rn(u,c,r,this.appId,l,o,a,d,p);break;case Bt.ShadowDom:return new Ni(u,c,e,r,o,a,this.nonce,d,p);default:s=new Qt(u,c,r,l,o,a,d,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(A(ji),A(Ui),A(mi),A(Lc),A($),A(ht),A(Ae),A(vi),A(uo,8))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),Xt=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i,s){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Fi[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Go(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(Go(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new M(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let s=Fi[i];s?t.setAttributeNS(s,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=Fi[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(ft.DashCase|ft.Important)?t.style.setProperty(e,r,i&ft.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&ft.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,i){if(typeof t=="string"&&(t=De().getGlobalEventTarget(this.doc,t),!t))throw new M(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(t,e,s)),this.eventManager.addEventListener(t,e,s,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function Go(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ni=class extends Xt{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,i,s,o,a,u,c){super(t,s,o,u,c),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=i.styles;l=Ko(i.id,l);for(let p of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=p,this.shadowRoot.appendChild(f)}let d=i.getExternalStyles?.();if(d)for(let p of d){let f=Li(p,s);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qt=class extends Xt{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,i,s,o,a,u,c){super(t,s,o,a,u),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=c?Ko(c,l):l,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},rn=class extends Qt{contentAttr;hostAttr;constructor(t,e,r,i,s,o,a,u,c){let l=i+"-"+r.id;super(t,e,r,s,o,a,u,c,l),this.contentAttr=Nc(l),this.hostAttr=jc(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}};var sn=class n extends Wt{supportsDOMEvents=!0;static makeCurrent(){Ei(new n)}onAndCancel(t,e,r,i){return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=Uc();return e==null?null:$c(e)}resetBaseElement(){er=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Pi(document.cookie,t)}},er=null;function Uc(){return er=er||document.head.querySelector("base"),er?er.getAttribute("href"):null}function $c(n){return new URL(n,document.baseURI).pathname}var Bc=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),Zo=(()=>{class n extends Jt{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,s){return e.addEventListener(r,i,s),()=>this.removeEventListener(e,r,i,s)}removeEventListener(e,r,i,s){return e.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(A($))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),Yo=["alt","control","meta","shift"],zc={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Jo=(()=>{class n extends Jt{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>De().onAndCancel(e,o.domEventName,a,s))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Yo.forEach(c=>{let l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(e,r){let i=zc[e.key]||e.key,s="";return r.indexOf("code.")>-1&&(i=e.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Yo.forEach(o=>{if(o!==i){let a=Hc[o];a(e)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(e,r,i){return s=>{n.matchEventFullKeyCode(s,e)&&i.runGuarded(()=>r(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(A($))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})();function Vc(n,t){return Co(v({rootComponent:n},qc(t)))}function qc(n){return{appProviders:[...Zc,...n?.providers??[]],platformProviders:Yc}}function Gc(){sn.makeCurrent()}function Wc(){return new gi}function Kc(){return oo(document),document}var Yc=[{provide:ht,useValue:Mi},{provide:ao,useValue:Gc,multi:!0},{provide:$,useFactory:Kc}];var Zc=[{provide:ro,useValue:"root"},{provide:gi,useFactory:Wc},{provide:nn,useClass:Zo,multi:!0,deps:[$]},{provide:nn,useClass:Jo,multi:!0,deps:[$]},Bi,Ui,ji,{provide:ho,useExisting:Bi},{provide:Zt,useClass:Bc},[]];var Xo=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(A($))};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var S="primary",fr=Symbol("RouteTitle"),Gi=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Be(n){return new Gi(n)}function oa(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Xc(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!de(n[e],t[e]))return!1;return!0}function de(n,t){let e=n?Wi(n):void 0,r=t?Wi(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let s=0;s<e.length;s++)if(i=e[s],!aa(n[i],t[i]))return!1;return!0}function Wi(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function aa(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,s)=>r[s]===i)}else return n===t}function ua(n){return n.length>0?n[n.length-1]:null}function Me(n){return Ws(n)?n:Di(n)?W(Promise.resolve(n)):D(n)}var Qc={exact:la,subset:da},ca={exact:el,subset:tl,ignored:()=>!0};function Qo(n,t,e){return Qc[e.paths](n.root,t.root,e.matrixParams)&&ca[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function el(n,t){return de(n,t)}function la(n,t,e){if(!Ue(n.segments,t.segments)||!un(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!la(n.children[r],t.children[r],e))return!1;return!0}function tl(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>aa(n[e],t[e]))}function da(n,t,e){return ha(n,t,t.segments,e)}function ha(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!Ue(i,e)||t.hasChildren()||!un(i,e,r))}else if(n.segments.length===e.length){if(!Ue(n.segments,e)||!un(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!da(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!Ue(n.segments,i)||!un(n.segments,i,r)||!n.children[S]?!1:ha(n.children[S],t,s,r)}}function un(n,t,e){return t.every((r,i)=>ca[e](n[i].parameters,r.parameters))}var fe=class{root;queryParams;fragment;_queryParamMap;constructor(t=new I([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Be(this.queryParams),this._queryParamMap}toString(){return il.serialize(this)}},I=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cn(this)}},Ie=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Be(this.parameters),this._parameterMap}toString(){return pa(this)}};function rl(n,t){return Ue(n,t)&&n.every((e,r)=>de(e.parameters,t[r].parameters))}function Ue(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function nl(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===S&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==S&&(e=e.concat(t(i,r)))}),e}var ze=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:()=>new Oe,providedIn:"root"})}return n})(),Oe=class{parse(t){let e=new Yi(t);return new fe(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${tr(t.root,!0)}`,r=al(t.queryParams),i=typeof t.fragment=="string"?`#${sl(t.fragment)}`:"";return`${e}${r}${i}`}},il=new Oe;function cn(n){return n.segments.map(t=>pa(t)).join("/")}function tr(n,t){if(!n.hasChildren())return cn(n);if(t){let e=n.children[S]?tr(n.children[S],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==S&&r.push(`${i}:${tr(s,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=nl(n,(r,i)=>i===S?[tr(n.children[S],!1)]:[`${i}:${tr(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[S]!=null?`${cn(n)}/${e[0]}`:`${cn(n)}/(${e.join("//")})`}}function fa(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function on(n){return fa(n).replace(/%3B/gi,";")}function sl(n){return encodeURI(n)}function Ki(n){return fa(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ln(n){return decodeURIComponent(n)}function ea(n){return ln(n.replace(/\+/g,"%20"))}function pa(n){return`${Ki(n.path)}${ol(n.parameters)}`}function ol(n){return Object.entries(n).map(([t,e])=>`;${Ki(t)}=${Ki(e)}`).join("")}function al(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${on(e)}=${on(i)}`).join("&"):`${on(e)}=${on(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var ul=/^[^\/()?;#]+/;function zi(n){let t=n.match(ul);return t?t[0]:""}var cl=/^[^\/()?;=#]+/;function ll(n){let t=n.match(cl);return t?t[0]:""}var dl=/^[^=?&#]+/;function hl(n){let t=n.match(dl);return t?t[0]:""}var fl=/^[^&#]+/;function pl(n){let t=n.match(fl);return t?t[0]:""}var Yi=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new I([],{}):new I([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[S]=new I(t,e)),r}parseSegment(){let t=zi(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new M(4009,!1);return this.capture(t),new Ie(ln(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=ll(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=zi(this.remaining);i&&(r=i,this.capture(r))}t[ln(e)]=ln(r)}parseQueryParam(t){let e=hl(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let o=pl(this.remaining);o&&(r=o,this.capture(r))}let i=ea(e),s=ea(r);if(t.hasOwnProperty(i)){let o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(s)}else t[i]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=zi(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new M(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=S);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[S]:new I([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new M(4011,!1)}};function ga(n){return n.segments.length>0?new I([],{[S]:n}):n}function ma(n){let t={};for(let[r,i]of Object.entries(n.children)){let s=ma(i);if(r===S&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let e=new I(n.segments,t);return gl(e)}function gl(n){if(n.numberOfChildren===1&&n.children[S]){let t=n.children[S];return new I(n.segments.concat(t.segments),t.children)}return n}function ke(n){return n instanceof fe}function va(n,t,e=null,r=null){let i=ya(n);return wa(i,t,e,r)}function ya(n){let t;function e(s){let o={};for(let u of s.children){let c=e(u);o[u.outlet]=c}let a=new I(s.url,o);return s===n&&(t=a),a}let r=e(n.root),i=ga(r);return t??i}function wa(n,t,e,r){let i=n;for(;i.parent;)i=i.parent;if(t.length===0)return Hi(i,i,i,e,r);let s=ml(t);if(s.toRoot())return Hi(i,i,new I([],{}),e,r);let o=vl(s,i,n),a=o.processChildren?nr(o.segmentGroup,o.index,s.commands):Da(o.segmentGroup,o.index,s.commands);return Hi(i,o.segmentGroup,a,e,r)}function hn(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function sr(n){return typeof n=="object"&&n!=null&&n.outlets}function Hi(n,t,e,r,i){let s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let o;n===t?o=e:o=_a(n,t,e);let a=ga(ma(o));return new fe(a,s,i)}function _a(n,t,e){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===t?r[i]=e:r[i]=_a(s,t,e)}),new I(n.segments,r)}var fn=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&hn(r[0]))throw new M(4003,!1);let i=r.find(sr);if(i&&i!==ua(r))throw new M(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ml(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new fn(!0,0,n);let t=0,e=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new fn(e,t,r)}var yt=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function vl(n,t,e){if(n.isAbsolute)return new yt(t,!0,0);if(!e)return new yt(t,!1,NaN);if(e.parent===null)return new yt(e,!0,0);let r=hn(n.commands[0])?0:1,i=e.segments.length-1+r;return yl(e,i,n.numberOfDoubleDots)}function yl(n,t,e){let r=n,i=t,s=e;for(;s>i;){if(s-=i,r=r.parent,!r)throw new M(4005,!1);i=r.segments.length}return new yt(r,!1,i-s)}function wl(n){return sr(n[0])?n[0].outlets:{[S]:n}}function Da(n,t,e){if(n??=new I([],{}),n.segments.length===0&&n.hasChildren())return nr(n,t,e);let r=_l(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new I(n.segments.slice(0,r.pathIndex),{});return s.children[S]=new I(n.segments.slice(r.pathIndex),n.children),nr(s,0,i)}else return r.match&&i.length===0?new I(n.segments,{}):r.match&&!n.hasChildren()?Zi(n,t,e):r.match?nr(n,0,i):Zi(n,t,e)}function nr(n,t,e){if(e.length===0)return new I(n.segments,{});{let r=wl(e),i={};if(Object.keys(r).some(s=>s!==S)&&n.children[S]&&n.numberOfChildren===1&&n.children[S].segments.length===0){let s=nr(n.children[S],t,e);return new I(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Da(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new I(n.segments,i)}}function _l(n,t,e){let r=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return s;let o=n.segments[i],a=e[r];if(sr(a))break;let u=`${a}`,c=r<e.length-1?e[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!ra(u,c,o))return s;r+=2}else{if(!ra(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Zi(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let s=e[i];if(sr(s)){let u=Dl(s.outlets);return new I(r,u)}if(i===0&&hn(e[0])){let u=n.segments[t];r.push(new Ie(u.path,ta(e[0]))),i++;continue}let o=sr(s)?s.outlets[S]:`${s}`,a=i<e.length-1?e[i+1]:null;o&&a&&hn(a)?(r.push(new Ie(o,ta(a))),i+=2):(r.push(new Ie(o,{})),i++)}return new I(r,{})}function Dl(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=Zi(new I([],{}),0,r))}),t}function ta(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function ra(n,t,e){return n==e.path&&de(t,e.parameters)}var dn="imperative",j=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(j||{}),J=class{id;url;constructor(t,e){this.id=t,this.url=e}},Pe=class extends J{type=j.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Q=class extends J{urlAfterRedirects;type=j.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Y=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Y||{}),_t=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(_t||{}),he=class extends J{reason;code;type=j.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},pe=class extends J{reason;code;type=j.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},Dt=class extends J{error;target;type=j.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},or=class extends J{urlAfterRedirects;state;type=j.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pn=class extends J{urlAfterRedirects;state;type=j.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gn=class extends J{urlAfterRedirects;state;shouldActivate;type=j.GuardsCheckEnd;constructor(t,e,r,i,s){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},mn=class extends J{urlAfterRedirects;state;type=j.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vn=class extends J{urlAfterRedirects;state;type=j.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yn=class{route;type=j.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},wn=class{route;type=j.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_n=class{snapshot;type=j.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dn=class{snapshot;type=j.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bn=class{snapshot;type=j.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sn=class{snapshot;type=j.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bt=class{routerEvent;position;anchor;type=j.Scroll;constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},ar=class{},St=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function bl(n,t){return n.providers&&!n._injector&&(n._injector=Wr(n.providers,t,`Route: ${n.path}`)),n._injector??t}function ue(n){return n.outlet||S}function Sl(n,t){let e=n.filter(r=>ue(r)===t);return e.push(...n.filter(r=>ue(r)!==t)),e}function pr(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Cn=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return pr(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new He(this.rootInjector)}},He=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new Cn(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(A(lt))};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),En=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Ji(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=Ji(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Xi(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Xi(t,this._root).map(e=>e.value)}};function Ji(n,t){if(n===t.value)return t;for(let e of t.children){let r=Ji(n,e);if(r)return r}return null}function Xi(n,t){if(n===t.value)return[t];for(let e of t.children){let r=Xi(n,e);if(r.length)return r.unshift(t),r}return[]}var Z=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function vt(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var ur=class extends En{snapshot;constructor(t,e){super(t),this.snapshot=e,os(this,t)}toString(){return this.snapshot.toString()}};function ba(n){let t=Cl(n),e=new X([new Ie("",{})]),r=new X({}),i=new X({}),s=new X({}),o=new X(""),a=new ge(e,r,s,o,i,S,n,t.root);return a.snapshot=t.root,new ur(new Z(a,[]),t)}function Cl(n){let t={},e={},r={},i="",s=new $e([],t,r,i,e,S,n,null,{});return new cr("",new Z(s,[]))}var ge=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,s,o,a,u){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(k(c=>c[fr]))??D(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(k(t=>Be(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(k(t=>Be(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function An(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:v(v({},t.params),n.params),data:v(v({},t.data),n.data),resolve:v(v(v(v({},n.data),t.data),i?.data),n._resolvedData)}:r={params:v({},n.params),data:v({},n.data),resolve:v(v({},n.data),n._resolvedData??{})},i&&Ca(i)&&(r.resolve[fr]=i.title),r}var $e=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[fr]}constructor(t,e,r,i,s,o,a,u,c){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Be(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Be(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},cr=class extends En{url;constructor(t,e){super(e),this.url=t,os(this,e)}toString(){return Sa(this._root)}};function os(n,t){t.value._routerState=n,t.children.forEach(e=>os(n,e))}function Sa(n){let t=n.children.length>0?` { ${n.children.map(Sa).join(", ")} } `:"";return`${n.value}${t}`}function Vi(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,de(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),de(t.params,e.params)||n.paramsSubject.next(e.params),Xc(t.url,e.url)||n.urlSubject.next(e.url),de(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Qi(n,t){let e=de(n.params,t.params)&&rl(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||Qi(n.parent,t.parent))}function Ca(n){return typeof n.title=="string"||n.title===null}var Ea=new x(""),as=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=S;activateEvents=new dt;deactivateEvents=new dt;attachEvents=new dt;detachEvents=new dt;routerOutletData=so(void 0);parentContexts=_(He);location=_(Ht);changeDetector=_(qt);inputBinder=_(gr,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new M(4013,!1);this._activatedRoute=e;let i=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new es(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Re({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[jt]})}return n})(),es=class{route;childContexts;parent;outletData;constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===ge?this.route:t===He?this.childContexts:t===Ea?this.outletData:this.parent.get(t,e)}},gr=new x(""),us=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,i=qr([r.queryParams,r.params,r.data]).pipe(se(([s,o,a],u)=>(a=v(v(v({},s),o),a),u===0?D(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let o=Eo(r.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(e,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),cs=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=go({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&wo(0,"router-outlet")},dependencies:[as],encapsulation:2})}return n})();function ls(n){let t=n.children&&n.children.map(ls),e=t?V(v({},n),{children:t}):v({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==S&&(e.component=cs),e}function El(n,t,e){let r=lr(n,t._root,e?e._root:void 0);return new ur(r,t)}function lr(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=Al(n,t,e);return new Z(r,i)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>lr(n,a)),o}}let r=Rl(t.value),i=t.children.map(s=>lr(n,s));return new Z(r,i)}}function Al(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return lr(n,r,i);return lr(n,r)})}function Rl(n){return new ge(new X(n.url),new X(n.params),new X(n.queryParams),new X(n.fragment),new X(n.data),n.outlet,n.component,n)}var Ct=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},Aa="ngNavigationCancelingError";function Rn(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=ke(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Ra(!1,Y.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function Ra(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[Aa]=!0,e.cancellationCode=t,e}function Tl(n){return Ta(n)&&ke(n.url)}function Ta(n){return!!n&&n[Aa]}var Il=(n,t,e,r)=>k(i=>(new ts(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),ts=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Vi(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=vt(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,e,r){let i=t.value,s=e?e.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,r);else s&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,s=vt(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,s=vt(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=vt(e);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Sn(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Dn(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,s=e?e.value:null;if(Vi(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Vi(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,r)}},Tn=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},wt=class{component;route;constructor(t,e){this.component=t,this.route=e}};function Ol(n,t,e){let r=n._root,i=t?t._root:null;return rr(r,i,e,[r.value])}function kl(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function At(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!eo(n)?n:t.get(n):r}function rr(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=vt(t);return n.children.forEach(o=>{Pl(o,s[o.value.outlet],e,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ir(a,e.getContext(o),i)),i}function Pl(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=Ml(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Tn(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?rr(n,t,a?a.children:null,r,i):rr(n,t,e,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new wt(a.outlet.component,o))}else o&&ir(t,a,i),i.canActivateChecks.push(new Tn(r)),s.component?rr(n,null,a?a.children:null,r,i):rr(n,null,e,r,i);return i}function Ml(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Ue(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ue(n.url,t.url)||!de(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qi(n,t)||!de(n.queryParams,t.queryParams);case"paramsChange":default:return!Qi(n,t)}}function ir(n,t,e){let r=vt(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?t?ir(o,t.children.getContext(s),e):ir(o,null,e):ir(o,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new wt(t.outlet.component,i)):e.canDeactivateChecks.push(new wt(null,i)):e.canDeactivateChecks.push(new wt(null,i))}function mr(n){return typeof n=="function"}function xl(n){return typeof n=="boolean"}function Fl(n){return n&&mr(n.canLoad)}function Ll(n){return n&&mr(n.canActivate)}function Nl(n){return n&&mr(n.canActivateChild)}function jl(n){return n&&mr(n.canDeactivate)}function Ul(n){return n&&mr(n.canMatch)}function Ia(n){return n instanceof Ks||n?.name==="EmptyError"}var an=Symbol("INITIAL_VALUE");function Et(){return se(n=>qr(n.map(t=>t.pipe(ut(1),Xs(an)))).pipe(k(t=>{for(let e of t)if(e!==!0){if(e===an)return an;if(e===!1||$l(e))return e}return!0}),Ce(t=>t!==an),ut(1)))}function $l(n){return ke(n)||n instanceof Ct}function Bl(n,t){return K(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?D(V(v({},e),{guardsResult:!0})):zl(o,r,i,n).pipe(K(a=>a&&xl(a)?Hl(r,s,n,t):D(a)),k(a=>V(v({},e),{guardsResult:a})))})}function zl(n,t,e,r){return W(n).pipe(K(i=>Kl(i.component,i.route,e,t,r)),Ee(i=>i!==!0,!0))}function Hl(n,t,e,r){return W(t).pipe(Ne(i=>Ys(ql(i.route.parent,r),Vl(i.route,r),Wl(n,i.path,e),Gl(n,i.route,e))),Ee(i=>i!==!0,!0))}function Vl(n,t){return n!==null&&t&&t(new bn(n)),D(!0)}function ql(n,t){return n!==null&&t&&t(new _n(n)),D(!0)}function Gl(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return D(!0);let i=r.map(s=>ci(()=>{let o=pr(t)??e,a=At(s,o),u=Ll(a)?a.canActivate(t,n):ce(o,()=>a(t,n));return Me(u).pipe(Ee())}));return D(i).pipe(Et())}function Wl(n,t,e){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>kl(o)).filter(o=>o!==null).map(o=>ci(()=>{let a=o.guards.map(u=>{let c=pr(o.node)??e,l=At(u,c),d=Nl(l)?l.canActivateChild(r,n):ce(c,()=>l(r,n));return Me(d).pipe(Ee())});return D(a).pipe(Et())}));return D(s).pipe(Et())}function Kl(n,t,e,r,i){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return D(!0);let o=s.map(a=>{let u=pr(t)??i,c=At(a,u),l=jl(c)?c.canDeactivate(n,t,e,r):ce(u,()=>c(n,t,e,r));return Me(l).pipe(Ee())});return D(o).pipe(Et())}function Yl(n,t,e,r){let i=t.canLoad;if(i===void 0||i.length===0)return D(!0);let s=i.map(o=>{let a=At(o,n),u=Fl(a)?a.canLoad(t,e):ce(n,()=>a(t,e));return Me(u)});return D(s).pipe(Et(),Oa(r))}function Oa(n){return Gs(z(t=>{if(typeof t!="boolean")throw Rn(n,t)}),k(t=>t===!0))}function Zl(n,t,e,r){let i=t.canMatch;if(!i||i.length===0)return D(!0);let s=i.map(o=>{let a=At(o,n),u=Ul(a)?a.canMatch(t,e):ce(n,()=>a(t,e));return Me(u)});return D(s).pipe(Et(),Oa(r))}var dr=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},hr=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function mt(n){return Nt(new dr(n))}function Jl(n){return Nt(new M(4e3,!1))}function Xl(n){return Nt(Ra(!1,Y.GuardRejected))}var rs=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return D(r);if(i.numberOfChildren>1||!i.children[S])return Jl(`${t.redirectTo}`);i=i.children[S]}}applyRedirectCommands(t,e,r,i,s){if(typeof e!="string"){let a=e,{queryParams:u,fragment:c,routeConfig:l,url:d,outlet:p,params:f,data:g,title:y}=i,m=ce(s,()=>a({params:f,data:g,queryParams:u,fragment:c,routeConfig:l,url:d,outlet:p,title:y}));if(m instanceof fe)throw new hr(m);e=m}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r);if(e[0]==="/")throw new hr(o);return o}applyRedirectCreateUrlTree(t,e,r,i){let s=this.createSegmentGroup(t,e.root,r,i);return new fe(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=e[a]}else r[i]=s}),r}createSegmentGroup(t,e,r,i){let s=this.createSegments(t,e.segments,r,i),o={};return Object.entries(e.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(t,u,r,i)}),new I(s,o)}createSegments(t,e,r,i){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new M(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}},ns={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ql(n,t,e,r,i){let s=ka(n,t,e);return s.matched?(r=bl(t,r),Zl(r,t,e,i).pipe(k(o=>o===!0?s:v({},ns)))):D(s)}function ka(n,t,e){if(t.path==="**")return ed(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?v({},ns):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||oa)(e,n,t);if(!i)return v({},ns);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?v(v({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function ed(n){return{matched:!0,parameters:n.length>0?ua(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function na(n,t,e,r){return e.length>0&&nd(n,e,r)?{segmentGroup:new I(t,rd(r,new I(e,n.children))),slicedSegments:[]}:e.length===0&&id(n,e,r)?{segmentGroup:new I(n.segments,td(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new I(n.segments,n.children),slicedSegments:e}}function td(n,t,e,r){let i={};for(let s of e)if(On(n,t,s)&&!r[ue(s)]){let o=new I([],{});i[ue(s)]=o}return v(v({},r),i)}function rd(n,t){let e={};e[S]=t;for(let r of n)if(r.path===""&&ue(r)!==S){let i=new I([],{});e[ue(r)]=i}return e}function nd(n,t,e){return e.some(r=>On(n,t,r)&&ue(r)!==S)}function id(n,t,e){return e.some(r=>On(n,t,r))}function On(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function sd(n,t,e){return t.length===0&&!n.children[e]}var is=class{};function od(n,t,e,r,i,s,o="emptyOnly"){return new ss(n,t,e,r,i,o,s).recognize()}var ad=31,ss=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new rs(this.urlSerializer,this.urlTree)}noMatchError(t){return new M(4002,`'${t.segmentGroup}'`)}recognize(){let t=na(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(k(({children:e,rootSnapshot:r})=>{let i=new Z(r,e),s=new cr("",i),o=va(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new $e([],Object.freeze({}),Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),S,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,S,e).pipe(k(r=>({children:r,rootSnapshot:e})),Le(r=>{if(r instanceof hr)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof dr?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,s):this.processSegment(t,e,r,r.segments,i,!0,s).pipe(k(o=>o instanceof Z?[o]:[]))}processChildren(t,e,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return W(s).pipe(Ne(o=>{let a=r.children[o],u=Sl(e,o);return this.processSegmentGroup(t,u,a,o,i)}),Js((o,a)=>(o.push(...a),o)),li(null),Zs(),K(o=>{if(o===null)return mt(r);let a=Pa(o);return ud(a),D(a)}))}processSegment(t,e,r,i,s,o,a){return W(e).pipe(Ne(u=>this.processSegmentAgainstRoute(u._injector??t,e,u,r,i,s,o,a).pipe(Le(c=>{if(c instanceof dr)return D(null);throw c}))),Ee(u=>!!u),Le(u=>{if(Ia(u))return sd(r,i,s)?D(new is):mt(r);throw u}))}processSegmentAgainstRoute(t,e,r,i,s,o,a,u){return ue(r)!==o&&(o===S||!On(i,s,r))?mt(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,s,o,u):mt(i)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,s,o,a){let{matched:u,parameters:c,consumedSegments:l,positionalParamSegments:d,remainingSegments:p}=ka(e,i,s);if(!u)return mt(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ad&&(this.allowRedirects=!1));let f=new $e(s,c,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,ia(i),ue(i),i.component??i._loadedComponent??null,i,sa(i)),g=An(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(g.params),f.data=Object.freeze(g.data);let y=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,d,f,t);return this.applyRedirects.lineralizeSegments(i,y).pipe(K(m=>this.processSegment(t,r,e,m.concat(p),o,!1,a)))}matchSegmentAgainstRoute(t,e,r,i,s,o){let a=Ql(e,r,i,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(se(u=>u.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(se(({routes:c})=>{let l=r._loadedInjector??t,{parameters:d,consumedSegments:p,remainingSegments:f}=u,g=new $e(p,d,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,ia(r),ue(r),r.component??r._loadedComponent??null,r,sa(r)),y=An(g,o,this.paramsInheritanceStrategy);g.params=Object.freeze(y.params),g.data=Object.freeze(y.data);let{segmentGroup:m,slicedSegments:R}=na(e,p,f,c);if(R.length===0&&m.hasChildren())return this.processChildren(l,c,m,g).pipe(k(P=>new Z(g,P)));if(c.length===0&&R.length===0)return D(new Z(g,[]));let T=ue(r)===s;return this.processSegment(l,c,m,R,T?S:s,!0,g).pipe(k(P=>new Z(g,P instanceof Z?[P]:[])))}))):mt(e)))}getChildConfig(t,e,r){return e.children?D({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?D({routes:e._loadedRoutes,injector:e._loadedInjector}):Yl(t,e,r,this.urlSerializer).pipe(K(i=>i?this.configLoader.loadChildren(t,e).pipe(z(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):Xl(e))):D({routes:[],injector:t})}};function ud(n){n.sort((t,e)=>t.value.outlet===S?-1:e.value.outlet===S?1:t.value.outlet.localeCompare(e.value.outlet))}function cd(n){let t=n.value.routeConfig;return t&&t.path===""}function Pa(n){let t=[],e=new Set;for(let r of n){if(!cd(r)){t.push(r);continue}let i=t.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=Pa(r.children);t.push(new Z(r.value,i))}return t.filter(r=>!e.has(r))}function ia(n){return n.data||{}}function sa(n){return n.resolve||{}}function ld(n,t,e,r,i,s){return K(o=>od(n,t,e,r,o.extractedUrl,i,s).pipe(k(({state:a,tree:u})=>V(v({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function dd(n,t){return K(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return D(e);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let c of Ma(u))o.add(c);let a=0;return W(o).pipe(Ne(u=>s.has(u)?hd(u,r,n,t):(u.data=An(u,u.parent,n).resolve,D(void 0))),z(()=>a++),di(1),K(u=>a===o.size?D(e):_e))})}function Ma(n){let t=n.children.map(e=>Ma(e)).flat();return[n,...t]}function hd(n,t,e,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!Ca(i)&&(s[fr]=i.title),fd(s,n,t,r).pipe(k(o=>(n._resolvedData=o,n.data=An(n,n.parent,e).resolve,null)))}function fd(n,t,e,r){let i=Wi(n);if(i.length===0)return D({});let s={};return W(i).pipe(K(o=>pd(n[o],t,e,r).pipe(Ee(),z(a=>{if(a instanceof Ct)throw Rn(new Oe,a);s[o]=a}))),di(1),k(()=>s),Le(o=>Ia(o)?_e:Nt(o)))}function pd(n,t,e,r){let i=pr(t)??r,s=At(n,i),o=s.resolve?s.resolve(t,e):ce(i,()=>s(t,e));return Me(o)}function qi(n){return se(t=>{let e=n(t);return e?W(e).pipe(k(()=>t)):D(t)})}var ds=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===S);return r}getResolvedTitleForRoute(e){return e.data[fr]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:()=>_(xa),providedIn:"root"})}return n})(),xa=(()=>{class n extends ds{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(A(Xo))};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ve=new x("",{providedIn:"root",factory:()=>({})}),qe=new x(""),kn=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=_(Do);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return D(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=Me(e.loadComponent()).pipe(k(La),z(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Gr(()=>{this.componentLoaders.delete(e)})),i=new ai(r,()=>new ie).pipe(oi());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return D({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Fa(r,this.compiler,e,this.onLoadEndListener).pipe(Gr(()=>{this.childrenLoaders.delete(r)})),o=new ai(s,()=>new ie).pipe(oi());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fa(n,t,e,r){return Me(n.loadChildren()).pipe(k(La),K(i=>i instanceof po||Array.isArray(i)?D(i):W(t.compileModuleAsync(i))),k(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(e).injector,o=s.get(qe,[],{optional:!0,self:!0}).flat()),{routes:o.map(ls),injector:s}}))}function gd(n){return n&&typeof n=="object"&&"default"in n}function La(n){return gd(n)?n.default:n}var Pn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:()=>_(md),providedIn:"root"})}return n})(),md=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hs=new x(""),fs=new x("");function Na(n,t,e){let r=n.get(fs),i=n.get($);return n.get(Ae).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),vd(n))),{onViewTransitionCreated:u}=r;return u&&ce(n,()=>u({transition:a,from:t,to:e})),o})}function vd(n){return new Promise(t=>{co({read:()=>setTimeout(t)},{injector:n})})}var ps=new x(""),Mn=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ie;transitionAbortSubject=new ie;configLoader=_(kn);environmentInjector=_(lt);destroyRef=_(no);urlSerializer=_(ze);rootContexts=_(He);location=_(Te);inputBindingEnabled=_(gr,{optional:!0})!==null;titleStrategy=_(ds);options=_(Ve,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=_(Pn);createViewTransition=_(hs,{optional:!0});navigationErrorHandler=_(ps,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>D(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new yn(i)),r=i=>this.events.next(new wn(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(V(v({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(e){return this.transitions=new X(null),this.transitions.pipe(Ce(r=>r!==null),se(r=>{let i=!1,s=!1;return D(r).pipe(se(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Y.SupersededByNewNavigation),_e;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?V(v({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&u!=="reload"){let c="";return this.events.next(new pe(o.id,this.urlSerializer.serialize(o.rawUrl),c,_t.IgnoredSameUrlNavigation)),o.resolve(!1),_e}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return D(o).pipe(se(c=>(this.events.next(new Pe(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?_e:Promise.resolve(c))),ld(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),z(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=V(v({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let l=new or(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:d,restoredState:p,extras:f}=o,g=new Pe(c,this.urlSerializer.serialize(l),d,p);this.events.next(g);let y=ba(this.rootComponentType).snapshot;return this.currentTransition=r=V(v({},o),{targetSnapshot:y,urlAfterRedirects:l,extras:V(v({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,D(r)}else{let c="";return this.events.next(new pe(o.id,this.urlSerializer.serialize(o.extractedUrl),c,_t.IgnoredByUrlHandlingStrategy)),o.resolve(!1),_e}}),z(o=>{let a=new pn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),k(o=>(this.currentTransition=r=V(v({},o),{guards:Ol(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Bl(this.environmentInjector,o=>this.events.next(o)),z(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Rn(this.urlSerializer,o.guardsResult);let a=new gn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Ce(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Y.GuardRejected),!1)),qi(o=>{if(o.guards.canActivateChecks.length!==0)return D(o).pipe(z(a=>{let u=new mn(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),se(a=>{let u=!1;return D(a).pipe(dd(this.paramsInheritanceStrategy,this.environmentInjector),z({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Y.NoDataFromResolver)}}))}),z(a=>{let u=new vn(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),qi(o=>{let a=u=>{let c=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(u.routeConfig).pipe(z(l=>{u.component=l}),k(()=>{})));for(let l of u.children)c.push(...a(l));return c};return qr(a(o.targetSnapshot.root)).pipe(li(null),ut(1))}),qi(()=>this.afterPreactivation()),se(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return u?W(u).pipe(k(()=>r)):D(r)}),k(o=>{let a=El(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=V(v({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),z(()=>{this.events.next(new ar)}),Il(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ut(1),z({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Q(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Qs(this.transitionAbortSubject.pipe(z(o=>{throw o}))),Gr(()=>{!i&&!s&&this.cancelNavigationTransition(r,"",Y.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Le(o=>{if(this.destroyed)return r.resolve(!1),_e;if(s=!0,Ta(o))this.events.next(new he(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),Tl(o)?this.events.next(new St(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Dt(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let u=ce(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Ct){let{message:c,cancellationCode:l}=Rn(this.urlSerializer,u);this.events.next(new he(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new St(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return _e}))}))}cancelNavigationTransition(e,r,i){let s=new he(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yd(n){return n!==dn}var ja=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:()=>_(wd),providedIn:"root"})}return n})(),In=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},wd=(()=>{class n extends In{static \u0275fac=(()=>{let e;return function(i){return(e||(e=fi(n)))(i||n)}})();static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ua=(()=>{class n{urlSerializer=_(ze);options=_(Ve,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=_(Te);urlHandlingStrategy=_(Pn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new fe;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:i}){let s=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,o=i??s;return o instanceof fe?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:i}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=e):this.rawUrlTree=i}routerState=ba(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:()=>_(_d),providedIn:"root"})}return n})(),_d=(()=>{class n extends Ua{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof Pe?this.updateStateMemento():e instanceof pe?this.commitTransition(r):e instanceof or?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof ar?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof he&&(e.code===Y.GuardRejected||e.code===Y.NoDataFromResolver)?this.restoreHistory(r):e instanceof Dt?this.restoreHistory(r,!0):e instanceof Q&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(e)||s){let a=this.browserPageId,u=v(v({},o),this.generateNgRouterState(i,a));this.location.replaceState(e,"",u)}else{let a=v(v({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===e.finalUrl&&s===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=fi(n)))(i||n)}})();static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xn(n,t){n.events.pipe(Ce(e=>e instanceof Q||e instanceof he||e instanceof Dt||e instanceof pe),k(e=>e instanceof Q||e instanceof pe?0:(e instanceof he?e.code===Y.Redirect||e.code===Y.SupersededByNewNavigation:!1)?2:1),Ce(e=>e!==2),ut(1)).subscribe(()=>{t()})}var Dd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},me=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=_(mo);stateManager=_(Ua);options=_(Ve,{optional:!0})||{};pendingTasks=_(io);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=_(Mn);urlSerializer=_(ze);location=_(Te);urlHandlingStrategy=_(Pn);_events=new ie;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=_(ja);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=_(qe,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!_(gr,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new qs;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof he&&r.code!==Y.Redirect&&r.code!==Y.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Q)this.navigated=!0;else if(r instanceof St){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=v({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||yd(i.source)},o);this.scheduleNavigation(a,dn,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Cd(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),dn,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,i)=>{this.navigateToSyncWithBrowser(e,i,r)})}navigateToSyncWithBrowser(e,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=v({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(ls),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:o,l=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":l=v(v({},this.currentUrlTree.queryParams),s);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}l!==null&&(l=this.removeEmptyProps(l));let d;try{let p=i?i.snapshot:this.routerState.snapshot.root;d=ya(p)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return wa(d,e,l,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=ke(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,dn,null,r)}navigate(e,r={skipLocationChange:!1}){return Sd(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=v({},Dd):r===!1?i=v({},bd):i=r,ke(e))return Qo(this.currentUrlTree,e,i);let s=this.parseUrl(e);return Qo(this.currentUrlTree,s,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(e,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,c;o?(a=o.resolve,u=o.reject,c=o.promise):c=new Promise((d,p)=>{a=d,u=p});let l=this.pendingTasks.add();return xn(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sd(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new M(4008,!1)}function Cd(n){return!(n instanceof ar)&&!(n instanceof St)}var $a=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ie;constructor(e,r,i,s,o,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a;let u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof Q&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ke(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let r=this.href===null?null:lo(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(e,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,e,r):i.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:ke(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(q(me),q(ge),pi("tabindex"),q(zt),q($t),q(ae))};static \u0275dir=Re({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&_o("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&yo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Gt],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Gt],replaceUrl:[2,"replaceUrl","replaceUrl",Gt],routerLink:"routerLink"},features:[jt]})}return n})();var vr=class{};var Ba=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,i,s){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ce(e=>e instanceof Q),Ne(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Wr(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return W(i).pipe(ui())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(e,r):i=D(null);let s=i.pipe(K(o=>o===null?D(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return W([s,o]).pipe(ui())}else return s})}static \u0275fac=function(r){return new(r||n)(A(me),A(lt),A(vr),A(kn))};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),za=new x(""),Ed=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,r,i,s,o={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Pe?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Q?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof pe&&e.code===_t.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof bt&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new bt(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){fo()};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})();function Ad(n,...t){return to([{provide:qe,multi:!0,useValue:n},[],{provide:ge,useFactory:Ha,deps:[me]},{provide:Si,multi:!0,useFactory:Va},t.map(e=>e.\u0275providers)])}function Ha(n){return n.routerState.root}function yr(n,t){return{\u0275kind:n,\u0275providers:t}}function Va(){let n=_(Ut);return t=>{let e=n.get(vo);if(t!==e.components[0])return;let r=n.get(me),i=n.get(qa);n.get(ms)===1&&r.initialNavigation(),n.get(Ka,null,hi.Optional)?.setUpPreloading(),n.get(za,null,hi.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var qa=new x("",{factory:()=>new ie}),ms=new x("",{providedIn:"root",factory:()=>1});function Ga(){let n=[{provide:ms,useValue:0},bi(()=>{let t=_(Ut);return t.get(Ai,Promise.resolve()).then(()=>new Promise(r=>{let i=t.get(me),s=t.get(qa);xn(i,()=>{r(!0)}),t.get(Mn).afterPreactivation=()=>(r(!0),s.closed?D(void 0):s),i.initialNavigation()}))})];return yr(2,n)}function Wa(){let n=[bi(()=>{_(me).setUpLocationChangeListener()}),{provide:ms,useValue:2}];return yr(3,n)}var Ka=new x("");function Ya(n){return yr(0,[{provide:Ka,useExisting:Ba},{provide:vr,useExisting:n}])}function Za(){return yr(8,[us,{provide:gr,useExisting:us}])}function Ja(n){yi("NgRouterViewTransitions");let t=[{provide:hs,useValue:Na},{provide:fs,useValue:v({skipNextTransition:!!n?.skipInitialTransition},n)}];return yr(9,t)}var Xa=[Te,{provide:ze,useClass:Oe},me,He,{provide:ge,useFactory:Ha,deps:[me]},kn,[]],Rd=(()=>{class n{constructor(){}static forRoot(e,r){return{ngModule:n,providers:[Xa,[],{provide:qe,multi:!0,useValue:e},[],r?.errorHandler?{provide:ps,useValue:r.errorHandler}:[],{provide:Ve,useValue:r||{}},r?.useHash?Id():Od(),Td(),r?.preloadingStrategy?Ya(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?kd(r):[],r?.bindToComponentInputs?Za().\u0275providers:[],r?.enableViewTransitions?Ja().\u0275providers:[],Pd()]}}static forChild(e){return{ngModule:n,providers:[{provide:qe,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=pt({type:n});static \u0275inj=ct({})}return n})();function Td(){return{provide:za,useFactory:()=>{let n=_(Ho),t=_(Ae),e=_(Ve),r=_(Mn),i=_(ze);return e.scrollOffset&&n.setOffset(e.scrollOffset),new Ed(i,r,n,t,e)}}}function Id(){return{provide:ae,useClass:Oi}}function Od(){return{provide:ae,useClass:Zr}}function kd(n){return[n.initialNavigation==="disabled"?Wa().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Ga().\u0275providers:[]]}var gs=new x("");function Pd(){return[{provide:gs,useFactory:Va},{provide:Si,multi:!0,useExisting:gs}]}var Qa=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var wr=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},Fn=class extends wr{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},_r=class extends wr{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Dr=class extends wr{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},vs=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(vs||{});var Md=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((r=r.apply(n,t||[])).next())})},br=class{constructor(t,{headers:e={},customFetch:r,region:i=vs.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=Qa(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return Md(this,void 0,void 0,function*(){try{let{headers:i,method:s,body:o}=e,a={},{region:u}=e;u||(u=this.region);let c=new URL(`${this.url}/${t}`);u&&u!=="any"&&(a["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let l;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));let d=yield this.fetch(c.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:l}).catch(y=>{throw new Fn(y)}),p=d.headers.get("x-relay-error");if(p&&p==="true")throw new _r(d);if(!d.ok)throw new Dr(d);let f=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield d.json():f==="application/octet-stream"?g=yield d.blob():f==="text/event-stream"?g=d:f==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null,response:d}}catch(i){return{data:null,error:i,response:i instanceof Dr||i instanceof _r?i.context:void 0}}})}};var lu=cc(cu(),1),{PostgrestClient:du,PostgrestQueryBuilder:cm,PostgrestFilterBuilder:lm,PostgrestTransformBuilder:dm,PostgrestBuilder:hm,PostgrestError:Hd}=lu.default;var Is=class{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){let e=process.versions;if(e&&e.node){let r=e.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){let r=this.getWebSocketConstructor();return new r(t,e)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},Os=Is;var hu="2.15.5";var fu=`realtime-js/${hu}`,pu="1.0.0";var Ir=1e4,gu=1e3,mu=100,Or=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(Or||{}),U=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(U||{}),ee=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(ee||{}),ks=function(n){return n.websocket="websocket",n}(ks||{}),Ge=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(Ge||{});var Nn=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let i=e.getUint8(1),s=e.getUint8(2),o=this.HEADER_LENGTH+2,a=r.decode(t.slice(o,o+i));o=o+i;let u=r.decode(t.slice(o,o+s));o=o+s;let c=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:u,payload:c}}};var Tt=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var F=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(F||{}),Ms=(n,t,e={})=>{var r;let i=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,o)=>(s[o]=Vd(o,n,t,i),s),{})},Vd=(n,t,e,r)=>{let i=t.find(a=>a.name===n),s=i?.type,o=e[n];return s&&!r.includes(s)?vu(s,o):Ps(o)},vu=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return Kd(t,e)}switch(n){case F.bool:return qd(t);case F.float4:case F.float8:case F.int2:case F.int4:case F.int8:case F.numeric:case F.oid:return Gd(t);case F.json:case F.jsonb:return Wd(t);case F.timestamp:return Yd(t);case F.abstime:case F.date:case F.daterange:case F.int4range:case F.int8range:case F.money:case F.reltime:case F.text:case F.time:case F.timestamptz:case F.timetz:case F.tsrange:case F.tstzrange:return Ps(t);default:return Ps(t)}},Ps=n=>n,qd=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Gd=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},Wd=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},Kd=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let s,o=n.slice(1,e);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>vu(t,a))}return n},Yd=n=>typeof n=="string"?n.replace(" ","T"):n,jn=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};var It=class{constructor(t,e,r={},i=Ir){this.channel=t,this.event=e,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var kr=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,s,o),this.pendingDiffs.forEach(u=>{this.state=n.syncDiff(this.state,u,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,i){let s=this.cloneDeep(t),o=this.transformState(e),a={},u={};return this.map(s,(c,l)=>{o[c]||(u[c]=l)}),this.map(o,(c,l)=>{let d=s[c];if(d){let p=l.map(m=>m.presence_ref),f=d.map(m=>m.presence_ref),g=l.filter(m=>f.indexOf(m.presence_ref)<0),y=d.filter(m=>p.indexOf(m.presence_ref)<0);g.length>0&&(a[c]=g),y.length>0&&(u[c]=y)}else a[c]=l}),this.syncDiff(s,{joins:a,leaves:u},r,i)}static syncDiff(t,e,r,i){let{joins:s,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,u)=>{var c;let l=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(u),l.length>0){let d=t[a].map(f=>f.presence_ref),p=l.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...p)}r(a,l,u)}),this.map(o,(a,u)=>{let c=t[a];if(!c)return;let l=u.map(d=>d.presence_ref);c=c.filter(d=>l.indexOf(d.presence_ref)<0),t[a]=c,i(a,c,u),c.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let i=t[r];return"metas"in i?e[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):e[r]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Pr=function(n){return n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",n}(Pr||{}),be=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(be||{});var Mr=class n{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=U.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new It(this,ee.join,this.params,this.timeout),this.rejoinTimer=new Tt(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=U.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=U.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=U.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=U.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=U.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ee.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new kr(this),this.broadcastEndpointURL=jn(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==U.closed){let{config:{broadcast:o,presence:a,private:u}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],l=!!this.bindings[Pr.PRESENCE]&&this.bindings[Pr.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,d={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:l}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t?.(be.CHANNEL_ERROR,f)),this._onClose(()=>t?.(be.CLOSED)),this.updateJoinPayload(Object.assign({config:p},d)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",g=>h(this,[g],function*({postgres_changes:f}){var y;if(this.socket.setAuth(),f===void 0){t?.(be.SUBSCRIBED);return}else{let m=this.bindings.postgres_changes,R=(y=m?.length)!==null&&y!==void 0?y:0,T=[];for(let P=0;P<R;P++){let w=m[P],{filter:{event:O,schema:ot,table:L,filter:H}}=w,at=f&&f[P];if(at&&at.event===O&&at.schema===ot&&at.table===L&&at.filter===H)T.push(Object.assign(Object.assign({},w),{id:at.id}));else{this.unsubscribe(),this.state=U.errored,t?.(be.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,t&&t(be.SUBSCRIBED);return}})).receive("error",f=>{this.state=U.errored,t?.(be.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t?.(be.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return h(this,arguments,function*(t,e={}){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,r){return this.state===U.joined&&t===Pr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,r)}send(r){return h(this,arguments,function*(t,e={}){var i,s;if(!this._canPush()&&t.type==="broadcast"){let{event:o,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{let l=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(i=e.timeout)!==null&&i!==void 0?i:this.timeout);return yield(s=l.body)===null||s===void 0?void 0:s.cancel(),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,u,c;let l=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(u=(a=this.params)===null||a===void 0?void 0:a.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),l.receive("ok",()=>o("ok")),l.receive("error",()=>o("error")),l.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=U.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ee.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new It(this,ee.leave,{},t),r.receive("ok",()=>{e(),i("ok")}).receive("timeout",()=>{e(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=U.closed,this.bindings={}}_fetchWithTimeout(t,e,r){return h(this,null,function*(){let i=new AbortController,s=setTimeout(()=>i.abort(),r),o=yield this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(s),o})}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new It(this,t,e,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>mu){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var i,s;let o=t.toLocaleLowerCase(),{close:a,error:u,leave:c,join:l}=ee;if(r&&[a,u,c,l].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,e,r);if(e&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,y,m;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((m=(y=f.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var g,y,m,R,T,P;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){let w=f.id,O=(g=f.filter)===null||g===void 0?void 0:g.event;return w&&((y=e.ids)===null||y===void 0?void 0:y.includes(w))&&(O==="*"||O?.toLocaleLowerCase()===((m=e.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{let w=(T=(R=f?.filter)===null||R===void 0?void 0:R.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return w==="*"||w===((P=e?.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof p=="object"&&"ids"in p){let g=p.data,{schema:y,table:m,commit_timestamp:R,type:T,errors:P}=g;p=Object.assign(Object.assign({},{schema:y,table:m,commit_timestamp:R,eventType:T,new:{},old:{},errors:P}),this._getPayloadRecords(g))}f.callback(p,r)})}_isClosed(){return this.state===U.closed}_isJoined(){return this.state===U.joined}_isJoining(){return this.state===U.joining}_isLeaving(){return this.state===U.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let i=t.toLocaleLowerCase(),s={type:i,filter:e,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&n.isEqual(i.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ee.close,{},t)}_onError(t){this._on(ee.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=U.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Ms(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Ms(t.columns,t.old_record)),e}};var xs=()=>{},Un={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Jd=[1e3,2e3,5e3,1e4],Xd=1e4,Qd=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,xr=class{constructor(t,e){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ir,this.transport=null,this.heartbeatIntervalMs=Un.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xs,this.ref=0,this.reconnectTimer=null,this.logger=xs,this.conn=null,this.sendBuffer=[],this.serializer=new Nn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>import("./chunk-BX7VDEVO.js").then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=e?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${ks.websocket}`,this.httpEndpoint=jn(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Os.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:pu}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,e??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(t){return h(this,null,function*(){let e=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return h(this,null,function*(){let t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Or.connecting:return Ge.Connecting;case Or.open:return Ge.Open;case Or.closing:return Ge.Closing;default:return Ge.Closed}}isConnected(){return this.connectionState()===Ge.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){let r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{let s=new Mr(`realtime:${t}`,e,this);return this.channels.push(s),s}}push(t){let{topic:e,event:r,payload:i,ref:s}=t,o=()=>{this.encode(t,a=>{var u;(u=this.conn)===null||u===void 0||u.send(a)})};this.log("push",`${e} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t=null){return h(this,null,function*(){this._authPromise=this._performAuth(t);try{yield this._authPromise}finally{this._authPromise=null}})}sendHeartbeat(){return h(this,null,function*(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(gu,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},Un.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply")try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:r,event:i,payload:s,ref:o}=e,a=o?`(${o})`:"",u=s.status||"";this.log("receive",`${u} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ee.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${r}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([Qd],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}_performAuth(t=null){return h(this,null,function*(){let e;t?e=t:this.accessToken?e=yield this.accessToken():e=this.accessTokenValue,this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(r=>{let i={access_token:e,version:fu};e&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(ee.access_token,{access_token:e})}))})}_waitForAuthIfNeeded(){return h(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(e)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Tt(()=>h(this,null,function*(){setTimeout(()=>h(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),Un.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(t){var e,r,i,s,o,a,u,c,l;if(this.transport=(e=t?.transport)!==null&&e!==void 0?e:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:Ir,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Un.HEARTBEAT_INTERVAL,this.worker=(s=t?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:xs,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t?.reconnectAfterMs)!==null&&u!==void 0?u:d=>Jd[d-1]||Xd,this.encode=(c=t?.encode)!==null&&c!==void 0?c:(d,p)=>p(JSON.stringify(d)),this.decode=(l=t?.decode)!==null&&l!==void 0?l:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};var Ot=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function N(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var $n=class extends Ot{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},We=class extends Ot{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var eh=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((r=r.apply(n,t||[])).next())})},zn=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},yu=()=>eh(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-BX7VDEVO.js")).Response:Response}),Bn=n=>{if(Array.isArray(n))return n.map(e=>Bn(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let i=e.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Bn(r)}),t},wu=n=>{if(typeof n!="object"||n===null)return!1;let t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ke=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((r=r.apply(n,t||[])).next())})},Fs=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),th=(n,t,e)=>Ke(void 0,void 0,void 0,function*(){let r=yield yu();n instanceof r&&!e?.noResolveJson?n.json().then(i=>{let s=n.status||500,o=i?.statusCode||s+"";t(new $n(Fs(i),s,o))}).catch(i=>{t(new We(Fs(i),i))}):t(new We(Fs(n),n))}),rh=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"||!r?i:(wu(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),e))};function Fr(n,t,e,r,i,s){return Ke(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(e,rh(t,r,i,s)).then(u=>{if(!u.ok)throw u;return r?.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>th(u,a,r))})})}function kt(n,t,e,r){return Ke(this,void 0,void 0,function*(){return Fr(n,"GET",t,e,r)})}function te(n,t,e,r,i){return Ke(this,void 0,void 0,function*(){return Fr(n,"POST",t,r,i,e)})}function Lr(n,t,e,r,i){return Ke(this,void 0,void 0,function*(){return Fr(n,"PUT",t,r,i,e)})}function _u(n,t,e,r){return Ke(this,void 0,void 0,function*(){return Fr(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function Hn(n,t,e,r,i){return Ke(this,void 0,void 0,function*(){return Fr(n,"DELETE",t,r,i,e)})}var G=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((r=r.apply(n,t||[])).next())})},nh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Du={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Vn=class{constructor(t,e={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=zn(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,r,i){return G(this,void 0,void 0,function*(){try{let s,o=Object.assign(Object.assign({},Du),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)}),u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),u&&s.append("metadata",this.encodeMetadata(u)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),u&&s.append("metadata",this.encodeMetadata(u))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,u&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let c=this._removeEmptyFolders(e),l=this._getFinalPath(c),d=yield(t=="PUT"?Lr:te)(this.fetch,`${this.url}/object/${l}`,s,Object.assign({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(N(s))return{data:null,error:s};throw s}})}upload(t,e,r){return G(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,i){return G(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(t),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let u,c=Object.assign({upsert:Du.upsert},i),l=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,l["cache-control"]=`max-age=${c.cacheControl}`,l["content-type"]=c.contentType);let d=yield Lr(this.fetch,a.toString(),u,{headers:l});return{data:{path:s,fullPath:d.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(N(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,e){return G(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");let s=yield te(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Ot("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(N(r))return{data:null,error:r};throw r}})}update(t,e,r){return G(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return G(this,void 0,void 0,function*(){try{return{data:yield te(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(N(i))return{data:null,error:i};throw i}})}copy(t,e,r){return G(this,void 0,void 0,function*(){try{return{data:{path:(yield te(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(N(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,r){return G(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield te(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(N(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,r){return G(this,void 0,void 0,function*(){try{let i=yield te(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(N(i))return{data:null,error:i};throw i}})}download(t,e){return G(this,void 0,void 0,function*(){let i=typeof e?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(e?.transform||{}),o=s?`?${s}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield kt(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(N(a))return{data:null,error:a};throw a}})}info(t){return G(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield kt(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Bn(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(N(r))return{data:null,error:r};throw r}})}exists(t){return G(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield _u(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(N(r)&&r instanceof We){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),i=[],s=e?.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&i.push(s);let a=typeof e?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(e?.transform||{});u!==""&&i.push(u);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return G(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(N(e))return{data:null,error:e};throw e}})}list(t,e,r){return G(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},nh),e),{prefix:t||""});return{data:yield te(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(N(i))return{data:null,error:i};throw i}})}listV2(t,e){return G(this,void 0,void 0,function*(){try{let r=Object.assign({},t);return{data:yield te(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(N(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var bu="2.12.1";var Su={"X-Client-Info":`storage-js/${bu}`};var Pt=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((r=r.apply(n,t||[])).next())})},qn=class{constructor(t,e={},r,i){this.shouldThrowOnError=!1;let s=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},Su),e),this.fetch=zn(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Pt(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(N(t))return{data:null,error:t};throw t}})}getBucket(t){return Pt(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(N(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return Pt(this,void 0,void 0,function*(){try{return{data:yield te(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(N(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return Pt(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(N(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Pt(this,void 0,void 0,function*(){try{return{data:yield te(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(N(e))return{data:null,error:e};throw e}})}deleteBucket(t){return Pt(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(N(e))return{data:null,error:e};throw e}})}};var Nr=class extends qn{constructor(t,e={},r,i){super(t,e,r,i)}from(t){return new Vn(this.url,this.headers,t,this.fetch)}};var Cu="2.57.4";var jr="";typeof Deno<"u"?jr="deno":typeof document<"u"?jr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jr="react-native":jr="node";var ih={"X-Client-Info":`supabase-js-${jr}/${Cu}`},Eu={headers:ih},Au={schema:"public"},Ru={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Tu={};To();var sh=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((r=r.apply(n,t||[])).next())})},oh=n=>{let t;return n?t=n:typeof fetch>"u"?t=Ao:t=fetch,(...e)=>t(...e)},ah=()=>typeof Headers>"u"?Ro:Headers,Iu=(n,t,e)=>{let r=oh(e),i=ah();return(s,o)=>sh(void 0,void 0,void 0,function*(){var a;let u=(a=yield t())!==null&&a!==void 0?a:n,c=new i(o?.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var uh=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((r=r.apply(n,t||[])).next())})};function ch(n){return n.endsWith("/")?n:n+"/"}function Ou(n,t){var e,r;let{db:i,auth:s,realtime:o,global:a}=n,{db:u,auth:c,realtime:l,global:d}=t,p={db:Object.assign(Object.assign({},u),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},l),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(e=d?.headers)!==null&&e!==void 0?e:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>uh(this,void 0,void 0,function*(){return""})};return n.accessToken?p.accessToken=n.accessToken:delete p.accessToken,p}function ku(n){let t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ch(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Gn="2.71.1";var Ye=30*1e3,Wn=3,Kn=Wn*Ye,Pu="http://localhost:9999",Mu="supabase.auth.token";var xu={"X-Client-Info":`gotrue-js/${Gn}`};var Ur="X-Supabase-Api-Version",Ls={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Fu=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Lu=10*60*1e3;var $r=class extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}};function b(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var Yn=class extends $r{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}};function Nu(n){return b(n)&&n.name==="AuthApiError"}var Mt=class extends $r{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},ve=class extends $r{constructor(t,e,r,i){super(t,r,i),this.name=e,this.status=r}},re=class extends ve{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function ju(n){return b(n)&&n.name==="AuthSessionMissingError"}var Ze=class extends ve{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Je=class extends ve{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Xe=class extends ve{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Uu(n){return b(n)&&n.name==="AuthImplicitGrantRedirectError"}var Br=class extends ve{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},xt=class extends ve{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function Zn(n){return b(n)&&n.name==="AuthRetryableFetchError"}var zr=class extends ve{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}};var Qe=class extends ve{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var Jn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$u=` 	
\r=`.split(""),lh=(()=>{let n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<$u.length;t+=1)n[$u[t].charCodeAt(0)]=-2;for(let t=0;t<Jn.length;t+=1)n[Jn[t].charCodeAt(0)]=t;return n})();function Bu(n,t,e){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(Jn[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(Jn[r]),t.queuedBits-=6}}function zu(n,t,e){let r=lh[n];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Ns(n){let t=[],e=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{fh(o,r,e)};for(let o=0;o<n.length;o+=1)zu(n.charCodeAt(o),i,s);return t.join("")}function dh(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function hh(n,t){for(let e=0;e<n.length;e+=1){let r=n.charCodeAt(e);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(n.charCodeAt(e+1)-56320&65535|i)+65536,e+=1}dh(r,t)}}function fh(n,t,e){if(t.utf8seq===0){if(n<=127){e(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function Hu(n){let t=[],e={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<n.length;i+=1)zu(n.charCodeAt(i),e,r);return new Uint8Array(t)}function Vu(n){let t=[];return hh(n,e=>t.push(e)),new Uint8Array(t)}function qu(n){let t=[],e={queue:0,queuedBits:0},r=i=>{t.push(i)};return n.forEach(i=>Bu(i,e,r)),Bu(null,e,r),t.join("")}function Gu(n){return Math.round(Date.now()/1e3)+n}function Wu(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var ne=()=>typeof window<"u"&&typeof document<"u",et={tested:!1,writable:!1},Xn=()=>{if(!ne())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(et.tested)return et.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),et.tested=!0,et.writable=!0}catch{et.tested=!0,et.writable=!1}return et.writable};function Ku(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return e.searchParams.forEach((r,i)=>{t[i]=r}),t}var Qn=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},Yu=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",tt=(n,t,e)=>h(null,null,function*(){yield n.setItem(t,JSON.stringify(e))}),xe=(n,t)=>h(null,null,function*(){let e=yield n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),Se=(n,t)=>h(null,null,function*(){yield n.removeItem(t)}),Hr=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};Hr.promiseConstructor=Promise;function ei(n){let t=n.split(".");if(t.length!==3)throw new Qe("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Fu.test(t[r]))throw new Qe("JWT not in base64url format");return{header:JSON.parse(Ns(t[0])),payload:JSON.parse(Ns(t[1])),signature:Hu(t[2]),raw:{header:t[0],payload:t[1]}}}function Zu(n){return h(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})}function Ju(n,t){return new Promise((r,i)=>{h(null,null,function*(){for(let s=0;s<1/0;s++)try{let o=yield n(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){i(o);return}}})})}function ph(n){return("0"+n.toString(16)).substr(-2)}function gh(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,i="";for(let s=0;s<56;s++)i+=e.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,ph).join("")}function mh(n){return h(this,null,function*(){let e=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",e),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")})}function vh(n){return h(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=yield mh(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function rt(n,t,e=!1){return h(this,null,function*(){let r=gh(),i=r;e&&(i+="/PASSWORD_RECOVERY"),yield tt(n,`${t}-code-verifier`,i);let s=yield vh(r);return[s,r===s?"plain":"s256"]})}var yh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Xu(n){let t=n.headers.get(Ur);if(!t||!t.match(yh))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Qu(n){if(!n)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function ec(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var wh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function nt(n){if(!wh.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ti(){let n={};return new Proxy(n,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){let r=e.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function js(n){return JSON.parse(JSON.stringify(n))}var _h=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},it=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Dh=[502,503,504];function tc(n){return h(this,null,function*(){var t;if(!Yu(n))throw new xt(it(n),0);if(Dh.includes(n.status))throw new xt(it(n),n.status);let e;try{e=yield n.json()}catch(s){throw new Mt(it(s),s)}let r,i=Xu(n);if(i&&i.getTime()>=Ls["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?r=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(r=e.error_code),r){if(r==="weak_password")throw new zr(it(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new re}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new zr(it(e),n.status,e.weak_password.reasons);throw new Yn(it(e),n.status||500,r)})}var bh=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),e))};function E(n,t,e,r){return h(this,null,function*(){var i;let s=Object.assign({},r?.headers);s[Ur]||(s[Ur]=Ls["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);let o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=yield Sh(n,t,e+a,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(u):{data:Object.assign({},u),error:null}})}function Sh(n,t,e,r,i,s){return h(this,null,function*(){let o=bh(t,r,i,s),a;try{a=yield n(e,Object.assign({},o))}catch(u){throw console.error(u),new xt(it(u),0)}if(a.ok||(yield tc(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(u){yield tc(u)}})}function ye(n){var t;let e=null;Ch(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=Gu(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function Us(n){let t=ye(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function we(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function rc(n){return{data:n,error:null}}function nc(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:s}=n,o=_h(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:s},u=Object.assign({},o);return{data:{properties:a,user:u},error:null}}function ic(n){return n}function Ch(n){return n.access_token&&n.refresh_token&&n.expires_in}var ri=["global","local","others"];var Eh=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},Ft=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=Qn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(r){return h(this,arguments,function*(t,e=ri[0]){if(ri.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ri.join(", ")}`);try{return yield E(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(b(i))return{data:null,error:i};throw i}})}inviteUserByEmail(r){return h(this,arguments,function*(t,e={}){try{return yield E(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:we})}catch(i){if(b(i))return{data:{user:null},error:i};throw i}})}generateLink(t){return h(this,null,function*(){try{let{options:e}=t,r=Eh(t,["options"]),i=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),yield E(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:nc,redirectTo:e?.redirectTo})}catch(e){if(b(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return h(this,null,function*(){try{return yield E(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:we})}catch(e){if(b(e))return{data:{user:null},error:e};throw e}})}listUsers(t){return h(this,null,function*(){var e,r,i,s,o,a,u;try{let c={nextPage:null,lastPage:0,total:0},l=yield E(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:ic});if(l.error)throw l.error;let d=yield l.json(),p=(o=l.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(u=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&u!==void 0?u:[];return f.length>0&&(f.forEach(g=>{let y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(g.split(";")[1].split("=")[1]);c[`${m}Page`]=y}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(b(c))return{data:{users:[]},error:c};throw c}})}getUserById(t){return h(this,null,function*(){nt(t);try{return yield E(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:we})}catch(e){if(b(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return h(this,null,function*(){nt(t);try{return yield E(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:we})}catch(r){if(b(r))return{data:{user:null},error:r};throw r}})}deleteUser(t,e=!1){return h(this,null,function*(){nt(t);try{return yield E(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:we})}catch(r){if(b(r))return{data:{user:null},error:r};throw r}})}_listFactors(t){return h(this,null,function*(){nt(t.userId);try{let{data:e,error:r}=yield E(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:r}}catch(e){if(b(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return h(this,null,function*(){nt(t.userId),nt(t.id);try{return{data:yield E(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(b(e))return{data:null,error:e};throw e}})}};function $s(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function sc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var st={debug:!!(globalThis&&Xn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Vr=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},ni=class extends Vr{};function Bs(n,t,e){return h(this,null,function*(){st.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),st.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},i=>h(null,null,function*(){if(i){st.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield e()}finally{st.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(t===0)throw st.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new ni(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(st.debug)try{let s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}})))})}sc();var Ah={url:Pu,storageKey:Mu,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function oc(n,t,e){return h(this,null,function*(){return yield e()})}var Lt={},zs=(()=>{class n{constructor(e){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&ne()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let s=Object.assign(Object.assign({},Ah),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ft({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Qn(s.fetch),this.lock=s.lock||oc,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ne()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Bs:this.lock=oc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Xn()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$s(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=$s(this.memoryStorage)),ne()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",o=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}get jwks(){var e,r;return(r=(e=Lt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Lt[this.storageKey]=Object.assign(Object.assign({},Lt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Lt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Lt[this.storageKey]=Object.assign(Object.assign({},Lt[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gn}) ${new Date().toISOString()}`,...e),this}initialize(){return h(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return h(this,null,function*(){var e;try{let r=Ku(window.location.href),i="none";if(this._isImplicitGrantCallback(r)?i="implicit":(yield this._isPKCECallback(r))&&(i="pkce"),ne()&&this.detectSessionInUrl&&i!=="none"){let{data:s,error:o}=yield this._getSessionFromURL(r,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Uu(o)){let c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return yield this._removeSession(),{error:o}}let{session:a,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",u),yield this._saveSession(a),setTimeout(()=>h(this,null,function*(){u==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return b(r)?{error:r}:{error:new Mt("Unexpected error during initialization",r)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return h(this,null,function*(){var r,i,s;try{let o=yield E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:ye}),{data:a,error:u}=o;if(u||!a)return{data:{user:null,session:null},error:u};let c=a.session,l=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(o){if(b(o))return{data:{user:null,session:null},error:o};throw o}})}signUp(e){return h(this,null,function*(){var r,i,s;try{let o;if("email"in e){let{email:d,password:p,options:f}=e,g=null,y=null;this.flowType==="pkce"&&([g,y]=yield rt(this.storage,this.storageKey)),o=yield E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:p,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:g,code_challenge_method:y},xform:ye})}else if("phone"in e){let{phone:d,password:p,options:f}=e;o=yield E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(s=f?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:ye})}else throw new Je("You must provide either an email or phone number and a password");let{data:a,error:u}=o;if(u||!a)return{data:{user:null,session:null},error:u};let c=a.session,l=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(o){if(b(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(e){return h(this,null,function*(){try{let r;if("email"in e){let{email:o,password:a,options:u}=e;r=yield E(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Us})}else if("phone"in e){let{phone:o,password:a,options:u}=e;r=yield E(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Us})}else throw new Je("You must provide either an email or phone number and a password");let{data:i,error:s}=r;return s?{data:{user:null,session:null},error:s}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Ze}:(i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(r){if(b(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(e){return h(this,null,function*(){var r,i,s,o;return yield this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(e){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(e)}))})}signInWithWeb3(e){return h(this,null,function*(){let{chain:r}=e;if(r==="solana")return yield this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)})}signInWithSolana(e){return h(this,null,function*(){var r,i,s,o,a,u,c,l,d,p,f,g;let y,m;if("message"in e)y=e.message,m=e.signature;else{let{chain:R,wallet:T,statement:P,options:w}=e,O;if(ne())if(typeof T=="object")O=T;else{let L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))O=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=T}let ot=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in O&&O.signIn){let L=yield O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:ot.host,uri:ot.href}),P?{statement:P}:null)),H;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")H=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)H=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)y=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),m=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${ot.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${ot.href}`,`Issued At: ${(s=(i=w?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=w?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((p=(d=w?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...w.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);let L=yield O.signMessage(new TextEncoder().encode(y),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=L}}try{let{data:R,error:T}=yield E(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:qu(m)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:ye});if(T)throw T;return!R||!R.session||!R.user?{data:{user:null,session:null},error:new Ze}:(R.session&&(yield this._saveSession(R.session),yield this._notifyAllSubscribers("SIGNED_IN",R.session)),{data:Object.assign({},R),error:T})}catch(R){if(b(R))return{data:{user:null,session:null},error:R};throw R}})}_exchangeCodeForSession(e){return h(this,null,function*(){let r=yield xe(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(r??"").split("/");try{let{data:o,error:a}=yield E(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:ye});if(yield Se(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Ze}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(b(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}})}signInWithIdToken(e){return h(this,null,function*(){try{let{options:r,provider:i,token:s,access_token:o,nonce:a}=e,u=yield E(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:ye}),{data:c,error:l}=u;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ze}:(c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(r){if(b(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(e){return h(this,null,function*(){var r,i,s,o,a;try{if("email"in e){let{email:u,options:c}=e,l=null,d=null;this.flowType==="pkce"&&([l,d]=yield rt(this.storage,this.storageKey));let{error:p}=yield E(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:l,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){let{phone:u,options:c}=e,{data:l,error:d}=yield E(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:l?.message_id},error:d}}throw new Je("You must provide either an email or phone number.")}catch(u){if(b(u))return{data:{user:null,session:null},error:u};throw u}})}verifyOtp(e){return h(this,null,function*(){var r,i;try{let s,o;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:u}=yield E(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:ye});if(u)throw u;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,l=a.user;return c?.access_token&&(yield this._saveSession(c),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(b(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(e){return h(this,null,function*(){var r,i,s;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=yield rt(this.storage,this.storageKey)),yield E(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:rc})}catch(o){if(b(o))return{data:null,error:o};throw o}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(e=>h(this,null,function*(){let{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new re;let{error:s}=yield E(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}}))}catch(e){if(b(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return h(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in e){let{email:i,type:s,options:o}=e,{error:a}=yield E(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:i,type:s,options:o}=e,{data:a,error:u}=yield E(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:u}}throw new Je("You must provide either an email or phone number and a type")}catch(r){if(b(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(r=>h(this,null,function*(){return r}))}))})}_acquireLock(e,r){return h(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=h(this,null,function*(){return yield i,yield r()});return this.pendingInLock.push(h(this,null,function*(){try{yield s}catch{}})),s}return yield this.lock(`lock:${this.storageKey}`,e,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push(h(this,null,function*(){try{yield i}catch{}})),yield i;this.pendingInLock.length;){let s=[...this.pendingInLock];yield Promise.all(s),this.pendingInLock.splice(0,s.length)}return yield i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return h(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield e(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=yield xe(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at*1e3-Date.now()<Kn:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){let a=yield xe(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=ti()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,d)=>(!a&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,d))})}return{data:{session:e},error:null}}let{session:s,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return h(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return h(this,null,function*(){try{return e?yield E(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:we}):yield this._useSession(r=>h(this,null,function*(){var i,s,o;let{data:a,error:u}=r;if(u)throw u;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new re}:yield E(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:we})}))}catch(r){if(b(r))return ju(r)&&(yield this._removeSession(),yield Se(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}})}updateUser(i){return h(this,arguments,function*(e,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(e,r)}))})}_updateUser(i){return h(this,arguments,function*(e,r={}){try{return yield this._useSession(s=>h(this,null,function*(){let{data:o,error:a}=s;if(a)throw a;if(!o.session)throw new re;let u=o.session,c=null,l=null;this.flowType==="pkce"&&e.email!=null&&([c,l]=yield rt(this.storage,this.storageKey));let{data:d,error:p}=yield E(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:l}),jwt:u.access_token,xform:we});if(p)throw p;return u.user=d.user,yield this._saveSession(u),yield this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}}))}catch(s){if(b(s))return{data:{user:null},error:s};throw s}})}setSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return h(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new re;let r=Date.now()/1e3,i=r,s=!0,o=null,{payload:a}=ei(e.access_token);if(a.exp&&(i=a.exp,s=i<=r),s){let{session:u,error:c}=yield this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{let{data:u,error:c}=yield this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:i-r,expires_at:i},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(b(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i;if(!e){let{data:a,error:u}=r;if(u)throw u;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new re;let{session:s,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(b(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(e,r){return h(this,null,function*(){try{if(!ne())throw new Xe("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Xe(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Br("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xe("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Br("No code detected.");let{data:P,error:w}=yield this._exchangeCodeForSession(e.code);if(w)throw w;let O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:P.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:u,expires_at:c,token_type:l}=e;if(!o||!u||!a||!l)throw new Xe("No session defined in URL");let d=Math.round(Date.now()/1e3),p=parseInt(u),f=d+p;c&&(f=parseInt(c));let g=f-d;g*1e3<=Ye&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);let y=f-p;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);let{data:m,error:R}=yield this._getUser(o);if(R)throw R;let T={provider_token:i,provider_refresh_token:s,access_token:o,expires_in:p,expires_at:f,refresh_token:a,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:e.type},error:null}}catch(i){if(b(i))return{data:{session:null,redirectType:null},error:i};throw i}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return h(this,null,function*(){let r=yield xe(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)})}signOut(){return h(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return h(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(r=>h(this,null,function*(){var i;let{data:s,error:o}=r;if(o)return{error:o};let a=(i=s.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:u}=yield this.admin.signOut(a,e);if(u&&!(Nu(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(yield this._removeSession(),yield Se(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){let r=Wu(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:i}}}_emitInitialSession(e){return h(this,null,function*(){return yield this._useSession(r=>h(this,null,function*(){var i,s;try{let{data:{session:o},error:a}=r;if(a)throw a;yield(i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){yield(s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}}))})}resetPasswordForEmail(i){return h(this,arguments,function*(e,r={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=yield rt(this.storage,this.storageKey,!0));try{return yield E(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(b(a))return{data:null,error:a};throw a}})}getUserIdentities(){return h(this,null,function*(){var e;try{let{data:r,error:i}=yield this.getUser();if(i)throw i;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(b(r))return{data:null,error:r};throw r}})}linkIdentity(e){return h(this,null,function*(){var r;try{let{data:i,error:s}=yield this._useSession(o=>h(this,null,function*(){var a,u,c,l,d;let{data:p,error:f}=o;if(f)throw f;let g=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return yield E(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(l=p.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})}));if(s)throw s;return ne()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(b(i))return{data:{provider:e.provider,url:null},error:i};throw i}})}unlinkIdentity(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i,s;let{data:o,error:a}=r;if(a)throw a;return yield E(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})}))}catch(r){if(b(r))return{data:null,error:r};throw r}})}_refreshAccessToken(e){return h(this,null,function*(){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return yield Ju(s=>h(this,null,function*(){return s>0&&(yield Zu(200*Math.pow(2,s-1))),this._debug(r,"refreshing attempt",s),yield E(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ye})}),(s,o)=>{let a=200*Math.pow(2,s);return o&&Zn(o)&&Date.now()+a-i<Ye})}catch(i){if(this._debug(r,"error",i),b(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){return h(this,null,function*(){let i=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),ne()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var e,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let s=yield xe(this.storage,this.storageKey);if(s&&this.userStorage){let a=yield xe(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},yield tt(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a?.user)!==null&&e!==void 0?e:ti()}else if(s&&!s.user&&!s.user){let a=yield xe(this.storage,this.storageKey+"-user");a&&a?.user?(s.user=a.user,yield Se(this.storage,this.storageKey+"-user"),yield tt(this.storage,this.storageKey,s)):s.user=ti()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&(yield this._removeSession());return}let o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Kn;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${Kn}s`),o){if(this.autoRefreshToken&&s.refresh_token){let{error:a}=yield this._callRefreshToken(s.refresh_token);a&&(console.error(a),Zn(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:u}=yield this._getUser(s.access_token);!u&&a?.user?(s.user=a.user,yield this._saveSession(s),yield this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else yield this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}})}_callRefreshToken(e){return h(this,null,function*(){var r,i;if(!e)throw new re;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Hr;let{data:o,error:a}=yield this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new re;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(s,"error",o),b(o)){let a={session:null,error:o};return Zn(o)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}})}_notifyAllSubscribers(e,r,i=!0){return h(this,null,function*(){let s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(u=>h(this,null,function*(){try{yield u.callback(e,r)}catch(c){o.push(c)}}));if(yield Promise.all(a),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(s,"end")}})}_saveSession(e){return h(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;let r=Object.assign({},e),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&(yield tt(this.userStorage,this.storageKey+"-user",{user:r.user}));let s=Object.assign({},r);delete s.user;let o=js(s);yield tt(this.storage,this.storageKey,o)}else{let s=js(r);yield tt(this.storage,this.storageKey,s)}})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),yield Se(this.storage,this.storageKey),yield Se(this.storage,this.storageKey+"-code-verifier"),yield Se(this.storage,this.storageKey+"-user"),this.userStorage&&(yield Se(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ne()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),Ye);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(r=>h(this,null,function*(){let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((i.expires_at*1e3-e)/Ye);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ye}ms, refresh threshold is ${Wn} ticks`),s<=Wn&&(yield this._callRefreshToken(i.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof Vr)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!ne()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return h(this,null,function*(){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,r,i){return h(this,null,function*(){let s=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[o,a]=yield rt(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(u.toString())}if(i?.queryParams){let o=new URLSearchParams(i.queryParams);s.push(o.toString())}return i?.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${s.join("&")}`})}_unenroll(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i;let{data:s,error:o}=r;return o?{data:null,error:o}:yield E(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(b(r))return{data:null,error:r};throw r}})}_enroll(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i,s;let{data:o,error:a}=r;if(a)return{data:null,error:a};let u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=yield E(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})}))}catch(r){if(b(r))return{data:null,error:r};throw r}})}_verify(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i;let{data:s,error:o}=r;if(o)return{data:null,error:o};let{data:a,error:u}=yield E(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return u?{data:null,error:u}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:u})}))}catch(r){if(b(r))return{data:null,error:r};throw r}}))})}_challenge(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i;let{data:s,error:o}=r;return o?{data:null,error:o}:yield E(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(b(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(e){return h(this,null,function*(){let{data:r,error:i}=yield this._challenge({factorId:e.factorId});return i?{data:null,error:i}:yield this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})})}_listFactors(){return h(this,null,function*(){let{data:{user:e},error:r}=yield this.getUser();if(r)return{data:null,error:r};let i=e?.factors||[],s=i.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=i.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:i,totp:s,phone:o},error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){return yield this._useSession(e=>h(this,null,function*(){var r,i;let{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=ei(s.access_token),u=null;a.aal&&(u=a.aal);let c=u;((i=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(c="aal2");let d=a.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}))})}fetchJwk(i){return h(this,arguments,function*(e,r={keys:[]}){let s=r.keys.find(c=>c.kid===e);if(s)return s;let o=Date.now();if(s=this.jwks.keys.find(c=>c.kid===e),s&&this.jwks_cached_at+Lu>o)return s;let{data:a,error:u}=yield E(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,s=a.keys.find(c=>c.kid===e),!s)?null:s})}getClaims(i){return h(this,arguments,function*(e,r={}){try{let s=e;if(!s){let{data:y,error:m}=yield this.getSession();if(m||!y.session)return{data:null,error:m};s=y.session.access_token}let{header:o,payload:a,signature:u,raw:{header:c,payload:l}}=ei(s);r?.allowExpired||Qu(a.exp);let d=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!d){let{error:y}=yield this.getUser(s);if(y)throw y;return{data:{claims:a,header:o,signature:u},error:null}}let p=ec(o.alg),f=yield crypto.subtle.importKey("jwk",d,p,!0,["verify"]);if(!(yield crypto.subtle.verify(p,f,u,Vu(`${c}.${l}`))))throw new Qe("Invalid JWT signature");return{data:{claims:a,header:o,signature:u},error:null}}catch(s){if(b(s))return{data:null,error:s};throw s}})}}return n.nextInstanceID=0,n})();var Rh=zs,Hs=Rh;var ii=class extends Hs{constructor(t){super(t)}};var Th=function(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((r=r.apply(n,t||[])).next())})},si=class{constructor(t,e,r){var i,s,o;this.supabaseUrl=t,this.supabaseKey=e;let a=ku(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);let u=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:Au,realtime:Tu,auth:Object.assign(Object.assign({},Ru),{storageKey:u}),global:Eu},l=Ou(r??{},c);this.storageKey=(i=l.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=l.auth)!==null&&o!==void 0?o:{},this.headers,l.global.fetch),this.fetch=Iu(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new du(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Nr(this.storageUrl.href,this.headers,this.fetch,r?.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new br(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return Th(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:a,lock:u,debug:c},l,d){let p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ii({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),l),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:u,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new xr(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var ac=(n,t,e)=>new si(n,t,e);function Ih(){if(typeof window<"u"||typeof process>"u")return!1;let n=process.version;if(n==null)return!1;let t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Ih()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Vs={production:!0,SUPABASE_URL:"https://xxgskrduziddczmeicuc.supabase.co",SUPABASE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh4Z3NrcmR1emlkZGN6bWVpY3VjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0NDgzOTQsImV4cCI6MjA3MzAyNDM5NH0.GAa-eQDH-rA7Aza-kQ0usvqeNXYcHX0hCezAd1E2xGc"};var uc=class n{supabaseClient;constructor(){this.supabaseClient=ac(Vs.SUPABASE_URL,Vs.SUPABASE_KEY)}get client(){return this.supabaseClient}getSession(){return h(this,null,function*(){let{data:t,error:e}=yield this.supabaseClient.auth.getSession();if(e)throw e;return t.session})}getUserProfile(t){return h(this,null,function*(){try{let{data:e,error:r}=yield this.supabaseClient.from("profiles").select("*").eq("id",t).single();if(r){if(console.error("Supabase error:",r),r.code==="PGRST116")return null;throw r}return e}catch(e){throw console.error("getUserProfile error:",e),e}})}createUserProfile(t){return h(this,null,function*(){let{data:e,error:r}=yield this.supabaseClient.from("profiles").insert(t).select().single();if(r)throw console.error("Error creating profile:",r),r;return e})}getProductos(){return h(this,null,function*(){let{data:t,error:e}=yield this.supabaseClient.from("productos").select("*").eq("es_activo",!0).order("nombre");if(e)throw e;return t||[]})}getProductosConStock(){return h(this,null,function*(){let{data:t,error:e}=yield this.supabaseClient.from("productos").select(`
        *,
        inventario:inventario(
          id,
          cantidad,
          ubicacion,
          estado
        )
      `).eq("es_activo",!0).order("nombre");if(e)throw e;return t||[]})}getInventarios(){return h(this,null,function*(){let{data:t,error:e}=yield this.supabaseClient.from("inventario").select(`
        *,
        producto:productos(*)
      `).order("created_at",{ascending:!1});if(e)throw e;return t||[]})}getInventariosByProducto(t){return h(this,null,function*(){let{data:e,error:r}=yield this.supabaseClient.from("inventario").select(`
        *,
        producto:productos(*)
      `).eq("producto_id",t).order("created_at",{ascending:!1});if(r)throw r;return e||[]})}updateInventario(t,e){return h(this,null,function*(){let{error:r}=yield this.supabaseClient.from("inventario").update({cantidad:e,updated_at:new Date().toISOString()}).eq("id",t);if(r)throw r})}createMovimiento(t){return h(this,null,function*(){let{data:e,error:r}=yield this.supabaseClient.from("movimientos_inventario").insert(t).select(`
        *,
        producto:productos(*),
        usuario:profiles(*)
      `).single();if(r)throw r;return e})}getCurrentUserId(){return h(this,null,function*(){let{data:t}=yield this.client.auth.getUser();return t.user?.id??null})}getMovimientos(){return h(this,null,function*(){let{data:t,error:e}=yield this.supabaseClient.from("movimientos_inventario").select(`
        *,
        producto:productos(*),
        usuario:profiles(*)
      `).order("fecha",{ascending:!1}).limit(50);if(e)throw e;return t||[]})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})};export{De as a,Sc as b,Uo as c,Cc as d,Ac as e,Rc as f,Bo as g,Vc as h,ge as i,as as j,me as k,$a as l,Ad as m,Rd as n,uc as o};
